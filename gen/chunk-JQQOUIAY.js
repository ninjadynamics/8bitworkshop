import{a as Ji,b as qo}from"./chunk-M72QJ5SI.js";import{a as ks}from"./chunk-5SHCNQ2O.js";import{a as Ps,b as Vo}from"./chunk-OKGLQXAS.js";import{B as na,H as aa,s as Ts,t as Cs}from"./chunk-5KW3VA4L.js";import{a as _s,b as pe}from"./chunk-5B4VPQ4V.js";import{$ as Es,C as Ft,D as ta,E as Dr,H as xs,I as ra,R as ia,T as ws,a as At,aa as Ss,b as ri,ba as ii,d as yt,e as ea,f as xt,g as De,j as ms,l as Vi,m as Gi,n as Yi,o as gr,p as vs,s as Xi,u as bs,v as ys,w as Qi,x as ht,y as Fr}from"./chunk-ZDSSTLWD.js";import{b as ti,c as gs,e as Zn}from"./chunk-5XVCUSSZ.js";var oa=gs((As,sa)=>{(function(l){if(typeof As=="object"&&typeof sa!="undefined")sa.exports=l();else if(typeof define=="function"&&define.amd)define([],l);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=l()}})(function(){var l,t,i;return function a(u,d,m){function w(U,de){if(!d[U]){if(!u[U]){var W=typeof ti=="function"&&ti;if(!de&&W)return W(U,!0);if(b)return b(U,!0);var H=new Error("Cannot find module '"+U+"'");throw H.code="MODULE_NOT_FOUND",H}var G=d[U]={exports:{}};u[U][0].call(G.exports,function(se){var K=u[U][1][se];return w(K||se)},G,G.exports,a,u,d,m)}return d[U].exports}for(var b=typeof ti=="function"&&ti,L=0;L<m.length;L++)w(m[L]);return w}({1:[function(a,u,d){(function(m){"use strict";var w=m.MutationObserver||m.WebKitMutationObserver,b;if(w){var L=0,U=new w(se),de=m.document.createTextNode("");U.observe(de,{characterData:!0}),b=function(){de.data=L=++L%2}}else if(!m.setImmediate&&typeof m.MessageChannel!="undefined"){var W=new m.MessageChannel;W.port1.onmessage=se,b=function(){W.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?b=function(){var xe=m.document.createElement("script");xe.onreadystatechange=function(){se(),xe.onreadystatechange=null,xe.parentNode.removeChild(xe),xe=null},m.document.documentElement.appendChild(xe)}:b=function(){setTimeout(se,0)};var H,G=[];function se(){H=!0;for(var xe,Ee,be=G.length;be;){for(Ee=G,G=[],xe=-1;++xe<be;)Ee[xe]();be=G.length}H=!1}u.exports=K;function K(xe){G.push(xe)===1&&!H&&b()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(a,u,d){"use strict";var m=a(1);function w(){}var b={},L=["REJECTED"],U=["FULFILLED"],de=["PENDING"];u.exports=W;function W(Y){if(typeof Y!="function")throw new TypeError("resolver must be a function");this.state=de,this.queue=[],this.outcome=void 0,Y!==w&&K(this,Y)}W.prototype.catch=function(Y){return this.then(null,Y)},W.prototype.then=function(Y,ne){if(typeof Y!="function"&&this.state===U||typeof ne!="function"&&this.state===L)return this;var he=new this.constructor(w);if(this.state!==de){var ke=this.state===U?Y:ne;G(he,ke,this.outcome)}else this.queue.push(new H(he,Y,ne));return he};function H(Y,ne,he){this.promise=Y,typeof ne=="function"&&(this.onFulfilled=ne,this.callFulfilled=this.otherCallFulfilled),typeof he=="function"&&(this.onRejected=he,this.callRejected=this.otherCallRejected)}H.prototype.callFulfilled=function(Y){b.resolve(this.promise,Y)},H.prototype.otherCallFulfilled=function(Y){G(this.promise,this.onFulfilled,Y)},H.prototype.callRejected=function(Y){b.reject(this.promise,Y)},H.prototype.otherCallRejected=function(Y){G(this.promise,this.onRejected,Y)};function G(Y,ne,he){m(function(){var ke;try{ke=ne(he)}catch(He){return b.reject(Y,He)}ke===Y?b.reject(Y,new TypeError("Cannot resolve promise with itself")):b.resolve(Y,ke)})}b.resolve=function(Y,ne){var he=xe(se,ne);if(he.status==="error")return b.reject(Y,he.value);var ke=he.value;if(ke)K(Y,ke);else{Y.state=U,Y.outcome=ne;for(var He=-1,Ie=Y.queue.length;++He<Ie;)Y.queue[He].callFulfilled(ne)}return Y},b.reject=function(Y,ne){Y.state=L,Y.outcome=ne;for(var he=-1,ke=Y.queue.length;++he<ke;)Y.queue[he].callRejected(ne);return Y};function se(Y){var ne=Y&&Y.then;if(Y&&(typeof Y=="object"||typeof Y=="function")&&typeof ne=="function")return function(){ne.apply(Y,arguments)}}function K(Y,ne){var he=!1;function ke(Xe){he||(he=!0,b.reject(Y,Xe))}function He(Xe){he||(he=!0,b.resolve(Y,Xe))}function Ie(){ne(He,ke)}var tt=xe(Ie);tt.status==="error"&&ke(tt.value)}function xe(Y,ne){var he={};try{he.value=Y(ne),he.status="success"}catch(ke){he.status="error",he.value=ke}return he}W.resolve=Ee;function Ee(Y){return Y instanceof this?Y:b.resolve(new this(w),Y)}W.reject=be;function be(Y){var ne=new this(w);return b.reject(ne,Y)}W.all=Ae;function Ae(Y){var ne=this;if(Object.prototype.toString.call(Y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var he=Y.length,ke=!1;if(!he)return this.resolve([]);for(var He=new Array(he),Ie=0,tt=-1,Xe=new this(w);++tt<he;)pt(Y[tt],tt);return Xe;function pt(rr,wr){ne.resolve(rr).then(Mr,function(zt){ke||(ke=!0,b.reject(Xe,zt))});function Mr(zt){He[wr]=zt,++Ie===he&&!ke&&(ke=!0,b.resolve(Xe,He))}}}W.race=o;function o(Y){var ne=this;if(Object.prototype.toString.call(Y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var he=Y.length,ke=!1;if(!he)return this.resolve([]);for(var He=-1,Ie=new this(w);++He<he;)tt(Y[He]);return Ie;function tt(Xe){ne.resolve(Xe).then(function(pt){ke||(ke=!0,b.resolve(Ie,pt))},function(pt){ke||(ke=!0,b.reject(Ie,pt))})}}},{"1":1}],3:[function(a,u,d){(function(m){"use strict";typeof m.Promise!="function"&&(m.Promise=a(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(a,u,d){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};function w(p,S){if(!(p instanceof S))throw new TypeError("Cannot call a class as a function")}function b(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(p){return}}var L=b();function U(){try{if(!L||!L.open)return!1;var p=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),S=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!p||S)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(v){return!1}}function de(p,S){p=p||[],S=S||{};try{return new Blob(p,S)}catch(T){if(T.name!=="TypeError")throw T;for(var v=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,_=new v,P=0;P<p.length;P+=1)_.append(p[P]);return _.getBlob(S.type)}}typeof Promise=="undefined"&&a(3);var W=Promise;function H(p,S){S&&p.then(function(v){S(null,v)},function(v){S(v)})}function G(p,S,v){typeof S=="function"&&p.then(S),typeof v=="function"&&p.catch(v)}function se(p){return typeof p!="string"&&(console.warn(p+" used as a key, but it is not a string."),p=String(p)),p}function K(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var xe="local-forage-detect-blob-support",Ee=void 0,be={},Ae=Object.prototype.toString,o="readonly",Y="readwrite";function ne(p){for(var S=p.length,v=new ArrayBuffer(S),_=new Uint8Array(v),P=0;P<S;P++)_[P]=p.charCodeAt(P);return v}function he(p){return new W(function(S){var v=p.transaction(xe,Y),_=de([""]);v.objectStore(xe).put(_,"key"),v.onabort=function(P){P.preventDefault(),P.stopPropagation(),S(!1)},v.oncomplete=function(){var P=navigator.userAgent.match(/Chrome\/(\d+)/),T=navigator.userAgent.match(/Edge\//);S(T||!P||parseInt(P[1],10)>=43)}}).catch(function(){return!1})}function ke(p){return typeof Ee=="boolean"?W.resolve(Ee):he(p).then(function(S){return Ee=S,Ee})}function He(p){var S=be[p.name],v={};v.promise=new W(function(_,P){v.resolve=_,v.reject=P}),S.deferredOperations.push(v),S.dbReady?S.dbReady=S.dbReady.then(function(){return v.promise}):S.dbReady=v.promise}function Ie(p){var S=be[p.name],v=S.deferredOperations.pop();if(v)return v.resolve(),v.promise}function tt(p,S){var v=be[p.name],_=v.deferredOperations.pop();if(_)return _.reject(S),_.promise}function Xe(p,S){return new W(function(v,_){if(be[p.name]=be[p.name]||ir(),p.db)if(S)He(p),p.db.close();else return v(p.db);var P=[p.name];S&&P.push(p.version);var T=L.open.apply(L,P);S&&(T.onupgradeneeded=function(N){var z=T.result;try{z.createObjectStore(p.storeName),N.oldVersion<=1&&z.createObjectStore(xe)}catch(q){if(q.name==="ConstraintError")console.warn('The database "'+p.name+'" has been upgraded from version '+N.oldVersion+" to version "+N.newVersion+', but the storage "'+p.storeName+'" already exists.');else throw q}}),T.onerror=function(N){N.preventDefault(),_(T.error)},T.onsuccess=function(){var N=T.result;N.onversionchange=function(z){z.target.close()},v(N),Ie(p)}})}function pt(p){return Xe(p,!1)}function rr(p){return Xe(p,!0)}function wr(p,S){if(!p.db)return!0;var v=!p.db.objectStoreNames.contains(p.storeName),_=p.version<p.db.version,P=p.version>p.db.version;if(_&&(p.version!==S&&console.warn('The database "'+p.name+`" can't be downgraded from version `+p.db.version+" to version "+p.version+"."),p.version=p.db.version),P||v){if(v){var T=p.db.version+1;T>p.version&&(p.version=T)}return!0}return!1}function Mr(p){return new W(function(S,v){var _=new FileReader;_.onerror=v,_.onloadend=function(P){var T=btoa(P.target.result||"");S({__local_forage_encoded_blob:!0,data:T,type:p.type})},_.readAsBinaryString(p)})}function zt(p){var S=ne(atob(p.data));return de([S],{type:p.type})}function Nr(p){return p&&p.__local_forage_encoded_blob}function gt(p){var S=this,v=S._initReady().then(function(){var _=be[S._dbInfo.name];if(_&&_.dbReady)return _.dbReady});return G(v,p,p),v}function yn(p){He(p);for(var S=be[p.name],v=S.forages,_=0;_<v.length;_++){var P=v[_];P._dbInfo.db&&(P._dbInfo.db.close(),P._dbInfo.db=null)}return p.db=null,pt(p).then(function(T){return p.db=T,wr(p)?rr(p):T}).then(function(T){p.db=S.db=T;for(var N=0;N<v.length;N++)v[N]._dbInfo.db=T}).catch(function(T){throw tt(p,T),T})}function Qe(p,S,v,_){_===void 0&&(_=1);try{var P=p.db.transaction(p.storeName,S);v(null,P)}catch(T){if(_>0&&(!p.db||T.name==="InvalidStateError"||T.name==="NotFoundError"))return W.resolve().then(function(){if(!p.db||T.name==="NotFoundError"&&!p.db.objectStoreNames.contains(p.storeName)&&p.version<=p.db.version)return p.db&&(p.version=p.db.version+1),rr(p)}).then(function(){return yn(p).then(function(){Qe(p,S,v,_-1)})}).catch(v);v(T)}}function ir(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ei(p){var S=this,v={db:null};if(p)for(var _ in p)v[_]=p[_];var P=be[v.name];P||(P=ir(),be[v.name]=P),P.forages.push(S),S._initReady||(S._initReady=S.ready,S.ready=gt);var T=[];function N(){return W.resolve()}for(var z=0;z<P.forages.length;z++){var q=P.forages[z];q!==S&&T.push(q._initReady().catch(N))}var V=P.forages.slice(0);return W.all(T).then(function(){return v.db=P.db,pt(v)}).then(function(X){return v.db=X,wr(v,S._defaultConfig.version)?rr(v):X}).then(function(X){v.db=P.db=X,S._dbInfo=v;for(var ee=0;ee<V.length;ee++){var ye=V[ee];ye!==S&&(ye._dbInfo.db=v.db,ye._dbInfo.version=v.version)}})}function xn(p,S){var v=this;p=se(p);var _=new W(function(P,T){v.ready().then(function(){Qe(v._dbInfo,o,function(N,z){if(N)return T(N);try{var q=z.objectStore(v._dbInfo.storeName),V=q.get(p);V.onsuccess=function(){var X=V.result;X===void 0&&(X=null),Nr(X)&&(X=zt(X)),P(X)},V.onerror=function(){T(V.error)}}catch(X){T(X)}})}).catch(T)});return H(_,S),_}function Or(p,S){var v=this,_=new W(function(P,T){v.ready().then(function(){Qe(v._dbInfo,o,function(N,z){if(N)return T(N);try{var q=z.objectStore(v._dbInfo.storeName),V=q.openCursor(),X=1;V.onsuccess=function(){var ee=V.result;if(ee){var ye=ee.value;Nr(ye)&&(ye=zt(ye));var _e=p(ye,ee.key,X++);_e!==void 0?P(_e):ee.continue()}else P()},V.onerror=function(){T(V.error)}}catch(ee){T(ee)}})}).catch(T)});return H(_,S),_}function Er(p,S,v){var _=this;p=se(p);var P=new W(function(T,N){var z;_.ready().then(function(){return z=_._dbInfo,Ae.call(S)==="[object Blob]"?ke(z.db).then(function(q){return q?S:Mr(S)}):S}).then(function(q){Qe(_._dbInfo,Y,function(V,X){if(V)return N(V);try{var ee=X.objectStore(_._dbInfo.storeName);q===null&&(q=void 0);var ye=ee.put(q,p);X.oncomplete=function(){q===void 0&&(q=null),T(q)},X.onabort=X.onerror=function(){var _e=ye.error?ye.error:ye.transaction.error;N(_e)}}catch(_e){N(_e)}})}).catch(N)});return H(P,v),P}function St(p,S){var v=this;p=se(p);var _=new W(function(P,T){v.ready().then(function(){Qe(v._dbInfo,Y,function(N,z){if(N)return T(N);try{var q=z.objectStore(v._dbInfo.storeName),V=q.delete(p);z.oncomplete=function(){P()},z.onerror=function(){T(V.error)},z.onabort=function(){var X=V.error?V.error:V.transaction.error;T(X)}}catch(X){T(X)}})}).catch(T)});return H(_,S),_}function wn(p){var S=this,v=new W(function(_,P){S.ready().then(function(){Qe(S._dbInfo,Y,function(T,N){if(T)return P(T);try{var z=N.objectStore(S._dbInfo.storeName),q=z.clear();N.oncomplete=function(){_()},N.onabort=N.onerror=function(){var V=q.error?q.error:q.transaction.error;P(V)}}catch(V){P(V)}})}).catch(P)});return H(v,p),v}function En(p){var S=this,v=new W(function(_,P){S.ready().then(function(){Qe(S._dbInfo,o,function(T,N){if(T)return P(T);try{var z=N.objectStore(S._dbInfo.storeName),q=z.count();q.onsuccess=function(){_(q.result)},q.onerror=function(){P(q.error)}}catch(V){P(V)}})}).catch(P)});return H(v,p),v}function Sn(p,S){var v=this,_=new W(function(P,T){if(p<0){P(null);return}v.ready().then(function(){Qe(v._dbInfo,o,function(N,z){if(N)return T(N);try{var q=z.objectStore(v._dbInfo.storeName),V=!1,X=q.openKeyCursor();X.onsuccess=function(){var ee=X.result;if(!ee){P(null);return}p===0||V?P(ee.key):(V=!0,ee.advance(p))},X.onerror=function(){T(X.error)}}catch(ee){T(ee)}})}).catch(T)});return H(_,S),_}function mt(p){var S=this,v=new W(function(_,P){S.ready().then(function(){Qe(S._dbInfo,o,function(T,N){if(T)return P(T);try{var z=N.objectStore(S._dbInfo.storeName),q=z.openKeyCursor(),V=[];q.onsuccess=function(){var X=q.result;if(!X){_(V);return}V.push(X.key),X.continue()},q.onerror=function(){P(q.error)}}catch(X){P(X)}})}).catch(P)});return H(v,p),v}function nr(p,S){S=K.apply(this,arguments);var v=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||v.name,p.storeName=p.storeName||v.storeName);var _=this,P;if(!p.name)P=W.reject("Invalid arguments");else{var T=p.name===v.name&&_._dbInfo.db,N=T?W.resolve(_._dbInfo.db):pt(p).then(function(z){var q=be[p.name],V=q.forages;q.db=z;for(var X=0;X<V.length;X++)V[X]._dbInfo.db=z;return z});p.storeName?P=N.then(function(z){if(!!z.objectStoreNames.contains(p.storeName)){var q=z.version+1;He(p);var V=be[p.name],X=V.forages;z.close();for(var ee=0;ee<X.length;ee++){var ye=X[ee];ye._dbInfo.db=null,ye._dbInfo.version=q}var _e=new W(function(Se,We){var Me=L.open(p.name,q);Me.onerror=function(at){var Xt=Me.result;Xt.close(),We(at)},Me.onupgradeneeded=function(){var at=Me.result;at.deleteObjectStore(p.storeName)},Me.onsuccess=function(){var at=Me.result;at.close(),Se(at)}});return _e.then(function(Se){V.db=Se;for(var We=0;We<X.length;We++){var Me=X[We];Me._dbInfo.db=Se,Ie(Me._dbInfo)}}).catch(function(Se){throw(tt(p,Se)||W.resolve()).catch(function(){}),Se})}}):P=N.then(function(z){He(p);var q=be[p.name],V=q.forages;z.close();for(var X=0;X<V.length;X++){var ee=V[X];ee._dbInfo.db=null}var ye=new W(function(_e,Se){var We=L.deleteDatabase(p.name);We.onerror=function(){var Me=We.result;Me&&Me.close(),Se(We.error)},We.onblocked=function(){console.warn('dropInstance blocked for database "'+p.name+'" until all open connections are closed')},We.onsuccess=function(){var Me=We.result;Me&&Me.close(),_e(Me)}});return ye.then(function(_e){q.db=_e;for(var Se=0;Se<V.length;Se++){var We=V[Se];Ie(We._dbInfo)}}).catch(function(_e){throw(tt(p,_e)||W.resolve()).catch(function(){}),_e})})}return H(P,S),P}var ar={_driver:"asyncStorage",_initStorage:Ei,_support:U(),iterate:Or,getItem:xn,setItem:Er,removeItem:St,clear:wn,length:En,key:Sn,keys:mt,dropInstance:nr};function oe(){return typeof openDatabase=="function"}var $e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_n="~~local_forage_type~",Si=/^~~local_forage_type~([^~]+)~/,Sr="__lfsc__:",_r=Sr.length,Tr="arbf",Lt="blob",vt="si08",Pt="ui08",Rt="uic8",_i="si16",sr="si32",$r="ur16",Wr="ui32",Ti="fl32",It="fl64",qt=_r+Tr.length,jr=Object.prototype.toString;function Br(p){var S=p.length*.75,v=p.length,_,P=0,T,N,z,q;p[p.length-1]==="="&&(S--,p[p.length-2]==="="&&S--);var V=new ArrayBuffer(S),X=new Uint8Array(V);for(_=0;_<v;_+=4)T=$e.indexOf(p[_]),N=$e.indexOf(p[_+1]),z=$e.indexOf(p[_+2]),q=$e.indexOf(p[_+3]),X[P++]=T<<2|N>>4,X[P++]=(N&15)<<4|z>>2,X[P++]=(z&3)<<6|q&63;return V}function Je(p){var S=new Uint8Array(p),v="",_;for(_=0;_<S.length;_+=3)v+=$e[S[_]>>2],v+=$e[(S[_]&3)<<4|S[_+1]>>4],v+=$e[(S[_+1]&15)<<2|S[_+2]>>6],v+=$e[S[_+2]&63];return S.length%3==2?v=v.substring(0,v.length-1)+"=":S.length%3==1&&(v=v.substring(0,v.length-2)+"=="),v}function Ke(p,S){var v="";if(p&&(v=jr.call(p)),p&&(v==="[object ArrayBuffer]"||p.buffer&&jr.call(p.buffer)==="[object ArrayBuffer]")){var _,P=Sr;p instanceof ArrayBuffer?(_=p,P+=Tr):(_=p.buffer,v==="[object Int8Array]"?P+=vt:v==="[object Uint8Array]"?P+=Pt:v==="[object Uint8ClampedArray]"?P+=Rt:v==="[object Int16Array]"?P+=_i:v==="[object Uint16Array]"?P+=$r:v==="[object Int32Array]"?P+=sr:v==="[object Uint32Array]"?P+=Wr:v==="[object Float32Array]"?P+=Ti:v==="[object Float64Array]"?P+=It:S(new Error("Failed to get type for BinaryArray"))),S(P+Je(_))}else if(v==="[object Blob]"){var T=new FileReader;T.onload=function(){var N=_n+p.type+"~"+Je(this.result);S(Sr+Lt+N)},T.readAsArrayBuffer(p)}else try{S(JSON.stringify(p))}catch(N){console.error("Couldn't convert value into a JSON string: ",p),S(null,N)}}function Hr(p){if(p.substring(0,_r)!==Sr)return JSON.parse(p);var S=p.substring(qt),v=p.substring(_r,qt),_;if(v===Lt&&Si.test(S)){var P=S.match(Si);_=P[1],S=S.substring(P[0].length)}var T=Br(S);switch(v){case Tr:return T;case Lt:return de([T],{type:_});case vt:return new Int8Array(T);case Pt:return new Uint8Array(T);case Rt:return new Uint8ClampedArray(T);case _i:return new Int16Array(T);case $r:return new Uint16Array(T);case sr:return new Int32Array(T);case Wr:return new Uint32Array(T);case Ti:return new Float32Array(T);case It:return new Float64Array(T);default:throw new Error("Unkown type: "+v)}}var Ur={serialize:Ke,deserialize:Hr,stringToBuffer:Br,bufferToString:Je};function zr(p,S,v,_){p.executeSql("CREATE TABLE IF NOT EXISTS "+S.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],v,_)}function Ci(p){var S=this,v={db:null};if(p)for(var _ in p)v[_]=typeof p[_]!="string"?p[_].toString():p[_];var P=new W(function(T,N){try{v.db=openDatabase(v.name,String(v.version),v.description,v.size)}catch(z){return N(z)}v.db.transaction(function(z){zr(z,v,function(){S._dbInfo=v,T()},function(q,V){N(V)})},N)});return v.serializer=Ur,P}function rt(p,S,v,_,P,T){p.executeSql(v,_,P,function(N,z){z.code===z.SYNTAX_ERR?N.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[S.storeName],function(q,V){V.rows.length?T(q,z):zr(q,S,function(){q.executeSql(v,_,P,T)},T)},T):T(N,z)},T)}function Vt(p,S){var v=this;p=se(p);var _=new W(function(P,T){v.ready().then(function(){var N=v._dbInfo;N.db.transaction(function(z){rt(z,N,"SELECT * FROM "+N.storeName+" WHERE key = ? LIMIT 1",[p],function(q,V){var X=V.rows.length?V.rows.item(0).value:null;X&&(X=N.serializer.deserialize(X)),P(X)},function(q,V){T(V)})})}).catch(T)});return H(_,S),_}function Tn(p,S){var v=this,_=new W(function(P,T){v.ready().then(function(){var N=v._dbInfo;N.db.transaction(function(z){rt(z,N,"SELECT * FROM "+N.storeName,[],function(q,V){for(var X=V.rows,ee=X.length,ye=0;ye<ee;ye++){var _e=X.item(ye),Se=_e.value;if(Se&&(Se=N.serializer.deserialize(Se)),Se=p(Se,_e.key,ye+1),Se!==void 0){P(Se);return}}P()},function(q,V){T(V)})})}).catch(T)});return H(_,S),_}function ki(p,S,v,_){var P=this;p=se(p);var T=new W(function(N,z){P.ready().then(function(){S===void 0&&(S=null);var q=S,V=P._dbInfo;V.serializer.serialize(S,function(X,ee){ee?z(ee):V.db.transaction(function(ye){rt(ye,V,"INSERT OR REPLACE INTO "+V.storeName+" (key, value) VALUES (?, ?)",[p,X],function(){N(q)},function(_e,Se){z(Se)})},function(ye){if(ye.code===ye.QUOTA_ERR){if(_>0){N(ki.apply(P,[p,q,v,_-1]));return}z(ye)}})})}).catch(z)});return H(T,v),T}function qr(p,S,v){return ki.apply(this,[p,S,v,1])}function Cr(p,S){var v=this;p=se(p);var _=new W(function(P,T){v.ready().then(function(){var N=v._dbInfo;N.db.transaction(function(z){rt(z,N,"DELETE FROM "+N.storeName+" WHERE key = ?",[p],function(){P()},function(q,V){T(V)})})}).catch(T)});return H(_,S),_}function Cn(p){var S=this,v=new W(function(_,P){S.ready().then(function(){var T=S._dbInfo;T.db.transaction(function(N){rt(N,T,"DELETE FROM "+T.storeName,[],function(){_()},function(z,q){P(q)})})}).catch(P)});return H(v,p),v}function kn(p){var S=this,v=new W(function(_,P){S.ready().then(function(){var T=S._dbInfo;T.db.transaction(function(N){rt(N,T,"SELECT COUNT(key) as c FROM "+T.storeName,[],function(z,q){var V=q.rows.item(0).c;_(V)},function(z,q){P(q)})})}).catch(P)});return H(v,p),v}function Pn(p,S){var v=this,_=new W(function(P,T){v.ready().then(function(){var N=v._dbInfo;N.db.transaction(function(z){rt(z,N,"SELECT key FROM "+N.storeName+" WHERE id = ? LIMIT 1",[p+1],function(q,V){var X=V.rows.length?V.rows.item(0).key:null;P(X)},function(q,V){T(V)})})}).catch(T)});return H(_,S),_}function Pi(p){var S=this,v=new W(function(_,P){S.ready().then(function(){var T=S._dbInfo;T.db.transaction(function(N){rt(N,T,"SELECT key FROM "+T.storeName,[],function(z,q){for(var V=[],X=0;X<q.rows.length;X++)V.push(q.rows.item(X).key);_(V)},function(z,q){P(q)})})}).catch(P)});return H(v,p),v}function An(p){return new W(function(S,v){p.transaction(function(_){_.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(P,T){for(var N=[],z=0;z<T.rows.length;z++)N.push(T.rows.item(z).name);S({db:p,storeNames:N})},function(P,T){v(T)})},function(_){v(_)})})}function Fn(p,S){S=K.apply(this,arguments);var v=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||v.name,p.storeName=p.storeName||v.storeName);var _=this,P;return p.name?P=new W(function(T){var N;p.name===v.name?N=_._dbInfo.db:N=openDatabase(p.name,"","",0),p.storeName?T({db:N,storeNames:[p.storeName]}):T(An(N))}).then(function(T){return new W(function(N,z){T.db.transaction(function(q){function V(_e){return new W(function(Se,We){q.executeSql("DROP TABLE IF EXISTS "+_e,[],function(){Se()},function(Me,at){We(at)})})}for(var X=[],ee=0,ye=T.storeNames.length;ee<ye;ee++)X.push(V(T.storeNames[ee]));W.all(X).then(function(){N()}).catch(function(_e){z(_e)})},function(q){z(q)})})}):P=W.reject("Invalid arguments"),H(P,S),P}var Ai={_driver:"webSQLStorage",_initStorage:Ci,_support:oe(),iterate:Tn,getItem:Vt,setItem:qr,removeItem:Cr,clear:Cn,length:kn,key:Pn,keys:Pi,dropInstance:Fn};function Dn(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(p){return!1}}function Mt(p,S){var v=p.name+"/";return p.storeName!==S.storeName&&(v+=p.storeName+"/"),v}function Fi(){var p="_localforage_support_test";try{return localStorage.setItem(p,!0),localStorage.removeItem(p),!1}catch(S){return!0}}function Vr(){return!Fi()||localStorage.length>0}function kr(p){var S=this,v={};if(p)for(var _ in p)v[_]=p[_];return v.keyPrefix=Mt(p,S._defaultConfig),Vr()?(S._dbInfo=v,v.serializer=Ur,W.resolve()):W.reject()}function Di(p){var S=this,v=S.ready().then(function(){for(var _=S._dbInfo.keyPrefix,P=localStorage.length-1;P>=0;P--){var T=localStorage.key(P);T.indexOf(_)===0&&localStorage.removeItem(T)}});return H(v,p),v}function Ln(p,S){var v=this;p=se(p);var _=v.ready().then(function(){var P=v._dbInfo,T=localStorage.getItem(P.keyPrefix+p);return T&&(T=P.serializer.deserialize(T)),T});return H(_,S),_}function or(p,S){var v=this,_=v.ready().then(function(){for(var P=v._dbInfo,T=P.keyPrefix,N=T.length,z=localStorage.length,q=1,V=0;V<z;V++){var X=localStorage.key(V);if(X.indexOf(T)===0){var ee=localStorage.getItem(X);if(ee&&(ee=P.serializer.deserialize(ee)),ee=p(ee,X.substring(N),q++),ee!==void 0)return ee}}});return H(_,S),_}function Li(p,S){var v=this,_=v.ready().then(function(){var P=v._dbInfo,T;try{T=localStorage.key(p)}catch(N){T=null}return T&&(T=T.substring(P.keyPrefix.length)),T});return H(_,S),_}function Ri(p){var S=this,v=S.ready().then(function(){for(var _=S._dbInfo,P=localStorage.length,T=[],N=0;N<P;N++){var z=localStorage.key(N);z.indexOf(_.keyPrefix)===0&&T.push(z.substring(_.keyPrefix.length))}return T});return H(v,p),v}function Ii(p){var S=this,v=S.keys().then(function(_){return _.length});return H(v,p),v}function Mi(p,S){var v=this;p=se(p);var _=v.ready().then(function(){var P=v._dbInfo;localStorage.removeItem(P.keyPrefix+p)});return H(_,S),_}function Rn(p,S,v){var _=this;p=se(p);var P=_.ready().then(function(){S===void 0&&(S=null);var T=S;return new W(function(N,z){var q=_._dbInfo;q.serializer.serialize(S,function(V,X){if(X)z(X);else try{localStorage.setItem(q.keyPrefix+p,V),N(T)}catch(ee){(ee.name==="QuotaExceededError"||ee.name==="NS_ERROR_DOM_QUOTA_REACHED")&&z(ee),z(ee)}})})});return H(P,v),P}function Gr(p,S){if(S=K.apply(this,arguments),p=typeof p!="function"&&p||{},!p.name){var v=this.config();p.name=p.name||v.name,p.storeName=p.storeName||v.storeName}var _=this,P;return p.name?P=new W(function(T){p.storeName?T(Mt(p,_._defaultConfig)):T(p.name+"/")}).then(function(T){for(var N=localStorage.length-1;N>=0;N--){var z=localStorage.key(N);z.indexOf(T)===0&&localStorage.removeItem(z)}}):P=W.reject("Invalid arguments"),H(P,S),P}var In={_driver:"localStorageWrapper",_initStorage:kr,_support:Dn(),iterate:or,getItem:Ln,setItem:Rn,removeItem:Mi,clear:Di,length:Ii,key:Li,keys:Ri,dropInstance:Gr},Ni=function(S,v){return S===v||typeof S=="number"&&typeof v=="number"&&isNaN(S)&&isNaN(v)},Mn=function(S,v){for(var _=S.length,P=0;P<_;){if(Ni(S[P],v))return!0;P++}return!1},Yr=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"},Gt={},Pr={},Nt={INDEXEDDB:ar,WEBSQL:Ai,LOCALSTORAGE:In},Ze=[Nt.INDEXEDDB._driver,Nt.WEBSQL._driver,Nt.LOCALSTORAGE._driver],_t=["dropInstance"],Yt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(_t),Nn={description:"",driver:Ze.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function On(p,S){p[S]=function(){var v=arguments;return p.ready().then(function(){return p[S].apply(p,v)})}}function lr(){for(var p=1;p<arguments.length;p++){var S=arguments[p];if(S)for(var v in S)S.hasOwnProperty(v)&&(Yr(S[v])?arguments[0][v]=S[v].slice():arguments[0][v]=S[v])}return arguments[0]}var Oi=function(){function p(S){w(this,p);for(var v in Nt)if(Nt.hasOwnProperty(v)){var _=Nt[v],P=_._driver;this[v]=P,Gt[P]||this.defineDriver(_)}this._defaultConfig=lr({},Nn),this._config=lr({},this._defaultConfig,S),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return p.prototype.config=function(v){if((typeof v=="undefined"?"undefined":m(v))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var _ in v){if(_==="storeName"&&(v[_]=v[_].replace(/\W/g,"_")),_==="version"&&typeof v[_]!="number")return new Error("Database version must be a number.");this._config[_]=v[_]}return"driver"in v&&v.driver?this.setDriver(this._config.driver):!0}else return typeof v=="string"?this._config[v]:this._config},p.prototype.defineDriver=function(v,_,P){var T=new W(function(N,z){try{var q=v._driver,V=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!v._driver){z(V);return}for(var X=Yt.concat("_initStorage"),ee=0,ye=X.length;ee<ye;ee++){var _e=X[ee],Se=!Mn(_t,_e);if((Se||v[_e])&&typeof v[_e]!="function"){z(V);return}}var We=function(){for(var Xt=function(Wn){return function(){var jn=new Error("Method "+Wn+" is not implemented by the current driver"),$i=W.reject(jn);return H($i,arguments[arguments.length-1]),$i}},Xr=0,$n=_t.length;Xr<$n;Xr++){var ur=_t[Xr];v[ur]||(v[ur]=Xt(ur))}};We();var Me=function(Xt){Gt[q]&&console.info("Redefining LocalForage driver: "+q),Gt[q]=v,Pr[q]=Xt,N()};"_support"in v?v._support&&typeof v._support=="function"?v._support().then(Me,z):Me(!!v._support):Me(!0)}catch(at){z(at)}});return G(T,_,P),T},p.prototype.driver=function(){return this._driver||null},p.prototype.getDriver=function(v,_,P){var T=Gt[v]?W.resolve(Gt[v]):W.reject(new Error("Driver not found."));return G(T,_,P),T},p.prototype.getSerializer=function(v){var _=W.resolve(Ur);return G(_,v),_},p.prototype.ready=function(v){var _=this,P=_._driverSet.then(function(){return _._ready===null&&(_._ready=_._initDriver()),_._ready});return G(P,v,v),P},p.prototype.setDriver=function(v,_,P){var T=this;Yr(v)||(v=[v]);var N=this._getSupportedDrivers(v);function z(){T._config.driver=T.driver()}function q(ee){return T._extend(ee),z(),T._ready=T._initStorage(T._config),T._ready}function V(ee){return function(){var ye=0;function _e(){for(;ye<ee.length;){var Se=ee[ye];return ye++,T._dbInfo=null,T._ready=null,T.getDriver(Se).then(q).catch(_e)}z();var We=new Error("No available storage method found.");return T._driverSet=W.reject(We),T._driverSet}return _e()}}var X=this._driverSet!==null?this._driverSet.catch(function(){return W.resolve()}):W.resolve();return this._driverSet=X.then(function(){var ee=N[0];return T._dbInfo=null,T._ready=null,T.getDriver(ee).then(function(ye){T._driver=ye._driver,z(),T._wrapLibraryMethodsWithReady(),T._initDriver=V(N)})}).catch(function(){z();var ee=new Error("No available storage method found.");return T._driverSet=W.reject(ee),T._driverSet}),G(this._driverSet,_,P),this._driverSet},p.prototype.supports=function(v){return!!Pr[v]},p.prototype._extend=function(v){lr(this,v)},p.prototype._getSupportedDrivers=function(v){for(var _=[],P=0,T=v.length;P<T;P++){var N=v[P];this.supports(N)&&_.push(N)}return _},p.prototype._wrapLibraryMethodsWithReady=function(){for(var v=0,_=Yt.length;v<_;v++)On(this,Yt[v])},p.prototype.createInstance=function(v){return new p(v)},p}(),Ar=new Oi;u.exports=Ar},{"3":3}]},{},[4])(4)})});var Is=gs((Rs,Zi)=>{(function(l,t){"use strict";typeof Zi=="object"&&typeof Zi.exports=="object"?Zi.exports=l.document?t(l,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return t(i)}:t(l)})(typeof window!="undefined"?window:Rs,function(l,t){"use strict";var i=[],a=Object.getPrototypeOf,u=i.slice,d=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},m=i.push,w=i.indexOf,b={},L=b.toString,U=b.hasOwnProperty,de=U.toString,W=de.call(Object),H={},G=function(r){return typeof r=="function"&&typeof r.nodeType!="number"&&typeof r.item!="function"},se=function(r){return r!=null&&r===r.window},K=l.document,xe={type:!0,src:!0,nonce:!0,noModule:!0};function Ee(e,r,n){n=n||K;var s,c,f=n.createElement("script");if(f.text=e,r)for(s in xe)c=r[s]||r.getAttribute&&r.getAttribute(s),c&&f.setAttribute(s,c);n.head.appendChild(f).parentNode.removeChild(f)}function be(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?b[L.call(e)]||"object":typeof e}var Ae="3.6.0",o=function(e,r){return new o.fn.init(e,r)};o.fn=o.prototype={jquery:Ae,constructor:o,length:0,toArray:function(){return u.call(this)},get:function(e){return e==null?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var r=o.merge(this.constructor(),e);return r.prevObject=this,r},each:function(e){return o.each(this,e)},map:function(e){return this.pushStack(o.map(this,function(r,n){return e.call(r,n,r)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(o.grep(this,function(e,r){return(r+1)%2}))},odd:function(){return this.pushStack(o.grep(this,function(e,r){return r%2}))},eq:function(e){var r=this.length,n=+e+(e<0?r:0);return this.pushStack(n>=0&&n<r?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:m,sort:i.sort,splice:i.splice},o.extend=o.fn.extend=function(){var e,r,n,s,c,f,h=arguments[0]||{},x=1,E=arguments.length,k=!1;for(typeof h=="boolean"&&(k=h,h=arguments[x]||{},x++),typeof h!="object"&&!G(h)&&(h={}),x===E&&(h=this,x--);x<E;x++)if((e=arguments[x])!=null)for(r in e)s=e[r],!(r==="__proto__"||h===s)&&(k&&s&&(o.isPlainObject(s)||(c=Array.isArray(s)))?(n=h[r],c&&!Array.isArray(n)?f=[]:!c&&!o.isPlainObject(n)?f={}:f=n,c=!1,h[r]=o.extend(k,f,s)):s!==void 0&&(h[r]=s));return h},o.extend({expando:"jQuery"+(Ae+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var r,n;return!e||L.call(e)!=="[object Object]"?!1:(r=a(e),r?(n=U.call(r,"constructor")&&r.constructor,typeof n=="function"&&de.call(n)===W):!0)},isEmptyObject:function(e){var r;for(r in e)return!1;return!0},globalEval:function(e,r,n){Ee(e,{nonce:r&&r.nonce},n)},each:function(e,r){var n,s=0;if(Y(e))for(n=e.length;s<n&&r.call(e[s],s,e[s])!==!1;s++);else for(s in e)if(r.call(e[s],s,e[s])===!1)break;return e},makeArray:function(e,r){var n=r||[];return e!=null&&(Y(Object(e))?o.merge(n,typeof e=="string"?[e]:e):m.call(n,e)),n},inArray:function(e,r,n){return r==null?-1:w.call(r,e,n)},merge:function(e,r){for(var n=+r.length,s=0,c=e.length;s<n;s++)e[c++]=r[s];return e.length=c,e},grep:function(e,r,n){for(var s,c=[],f=0,h=e.length,x=!n;f<h;f++)s=!r(e[f],f),s!==x&&c.push(e[f]);return c},map:function(e,r,n){var s,c,f=0,h=[];if(Y(e))for(s=e.length;f<s;f++)c=r(e[f],f,n),c!=null&&h.push(c);else for(f in e)c=r(e[f],f,n),c!=null&&h.push(c);return d(h)},guid:1,support:H}),typeof Symbol=="function"&&(o.fn[Symbol.iterator]=i[Symbol.iterator]),o.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,r){b["[object "+r+"]"]=r.toLowerCase()});function Y(e){var r=!!e&&"length"in e&&e.length,n=be(e);return G(e)||se(e)?!1:n==="array"||r===0||typeof r=="number"&&r>0&&r-1 in e}var ne=function(e){var r,n,s,c,f,h,x,E,k,R,j,D,I,te,ve,re,qe,Ue,ut,Fe="sizzle"+1*new Date,me=e.document,st=0,Te=0,je=Hi(),Jr=Hi(),Wi=Hi(),ct=Hi(),cr=function(g,y){return g===y&&(j=!0),0},fr={}.hasOwnProperty,ot=[],Qt=ot.pop,bt=ot.push,Jt=ot.push,ss=ot.slice,dr=function(g,y){for(var C=0,M=g.length;C<M;C++)if(g[C]===y)return C;return-1},qn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Pe="[\\x20\\t\\r\\n\\f]",hr="(?:\\\\[\\da-fA-F]{1,6}"+Pe+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",os="\\["+Pe+"*("+hr+")(?:"+Pe+"*([*^$|!~]?=)"+Pe+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+hr+"))|)"+Pe+"*\\]",Vn=":("+hr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+os+")*)|.*)\\)|)",Do=new RegExp(Pe+"+","g"),ji=new RegExp("^"+Pe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Pe+"+$","g"),Lo=new RegExp("^"+Pe+"*,"+Pe+"*"),ls=new RegExp("^"+Pe+"*([>+~]|"+Pe+")"+Pe+"*"),Ro=new RegExp(Pe+"|>"),Io=new RegExp(Vn),Mo=new RegExp("^"+hr+"$"),Bi={ID:new RegExp("^#("+hr+")"),CLASS:new RegExp("^\\.("+hr+")"),TAG:new RegExp("^("+hr+"|[*])"),ATTR:new RegExp("^"+os),PSEUDO:new RegExp("^"+Vn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Pe+"*(even|odd|(([+-]|)(\\d*)n|)"+Pe+"*(?:([+-]|)"+Pe+"*(\\d+)|))"+Pe+"*\\)|)","i"),bool:new RegExp("^(?:"+qn+")$","i"),needsContext:new RegExp("^"+Pe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Pe+"*((?:-\\d)?\\d*)"+Pe+"*\\)|)(?=[^-]|$)","i")},No=/HTML$/i,Oo=/^(?:input|select|textarea|button)$/i,$o=/^h\d$/i,Kr=/^[^{]+\{\s*\[native \w/,Wo=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Gn=/[+~]/,Ot=new RegExp("\\\\[\\da-fA-F]{1,6}"+Pe+"?|\\\\([^\\r\\n\\f])","g"),$t=function(g,y){var C="0x"+g.slice(1)-65536;return y||(C<0?String.fromCharCode(C+65536):String.fromCharCode(C>>10|55296,C&1023|56320))},us=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,cs=function(g,y){return y?g==="\0"?"\uFFFD":g.slice(0,-1)+"\\"+g.charCodeAt(g.length-1).toString(16)+" ":"\\"+g},fs=function(){D()},jo=zi(function(g){return g.disabled===!0&&g.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Jt.apply(ot=ss.call(me.childNodes),me.childNodes),ot[me.childNodes.length].nodeType}catch(g){Jt={apply:ot.length?function(y,C){bt.apply(y,ss.call(C))}:function(y,C){for(var M=y.length,A=0;y[M++]=C[A++];);y.length=M-1}}}function Le(g,y,C,M){var A,O,B,Q,J,le,ae,ce=y&&y.ownerDocument,we=y?y.nodeType:9;if(C=C||[],typeof g!="string"||!g||we!==1&&we!==9&&we!==11)return C;if(!M&&(D(y),y=y||I,ve)){if(we!==11&&(J=Wo.exec(g)))if(A=J[1]){if(we===9)if(B=y.getElementById(A)){if(B.id===A)return C.push(B),C}else return C;else if(ce&&(B=ce.getElementById(A))&&ut(y,B)&&B.id===A)return C.push(B),C}else{if(J[2])return Jt.apply(C,y.getElementsByTagName(g)),C;if((A=J[3])&&n.getElementsByClassName&&y.getElementsByClassName)return Jt.apply(C,y.getElementsByClassName(A)),C}if(n.qsa&&!ct[g+" "]&&(!re||!re.test(g))&&(we!==1||y.nodeName.toLowerCase()!=="object")){if(ae=g,ce=y,we===1&&(Ro.test(g)||ls.test(g))){for(ce=Gn.test(g)&&Xn(y.parentNode)||y,(ce!==y||!n.scope)&&((Q=y.getAttribute("id"))?Q=Q.replace(us,cs):y.setAttribute("id",Q=Fe)),le=h(g),O=le.length;O--;)le[O]=(Q?"#"+Q:":scope")+" "+Ui(le[O]);ae=le.join(",")}try{return Jt.apply(C,ce.querySelectorAll(ae)),C}catch(Re){ct(g,!0)}finally{Q===Fe&&y.removeAttribute("id")}}}return E(g.replace(ji,"$1"),y,C,M)}function Hi(){var g=[];function y(C,M){return g.push(C+" ")>s.cacheLength&&delete y[g.shift()],y[C+" "]=M}return y}function Tt(g){return g[Fe]=!0,g}function Ct(g){var y=I.createElement("fieldset");try{return!!g(y)}catch(C){return!1}finally{y.parentNode&&y.parentNode.removeChild(y),y=null}}function Yn(g,y){for(var C=g.split("|"),M=C.length;M--;)s.attrHandle[C[M]]=y}function ds(g,y){var C=y&&g,M=C&&g.nodeType===1&&y.nodeType===1&&g.sourceIndex-y.sourceIndex;if(M)return M;if(C){for(;C=C.nextSibling;)if(C===y)return-1}return g?1:-1}function Bo(g){return function(y){var C=y.nodeName.toLowerCase();return C==="input"&&y.type===g}}function Ho(g){return function(y){var C=y.nodeName.toLowerCase();return(C==="input"||C==="button")&&y.type===g}}function hs(g){return function(y){return"form"in y?y.parentNode&&y.disabled===!1?"label"in y?"label"in y.parentNode?y.parentNode.disabled===g:y.disabled===g:y.isDisabled===g||y.isDisabled!==!g&&jo(y)===g:y.disabled===g:"label"in y?y.disabled===g:!1}}function pr(g){return Tt(function(y){return y=+y,Tt(function(C,M){for(var A,O=g([],C.length,y),B=O.length;B--;)C[A=O[B]]&&(C[A]=!(M[A]=C[A]))})})}function Xn(g){return g&&typeof g.getElementsByTagName!="undefined"&&g}n=Le.support={},f=Le.isXML=function(g){var y=g&&g.namespaceURI,C=g&&(g.ownerDocument||g).documentElement;return!No.test(y||C&&C.nodeName||"HTML")},D=Le.setDocument=function(g){var y,C,M=g?g.ownerDocument||g:me;return M==I||M.nodeType!==9||!M.documentElement||(I=M,te=I.documentElement,ve=!f(I),me!=I&&(C=I.defaultView)&&C.top!==C&&(C.addEventListener?C.addEventListener("unload",fs,!1):C.attachEvent&&C.attachEvent("onunload",fs)),n.scope=Ct(function(A){return te.appendChild(A).appendChild(I.createElement("div")),typeof A.querySelectorAll!="undefined"&&!A.querySelectorAll(":scope fieldset div").length}),n.attributes=Ct(function(A){return A.className="i",!A.getAttribute("className")}),n.getElementsByTagName=Ct(function(A){return A.appendChild(I.createComment("")),!A.getElementsByTagName("*").length}),n.getElementsByClassName=Kr.test(I.getElementsByClassName),n.getById=Ct(function(A){return te.appendChild(A).id=Fe,!I.getElementsByName||!I.getElementsByName(Fe).length}),n.getById?(s.filter.ID=function(A){var O=A.replace(Ot,$t);return function(B){return B.getAttribute("id")===O}},s.find.ID=function(A,O){if(typeof O.getElementById!="undefined"&&ve){var B=O.getElementById(A);return B?[B]:[]}}):(s.filter.ID=function(A){var O=A.replace(Ot,$t);return function(B){var Q=typeof B.getAttributeNode!="undefined"&&B.getAttributeNode("id");return Q&&Q.value===O}},s.find.ID=function(A,O){if(typeof O.getElementById!="undefined"&&ve){var B,Q,J,le=O.getElementById(A);if(le){if(B=le.getAttributeNode("id"),B&&B.value===A)return[le];for(J=O.getElementsByName(A),Q=0;le=J[Q++];)if(B=le.getAttributeNode("id"),B&&B.value===A)return[le]}return[]}}),s.find.TAG=n.getElementsByTagName?function(A,O){if(typeof O.getElementsByTagName!="undefined")return O.getElementsByTagName(A);if(n.qsa)return O.querySelectorAll(A)}:function(A,O){var B,Q=[],J=0,le=O.getElementsByTagName(A);if(A==="*"){for(;B=le[J++];)B.nodeType===1&&Q.push(B);return Q}return le},s.find.CLASS=n.getElementsByClassName&&function(A,O){if(typeof O.getElementsByClassName!="undefined"&&ve)return O.getElementsByClassName(A)},qe=[],re=[],(n.qsa=Kr.test(I.querySelectorAll))&&(Ct(function(A){var O;te.appendChild(A).innerHTML="<a id='"+Fe+"'></a><select id='"+Fe+"-\r\\' msallowcapture=''><option selected=''></option></select>",A.querySelectorAll("[msallowcapture^='']").length&&re.push("[*^$]="+Pe+`*(?:''|"")`),A.querySelectorAll("[selected]").length||re.push("\\["+Pe+"*(?:value|"+qn+")"),A.querySelectorAll("[id~="+Fe+"-]").length||re.push("~="),O=I.createElement("input"),O.setAttribute("name",""),A.appendChild(O),A.querySelectorAll("[name='']").length||re.push("\\["+Pe+"*name"+Pe+"*="+Pe+`*(?:''|"")`),A.querySelectorAll(":checked").length||re.push(":checked"),A.querySelectorAll("a#"+Fe+"+*").length||re.push(".#.+[+~]"),A.querySelectorAll("\\\f"),re.push("[\\r\\n\\f]")}),Ct(function(A){A.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var O=I.createElement("input");O.setAttribute("type","hidden"),A.appendChild(O).setAttribute("name","D"),A.querySelectorAll("[name=d]").length&&re.push("name"+Pe+"*[*^$|!~]?="),A.querySelectorAll(":enabled").length!==2&&re.push(":enabled",":disabled"),te.appendChild(A).disabled=!0,A.querySelectorAll(":disabled").length!==2&&re.push(":enabled",":disabled"),A.querySelectorAll("*,:x"),re.push(",.*:")})),(n.matchesSelector=Kr.test(Ue=te.matches||te.webkitMatchesSelector||te.mozMatchesSelector||te.oMatchesSelector||te.msMatchesSelector))&&Ct(function(A){n.disconnectedMatch=Ue.call(A,"*"),Ue.call(A,"[s!='']:x"),qe.push("!=",Vn)}),re=re.length&&new RegExp(re.join("|")),qe=qe.length&&new RegExp(qe.join("|")),y=Kr.test(te.compareDocumentPosition),ut=y||Kr.test(te.contains)?function(A,O){var B=A.nodeType===9?A.documentElement:A,Q=O&&O.parentNode;return A===Q||!!(Q&&Q.nodeType===1&&(B.contains?B.contains(Q):A.compareDocumentPosition&&A.compareDocumentPosition(Q)&16))}:function(A,O){if(O){for(;O=O.parentNode;)if(O===A)return!0}return!1},cr=y?function(A,O){if(A===O)return j=!0,0;var B=!A.compareDocumentPosition-!O.compareDocumentPosition;return B||(B=(A.ownerDocument||A)==(O.ownerDocument||O)?A.compareDocumentPosition(O):1,B&1||!n.sortDetached&&O.compareDocumentPosition(A)===B?A==I||A.ownerDocument==me&&ut(me,A)?-1:O==I||O.ownerDocument==me&&ut(me,O)?1:R?dr(R,A)-dr(R,O):0:B&4?-1:1)}:function(A,O){if(A===O)return j=!0,0;var B,Q=0,J=A.parentNode,le=O.parentNode,ae=[A],ce=[O];if(!J||!le)return A==I?-1:O==I?1:J?-1:le?1:R?dr(R,A)-dr(R,O):0;if(J===le)return ds(A,O);for(B=A;B=B.parentNode;)ae.unshift(B);for(B=O;B=B.parentNode;)ce.unshift(B);for(;ae[Q]===ce[Q];)Q++;return Q?ds(ae[Q],ce[Q]):ae[Q]==me?-1:ce[Q]==me?1:0}),I},Le.matches=function(g,y){return Le(g,null,null,y)},Le.matchesSelector=function(g,y){if(D(g),n.matchesSelector&&ve&&!ct[y+" "]&&(!qe||!qe.test(y))&&(!re||!re.test(y)))try{var C=Ue.call(g,y);if(C||n.disconnectedMatch||g.document&&g.document.nodeType!==11)return C}catch(M){ct(y,!0)}return Le(y,I,null,[g]).length>0},Le.contains=function(g,y){return(g.ownerDocument||g)!=I&&D(g),ut(g,y)},Le.attr=function(g,y){(g.ownerDocument||g)!=I&&D(g);var C=s.attrHandle[y.toLowerCase()],M=C&&fr.call(s.attrHandle,y.toLowerCase())?C(g,y,!ve):void 0;return M!==void 0?M:n.attributes||!ve?g.getAttribute(y):(M=g.getAttributeNode(y))&&M.specified?M.value:null},Le.escape=function(g){return(g+"").replace(us,cs)},Le.error=function(g){throw new Error("Syntax error, unrecognized expression: "+g)},Le.uniqueSort=function(g){var y,C=[],M=0,A=0;if(j=!n.detectDuplicates,R=!n.sortStable&&g.slice(0),g.sort(cr),j){for(;y=g[A++];)y===g[A]&&(M=C.push(A));for(;M--;)g.splice(C[M],1)}return R=null,g},c=Le.getText=function(g){var y,C="",M=0,A=g.nodeType;if(A){if(A===1||A===9||A===11){if(typeof g.textContent=="string")return g.textContent;for(g=g.firstChild;g;g=g.nextSibling)C+=c(g)}else if(A===3||A===4)return g.nodeValue}else for(;y=g[M++];)C+=c(y);return C},s=Le.selectors={cacheLength:50,createPseudo:Tt,match:Bi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(g){return g[1]=g[1].replace(Ot,$t),g[3]=(g[3]||g[4]||g[5]||"").replace(Ot,$t),g[2]==="~="&&(g[3]=" "+g[3]+" "),g.slice(0,4)},CHILD:function(g){return g[1]=g[1].toLowerCase(),g[1].slice(0,3)==="nth"?(g[3]||Le.error(g[0]),g[4]=+(g[4]?g[5]+(g[6]||1):2*(g[3]==="even"||g[3]==="odd")),g[5]=+(g[7]+g[8]||g[3]==="odd")):g[3]&&Le.error(g[0]),g},PSEUDO:function(g){var y,C=!g[6]&&g[2];return Bi.CHILD.test(g[0])?null:(g[3]?g[2]=g[4]||g[5]||"":C&&Io.test(C)&&(y=h(C,!0))&&(y=C.indexOf(")",C.length-y)-C.length)&&(g[0]=g[0].slice(0,y),g[2]=C.slice(0,y)),g.slice(0,3))}},filter:{TAG:function(g){var y=g.replace(Ot,$t).toLowerCase();return g==="*"?function(){return!0}:function(C){return C.nodeName&&C.nodeName.toLowerCase()===y}},CLASS:function(g){var y=je[g+" "];return y||(y=new RegExp("(^|"+Pe+")"+g+"("+Pe+"|$)"))&&je(g,function(C){return y.test(typeof C.className=="string"&&C.className||typeof C.getAttribute!="undefined"&&C.getAttribute("class")||"")})},ATTR:function(g,y,C){return function(M){var A=Le.attr(M,g);return A==null?y==="!=":y?(A+="",y==="="?A===C:y==="!="?A!==C:y==="^="?C&&A.indexOf(C)===0:y==="*="?C&&A.indexOf(C)>-1:y==="$="?C&&A.slice(-C.length)===C:y==="~="?(" "+A.replace(Do," ")+" ").indexOf(C)>-1:y==="|="?A===C||A.slice(0,C.length+1)===C+"-":!1):!0}},CHILD:function(g,y,C,M,A){var O=g.slice(0,3)!=="nth",B=g.slice(-4)!=="last",Q=y==="of-type";return M===1&&A===0?function(J){return!!J.parentNode}:function(J,le,ae){var ce,we,Re,ue,Ve,et,ft=O!==B?"nextSibling":"previousSibling",Ne=J.parentNode,Zr=Q&&J.nodeName.toLowerCase(),ei=!ae&&!Q,dt=!1;if(Ne){if(O){for(;ft;){for(ue=J;ue=ue[ft];)if(Q?ue.nodeName.toLowerCase()===Zr:ue.nodeType===1)return!1;et=ft=g==="only"&&!et&&"nextSibling"}return!0}if(et=[B?Ne.firstChild:Ne.lastChild],B&&ei){for(ue=Ne,Re=ue[Fe]||(ue[Fe]={}),we=Re[ue.uniqueID]||(Re[ue.uniqueID]={}),ce=we[g]||[],Ve=ce[0]===st&&ce[1],dt=Ve&&ce[2],ue=Ve&&Ne.childNodes[Ve];ue=++Ve&&ue&&ue[ft]||(dt=Ve=0)||et.pop();)if(ue.nodeType===1&&++dt&&ue===J){we[g]=[st,Ve,dt];break}}else if(ei&&(ue=J,Re=ue[Fe]||(ue[Fe]={}),we=Re[ue.uniqueID]||(Re[ue.uniqueID]={}),ce=we[g]||[],Ve=ce[0]===st&&ce[1],dt=Ve),dt===!1)for(;(ue=++Ve&&ue&&ue[ft]||(dt=Ve=0)||et.pop())&&!((Q?ue.nodeName.toLowerCase()===Zr:ue.nodeType===1)&&++dt&&(ei&&(Re=ue[Fe]||(ue[Fe]={}),we=Re[ue.uniqueID]||(Re[ue.uniqueID]={}),we[g]=[st,dt]),ue===J)););return dt-=A,dt===M||dt%M==0&&dt/M>=0}}},PSEUDO:function(g,y){var C,M=s.pseudos[g]||s.setFilters[g.toLowerCase()]||Le.error("unsupported pseudo: "+g);return M[Fe]?M(y):M.length>1?(C=[g,g,"",y],s.setFilters.hasOwnProperty(g.toLowerCase())?Tt(function(A,O){for(var B,Q=M(A,y),J=Q.length;J--;)B=dr(A,Q[J]),A[B]=!(O[B]=Q[J])}):function(A){return M(A,0,C)}):M}},pseudos:{not:Tt(function(g){var y=[],C=[],M=x(g.replace(ji,"$1"));return M[Fe]?Tt(function(A,O,B,Q){for(var J,le=M(A,null,Q,[]),ae=A.length;ae--;)(J=le[ae])&&(A[ae]=!(O[ae]=J))}):function(A,O,B){return y[0]=A,M(y,null,B,C),y[0]=null,!C.pop()}}),has:Tt(function(g){return function(y){return Le(g,y).length>0}}),contains:Tt(function(g){return g=g.replace(Ot,$t),function(y){return(y.textContent||c(y)).indexOf(g)>-1}}),lang:Tt(function(g){return Mo.test(g||"")||Le.error("unsupported lang: "+g),g=g.replace(Ot,$t).toLowerCase(),function(y){var C;do if(C=ve?y.lang:y.getAttribute("xml:lang")||y.getAttribute("lang"))return C=C.toLowerCase(),C===g||C.indexOf(g+"-")===0;while((y=y.parentNode)&&y.nodeType===1);return!1}}),target:function(g){var y=e.location&&e.location.hash;return y&&y.slice(1)===g.id},root:function(g){return g===te},focus:function(g){return g===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(g.type||g.href||~g.tabIndex)},enabled:hs(!1),disabled:hs(!0),checked:function(g){var y=g.nodeName.toLowerCase();return y==="input"&&!!g.checked||y==="option"&&!!g.selected},selected:function(g){return g.parentNode&&g.parentNode.selectedIndex,g.selected===!0},empty:function(g){for(g=g.firstChild;g;g=g.nextSibling)if(g.nodeType<6)return!1;return!0},parent:function(g){return!s.pseudos.empty(g)},header:function(g){return $o.test(g.nodeName)},input:function(g){return Oo.test(g.nodeName)},button:function(g){var y=g.nodeName.toLowerCase();return y==="input"&&g.type==="button"||y==="button"},text:function(g){var y;return g.nodeName.toLowerCase()==="input"&&g.type==="text"&&((y=g.getAttribute("type"))==null||y.toLowerCase()==="text")},first:pr(function(){return[0]}),last:pr(function(g,y){return[y-1]}),eq:pr(function(g,y,C){return[C<0?C+y:C]}),even:pr(function(g,y){for(var C=0;C<y;C+=2)g.push(C);return g}),odd:pr(function(g,y){for(var C=1;C<y;C+=2)g.push(C);return g}),lt:pr(function(g,y,C){for(var M=C<0?C+y:C>y?y:C;--M>=0;)g.push(M);return g}),gt:pr(function(g,y,C){for(var M=C<0?C+y:C;++M<y;)g.push(M);return g})}},s.pseudos.nth=s.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[r]=Bo(r);for(r in{submit:!0,reset:!0})s.pseudos[r]=Ho(r);function ps(){}ps.prototype=s.filters=s.pseudos,s.setFilters=new ps,h=Le.tokenize=function(g,y){var C,M,A,O,B,Q,J,le=Jr[g+" "];if(le)return y?0:le.slice(0);for(B=g,Q=[],J=s.preFilter;B;){(!C||(M=Lo.exec(B)))&&(M&&(B=B.slice(M[0].length)||B),Q.push(A=[])),C=!1,(M=ls.exec(B))&&(C=M.shift(),A.push({value:C,type:M[0].replace(ji," ")}),B=B.slice(C.length));for(O in s.filter)(M=Bi[O].exec(B))&&(!J[O]||(M=J[O](M)))&&(C=M.shift(),A.push({value:C,type:O,matches:M}),B=B.slice(C.length));if(!C)break}return y?B.length:B?Le.error(g):Jr(g,Q).slice(0)};function Ui(g){for(var y=0,C=g.length,M="";y<C;y++)M+=g[y].value;return M}function zi(g,y,C){var M=y.dir,A=y.next,O=A||M,B=C&&O==="parentNode",Q=Te++;return y.first?function(J,le,ae){for(;J=J[M];)if(J.nodeType===1||B)return g(J,le,ae);return!1}:function(J,le,ae){var ce,we,Re,ue=[st,Q];if(ae){for(;J=J[M];)if((J.nodeType===1||B)&&g(J,le,ae))return!0}else for(;J=J[M];)if(J.nodeType===1||B)if(Re=J[Fe]||(J[Fe]={}),we=Re[J.uniqueID]||(Re[J.uniqueID]={}),A&&A===J.nodeName.toLowerCase())J=J[M]||J;else{if((ce=we[O])&&ce[0]===st&&ce[1]===Q)return ue[2]=ce[2];if(we[O]=ue,ue[2]=g(J,le,ae))return!0}return!1}}function Qn(g){return g.length>1?function(y,C,M){for(var A=g.length;A--;)if(!g[A](y,C,M))return!1;return!0}:g[0]}function Uo(g,y,C){for(var M=0,A=y.length;M<A;M++)Le(g,y[M],C);return C}function qi(g,y,C,M,A){for(var O,B=[],Q=0,J=g.length,le=y!=null;Q<J;Q++)(O=g[Q])&&(!C||C(O,M,A))&&(B.push(O),le&&y.push(Q));return B}function Jn(g,y,C,M,A,O){return M&&!M[Fe]&&(M=Jn(M)),A&&!A[Fe]&&(A=Jn(A,O)),Tt(function(B,Q,J,le){var ae,ce,we,Re=[],ue=[],Ve=Q.length,et=B||Uo(y||"*",J.nodeType?[J]:J,[]),ft=g&&(B||!y)?qi(et,Re,g,J,le):et,Ne=C?A||(B?g:Ve||M)?[]:Q:ft;if(C&&C(ft,Ne,J,le),M)for(ae=qi(Ne,ue),M(ae,[],J,le),ce=ae.length;ce--;)(we=ae[ce])&&(Ne[ue[ce]]=!(ft[ue[ce]]=we));if(B){if(A||g){if(A){for(ae=[],ce=Ne.length;ce--;)(we=Ne[ce])&&ae.push(ft[ce]=we);A(null,Ne=[],ae,le)}for(ce=Ne.length;ce--;)(we=Ne[ce])&&(ae=A?dr(B,we):Re[ce])>-1&&(B[ae]=!(Q[ae]=we))}}else Ne=qi(Ne===Q?Ne.splice(Ve,Ne.length):Ne),A?A(null,Q,Ne,le):Jt.apply(Q,Ne)})}function Kn(g){for(var y,C,M,A=g.length,O=s.relative[g[0].type],B=O||s.relative[" "],Q=O?1:0,J=zi(function(ce){return ce===y},B,!0),le=zi(function(ce){return dr(y,ce)>-1},B,!0),ae=[function(ce,we,Re){var ue=!O&&(Re||we!==k)||((y=we).nodeType?J(ce,we,Re):le(ce,we,Re));return y=null,ue}];Q<A;Q++)if(C=s.relative[g[Q].type])ae=[zi(Qn(ae),C)];else{if(C=s.filter[g[Q].type].apply(null,g[Q].matches),C[Fe]){for(M=++Q;M<A&&!s.relative[g[M].type];M++);return Jn(Q>1&&Qn(ae),Q>1&&Ui(g.slice(0,Q-1).concat({value:g[Q-2].type===" "?"*":""})).replace(ji,"$1"),C,Q<M&&Kn(g.slice(Q,M)),M<A&&Kn(g=g.slice(M)),M<A&&Ui(g))}ae.push(C)}return Qn(ae)}function zo(g,y){var C=y.length>0,M=g.length>0,A=function(O,B,Q,J,le){var ae,ce,we,Re=0,ue="0",Ve=O&&[],et=[],ft=k,Ne=O||M&&s.find.TAG("*",le),Zr=st+=ft==null?1:Math.random()||.1,ei=Ne.length;for(le&&(k=B==I||B||le);ue!==ei&&(ae=Ne[ue])!=null;ue++){if(M&&ae){for(ce=0,!B&&ae.ownerDocument!=I&&(D(ae),Q=!ve);we=g[ce++];)if(we(ae,B||I,Q)){J.push(ae);break}le&&(st=Zr)}C&&((ae=!we&&ae)&&Re--,O&&Ve.push(ae))}if(Re+=ue,C&&ue!==Re){for(ce=0;we=y[ce++];)we(Ve,et,B,Q);if(O){if(Re>0)for(;ue--;)Ve[ue]||et[ue]||(et[ue]=Qt.call(J));et=qi(et)}Jt.apply(J,et),le&&!O&&et.length>0&&Re+y.length>1&&Le.uniqueSort(J)}return le&&(st=Zr,k=ft),Ve};return C?Tt(A):A}return x=Le.compile=function(g,y){var C,M=[],A=[],O=Wi[g+" "];if(!O){for(y||(y=h(g)),C=y.length;C--;)O=Kn(y[C]),O[Fe]?M.push(O):A.push(O);O=Wi(g,zo(A,M)),O.selector=g}return O},E=Le.select=function(g,y,C,M){var A,O,B,Q,J,le=typeof g=="function"&&g,ae=!M&&h(g=le.selector||g);if(C=C||[],ae.length===1){if(O=ae[0]=ae[0].slice(0),O.length>2&&(B=O[0]).type==="ID"&&y.nodeType===9&&ve&&s.relative[O[1].type]){if(y=(s.find.ID(B.matches[0].replace(Ot,$t),y)||[])[0],y)le&&(y=y.parentNode);else return C;g=g.slice(O.shift().value.length)}for(A=Bi.needsContext.test(g)?0:O.length;A--&&(B=O[A],!s.relative[Q=B.type]);)if((J=s.find[Q])&&(M=J(B.matches[0].replace(Ot,$t),Gn.test(O[0].type)&&Xn(y.parentNode)||y))){if(O.splice(A,1),g=M.length&&Ui(O),!g)return Jt.apply(C,M),C;break}}return(le||x(g,ae))(M,y,!ve,C,!y||Gn.test(g)&&Xn(y.parentNode)||y),C},n.sortStable=Fe.split("").sort(cr).join("")===Fe,n.detectDuplicates=!!j,D(),n.sortDetached=Ct(function(g){return g.compareDocumentPosition(I.createElement("fieldset"))&1}),Ct(function(g){return g.innerHTML="<a href='#'></a>",g.firstChild.getAttribute("href")==="#"})||Yn("type|href|height|width",function(g,y,C){if(!C)return g.getAttribute(y,y.toLowerCase()==="type"?1:2)}),(!n.attributes||!Ct(function(g){return g.innerHTML="<input/>",g.firstChild.setAttribute("value",""),g.firstChild.getAttribute("value")===""}))&&Yn("value",function(g,y,C){if(!C&&g.nodeName.toLowerCase()==="input")return g.defaultValue}),Ct(function(g){return g.getAttribute("disabled")==null})||Yn(qn,function(g,y,C){var M;if(!C)return g[y]===!0?y.toLowerCase():(M=g.getAttributeNode(y))&&M.specified?M.value:null}),Le}(l);o.find=ne,o.expr=ne.selectors,o.expr[":"]=o.expr.pseudos,o.uniqueSort=o.unique=ne.uniqueSort,o.text=ne.getText,o.isXMLDoc=ne.isXML,o.contains=ne.contains,o.escapeSelector=ne.escape;var he=function(e,r,n){for(var s=[],c=n!==void 0;(e=e[r])&&e.nodeType!==9;)if(e.nodeType===1){if(c&&o(e).is(n))break;s.push(e)}return s},ke=function(e,r){for(var n=[];e;e=e.nextSibling)e.nodeType===1&&e!==r&&n.push(e);return n},He=o.expr.match.needsContext;function Ie(e,r){return e.nodeName&&e.nodeName.toLowerCase()===r.toLowerCase()}var tt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Xe(e,r,n){return G(r)?o.grep(e,function(s,c){return!!r.call(s,c,s)!==n}):r.nodeType?o.grep(e,function(s){return s===r!==n}):typeof r!="string"?o.grep(e,function(s){return w.call(r,s)>-1!==n}):o.filter(r,e,n)}o.filter=function(e,r,n){var s=r[0];return n&&(e=":not("+e+")"),r.length===1&&s.nodeType===1?o.find.matchesSelector(s,e)?[s]:[]:o.find.matches(e,o.grep(r,function(c){return c.nodeType===1}))},o.fn.extend({find:function(e){var r,n,s=this.length,c=this;if(typeof e!="string")return this.pushStack(o(e).filter(function(){for(r=0;r<s;r++)if(o.contains(c[r],this))return!0}));for(n=this.pushStack([]),r=0;r<s;r++)o.find(e,c[r],n);return s>1?o.uniqueSort(n):n},filter:function(e){return this.pushStack(Xe(this,e||[],!1))},not:function(e){return this.pushStack(Xe(this,e||[],!0))},is:function(e){return!!Xe(this,typeof e=="string"&&He.test(e)?o(e):e||[],!1).length}});var pt,rr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,wr=o.fn.init=function(e,r,n){var s,c;if(!e)return this;if(n=n||pt,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?s=[null,e,null]:s=rr.exec(e),s&&(s[1]||!r))if(s[1]){if(r=r instanceof o?r[0]:r,o.merge(this,o.parseHTML(s[1],r&&r.nodeType?r.ownerDocument||r:K,!0)),tt.test(s[1])&&o.isPlainObject(r))for(s in r)G(this[s])?this[s](r[s]):this.attr(s,r[s]);return this}else return c=K.getElementById(s[2]),c&&(this[0]=c,this.length=1),this;else return!r||r.jquery?(r||n).find(e):this.constructor(r).find(e);else{if(e.nodeType)return this[0]=e,this.length=1,this;if(G(e))return n.ready!==void 0?n.ready(e):e(o)}return o.makeArray(e,this)};wr.prototype=o.fn,pt=o(K);var Mr=/^(?:parents|prev(?:Until|All))/,zt={children:!0,contents:!0,next:!0,prev:!0};o.fn.extend({has:function(e){var r=o(e,this),n=r.length;return this.filter(function(){for(var s=0;s<n;s++)if(o.contains(this,r[s]))return!0})},closest:function(e,r){var n,s=0,c=this.length,f=[],h=typeof e!="string"&&o(e);if(!He.test(e)){for(;s<c;s++)for(n=this[s];n&&n!==r;n=n.parentNode)if(n.nodeType<11&&(h?h.index(n)>-1:n.nodeType===1&&o.find.matchesSelector(n,e))){f.push(n);break}}return this.pushStack(f.length>1?o.uniqueSort(f):f)},index:function(e){return e?typeof e=="string"?w.call(o(e),this[0]):w.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,r){return this.pushStack(o.uniqueSort(o.merge(this.get(),o(e,r))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function Nr(e,r){for(;(e=e[r])&&e.nodeType!==1;);return e}o.each({parent:function(e){var r=e.parentNode;return r&&r.nodeType!==11?r:null},parents:function(e){return he(e,"parentNode")},parentsUntil:function(e,r,n){return he(e,"parentNode",n)},next:function(e){return Nr(e,"nextSibling")},prev:function(e){return Nr(e,"previousSibling")},nextAll:function(e){return he(e,"nextSibling")},prevAll:function(e){return he(e,"previousSibling")},nextUntil:function(e,r,n){return he(e,"nextSibling",n)},prevUntil:function(e,r,n){return he(e,"previousSibling",n)},siblings:function(e){return ke((e.parentNode||{}).firstChild,e)},children:function(e){return ke(e.firstChild)},contents:function(e){return e.contentDocument!=null&&a(e.contentDocument)?e.contentDocument:(Ie(e,"template")&&(e=e.content||e),o.merge([],e.childNodes))}},function(e,r){o.fn[e]=function(n,s){var c=o.map(this,r,n);return e.slice(-5)!=="Until"&&(s=n),s&&typeof s=="string"&&(c=o.filter(s,c)),this.length>1&&(zt[e]||o.uniqueSort(c),Mr.test(e)&&c.reverse()),this.pushStack(c)}});var gt=/[^\x20\t\r\n\f]+/g;function yn(e){var r={};return o.each(e.match(gt)||[],function(n,s){r[s]=!0}),r}o.Callbacks=function(e){e=typeof e=="string"?yn(e):o.extend({},e);var r,n,s,c,f=[],h=[],x=-1,E=function(){for(c=c||e.once,s=r=!0;h.length;x=-1)for(n=h.shift();++x<f.length;)f[x].apply(n[0],n[1])===!1&&e.stopOnFalse&&(x=f.length,n=!1);e.memory||(n=!1),r=!1,c&&(n?f=[]:f="")},k={add:function(){return f&&(n&&!r&&(x=f.length-1,h.push(n)),function R(j){o.each(j,function(D,I){G(I)?(!e.unique||!k.has(I))&&f.push(I):I&&I.length&&be(I)!=="string"&&R(I)})}(arguments),n&&!r&&E()),this},remove:function(){return o.each(arguments,function(R,j){for(var D;(D=o.inArray(j,f,D))>-1;)f.splice(D,1),D<=x&&x--}),this},has:function(R){return R?o.inArray(R,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return c=h=[],f=n="",this},disabled:function(){return!f},lock:function(){return c=h=[],!n&&!r&&(f=n=""),this},locked:function(){return!!c},fireWith:function(R,j){return c||(j=j||[],j=[R,j.slice?j.slice():j],h.push(j),r||E()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!s}};return k};function Qe(e){return e}function ir(e){throw e}function Ei(e,r,n,s){var c;try{e&&G(c=e.promise)?c.call(e).done(r).fail(n):e&&G(c=e.then)?c.call(e,r,n):r.apply(void 0,[e].slice(s))}catch(f){n.apply(void 0,[f])}}o.extend({Deferred:function(e){var r=[["notify","progress",o.Callbacks("memory"),o.Callbacks("memory"),2],["resolve","done",o.Callbacks("once memory"),o.Callbacks("once memory"),0,"resolved"],["reject","fail",o.Callbacks("once memory"),o.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return c.done(arguments).fail(arguments),this},catch:function(f){return s.then(null,f)},pipe:function(){var f=arguments;return o.Deferred(function(h){o.each(r,function(x,E){var k=G(f[E[4]])&&f[E[4]];c[E[1]](function(){var R=k&&k.apply(this,arguments);R&&G(R.promise)?R.promise().progress(h.notify).done(h.resolve).fail(h.reject):h[E[0]+"With"](this,k?[R]:arguments)})}),f=null}).promise()},then:function(f,h,x){var E=0;function k(R,j,D,I){return function(){var te=this,ve=arguments,re=function(){var Ue,ut;if(!(R<E)){if(Ue=D.apply(te,ve),Ue===j.promise())throw new TypeError("Thenable self-resolution");ut=Ue&&(typeof Ue=="object"||typeof Ue=="function")&&Ue.then,G(ut)?I?ut.call(Ue,k(E,j,Qe,I),k(E,j,ir,I)):(E++,ut.call(Ue,k(E,j,Qe,I),k(E,j,ir,I),k(E,j,Qe,j.notifyWith))):(D!==Qe&&(te=void 0,ve=[Ue]),(I||j.resolveWith)(te,ve))}},qe=I?re:function(){try{re()}catch(Ue){o.Deferred.exceptionHook&&o.Deferred.exceptionHook(Ue,qe.stackTrace),R+1>=E&&(D!==ir&&(te=void 0,ve=[Ue]),j.rejectWith(te,ve))}};R?qe():(o.Deferred.getStackHook&&(qe.stackTrace=o.Deferred.getStackHook()),l.setTimeout(qe))}}return o.Deferred(function(R){r[0][3].add(k(0,R,G(x)?x:Qe,R.notifyWith)),r[1][3].add(k(0,R,G(f)?f:Qe)),r[2][3].add(k(0,R,G(h)?h:ir))}).promise()},promise:function(f){return f!=null?o.extend(f,s):s}},c={};return o.each(r,function(f,h){var x=h[2],E=h[5];s[h[1]]=x.add,E&&x.add(function(){n=E},r[3-f][2].disable,r[3-f][3].disable,r[0][2].lock,r[0][3].lock),x.add(h[3].fire),c[h[0]]=function(){return c[h[0]+"With"](this===c?void 0:this,arguments),this},c[h[0]+"With"]=x.fireWith}),s.promise(c),e&&e.call(c,c),c},when:function(e){var r=arguments.length,n=r,s=Array(n),c=u.call(arguments),f=o.Deferred(),h=function(x){return function(E){s[x]=this,c[x]=arguments.length>1?u.call(arguments):E,--r||f.resolveWith(s,c)}};if(r<=1&&(Ei(e,f.done(h(n)).resolve,f.reject,!r),f.state()==="pending"||G(c[n]&&c[n].then)))return f.then();for(;n--;)Ei(c[n],h(n),f.reject);return f.promise()}});var xn=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;o.Deferred.exceptionHook=function(e,r){l.console&&l.console.warn&&e&&xn.test(e.name)&&l.console.warn("jQuery.Deferred exception: "+e.message,e.stack,r)},o.readyException=function(e){l.setTimeout(function(){throw e})};var Or=o.Deferred();o.fn.ready=function(e){return Or.then(e).catch(function(r){o.readyException(r)}),this},o.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--o.readyWait:o.isReady)||(o.isReady=!0,!(e!==!0&&--o.readyWait>0)&&Or.resolveWith(K,[o]))}}),o.ready.then=Or.then;function Er(){K.removeEventListener("DOMContentLoaded",Er),l.removeEventListener("load",Er),o.ready()}K.readyState==="complete"||K.readyState!=="loading"&&!K.documentElement.doScroll?l.setTimeout(o.ready):(K.addEventListener("DOMContentLoaded",Er),l.addEventListener("load",Er));var St=function(e,r,n,s,c,f,h){var x=0,E=e.length,k=n==null;if(be(n)==="object"){c=!0;for(x in n)St(e,r,x,n[x],!0,f,h)}else if(s!==void 0&&(c=!0,G(s)||(h=!0),k&&(h?(r.call(e,s),r=null):(k=r,r=function(R,j,D){return k.call(o(R),D)})),r))for(;x<E;x++)r(e[x],n,h?s:s.call(e[x],x,r(e[x],n)));return c?e:k?r.call(e):E?r(e[0],n):f},wn=/^-ms-/,En=/-([a-z])/g;function Sn(e,r){return r.toUpperCase()}function mt(e){return e.replace(wn,"ms-").replace(En,Sn)}var nr=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function ar(){this.expando=o.expando+ar.uid++}ar.uid=1,ar.prototype={cache:function(e){var r=e[this.expando];return r||(r={},nr(e)&&(e.nodeType?e[this.expando]=r:Object.defineProperty(e,this.expando,{value:r,configurable:!0}))),r},set:function(e,r,n){var s,c=this.cache(e);if(typeof r=="string")c[mt(r)]=n;else for(s in r)c[mt(s)]=r[s];return c},get:function(e,r){return r===void 0?this.cache(e):e[this.expando]&&e[this.expando][mt(r)]},access:function(e,r,n){return r===void 0||r&&typeof r=="string"&&n===void 0?this.get(e,r):(this.set(e,r,n),n!==void 0?n:r)},remove:function(e,r){var n,s=e[this.expando];if(s!==void 0){if(r!==void 0)for(Array.isArray(r)?r=r.map(mt):(r=mt(r),r=r in s?[r]:r.match(gt)||[]),n=r.length;n--;)delete s[r[n]];(r===void 0||o.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var r=e[this.expando];return r!==void 0&&!o.isEmptyObject(r)}};var oe=new ar,$e=new ar,_n=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Si=/[A-Z]/g;function Sr(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:_n.test(e)?JSON.parse(e):e}function _r(e,r,n){var s;if(n===void 0&&e.nodeType===1)if(s="data-"+r.replace(Si,"-$&").toLowerCase(),n=e.getAttribute(s),typeof n=="string"){try{n=Sr(n)}catch(c){}$e.set(e,r,n)}else n=void 0;return n}o.extend({hasData:function(e){return $e.hasData(e)||oe.hasData(e)},data:function(e,r,n){return $e.access(e,r,n)},removeData:function(e,r){$e.remove(e,r)},_data:function(e,r,n){return oe.access(e,r,n)},_removeData:function(e,r){oe.remove(e,r)}}),o.fn.extend({data:function(e,r){var n,s,c,f=this[0],h=f&&f.attributes;if(e===void 0){if(this.length&&(c=$e.get(f),f.nodeType===1&&!oe.get(f,"hasDataAttrs"))){for(n=h.length;n--;)h[n]&&(s=h[n].name,s.indexOf("data-")===0&&(s=mt(s.slice(5)),_r(f,s,c[s])));oe.set(f,"hasDataAttrs",!0)}return c}return typeof e=="object"?this.each(function(){$e.set(this,e)}):St(this,function(x){var E;if(f&&x===void 0)return E=$e.get(f,e),E!==void 0||(E=_r(f,e),E!==void 0)?E:void 0;this.each(function(){$e.set(this,e,x)})},null,r,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){$e.remove(this,e)})}}),o.extend({queue:function(e,r,n){var s;if(e)return r=(r||"fx")+"queue",s=oe.get(e,r),n&&(!s||Array.isArray(n)?s=oe.access(e,r,o.makeArray(n)):s.push(n)),s||[]},dequeue:function(e,r){r=r||"fx";var n=o.queue(e,r),s=n.length,c=n.shift(),f=o._queueHooks(e,r),h=function(){o.dequeue(e,r)};c==="inprogress"&&(c=n.shift(),s--),c&&(r==="fx"&&n.unshift("inprogress"),delete f.stop,c.call(e,h,f)),!s&&f&&f.empty.fire()},_queueHooks:function(e,r){var n=r+"queueHooks";return oe.get(e,n)||oe.access(e,n,{empty:o.Callbacks("once memory").add(function(){oe.remove(e,[r+"queue",n])})})}}),o.fn.extend({queue:function(e,r){var n=2;return typeof e!="string"&&(r=e,e="fx",n--),arguments.length<n?o.queue(this[0],e):r===void 0?this:this.each(function(){var s=o.queue(this,e,r);o._queueHooks(this,e),e==="fx"&&s[0]!=="inprogress"&&o.dequeue(this,e)})},dequeue:function(e){return this.each(function(){o.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,r){var n,s=1,c=o.Deferred(),f=this,h=this.length,x=function(){--s||c.resolveWith(f,[f])};for(typeof e!="string"&&(r=e,e=void 0),e=e||"fx";h--;)n=oe.get(f[h],e+"queueHooks"),n&&n.empty&&(s++,n.empty.add(x));return x(),c.promise(r)}});var Tr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Lt=new RegExp("^(?:([+-])=|)("+Tr+")([a-z%]*)$","i"),vt=["Top","Right","Bottom","Left"],Pt=K.documentElement,Rt=function(e){return o.contains(e.ownerDocument,e)},_i={composed:!0};Pt.getRootNode&&(Rt=function(e){return o.contains(e.ownerDocument,e)||e.getRootNode(_i)===e.ownerDocument});var sr=function(e,r){return e=r||e,e.style.display==="none"||e.style.display===""&&Rt(e)&&o.css(e,"display")==="none"};function $r(e,r,n,s){var c,f,h=20,x=s?function(){return s.cur()}:function(){return o.css(e,r,"")},E=x(),k=n&&n[3]||(o.cssNumber[r]?"":"px"),R=e.nodeType&&(o.cssNumber[r]||k!=="px"&&+E)&&Lt.exec(o.css(e,r));if(R&&R[3]!==k){for(E=E/2,k=k||R[3],R=+E||1;h--;)o.style(e,r,R+k),(1-f)*(1-(f=x()/E||.5))<=0&&(h=0),R=R/f;R=R*2,o.style(e,r,R+k),n=n||[]}return n&&(R=+R||+E||0,c=n[1]?R+(n[1]+1)*n[2]:+n[2],s&&(s.unit=k,s.start=R,s.end=c)),c}var Wr={};function Ti(e){var r,n=e.ownerDocument,s=e.nodeName,c=Wr[s];return c||(r=n.body.appendChild(n.createElement(s)),c=o.css(r,"display"),r.parentNode.removeChild(r),c==="none"&&(c="block"),Wr[s]=c,c)}function It(e,r){for(var n,s,c=[],f=0,h=e.length;f<h;f++)s=e[f],!!s.style&&(n=s.style.display,r?(n==="none"&&(c[f]=oe.get(s,"display")||null,c[f]||(s.style.display="")),s.style.display===""&&sr(s)&&(c[f]=Ti(s))):n!=="none"&&(c[f]="none",oe.set(s,"display",n)));for(f=0;f<h;f++)c[f]!=null&&(e[f].style.display=c[f]);return e}o.fn.extend({show:function(){return It(this,!0)},hide:function(){return It(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){sr(this)?o(this).show():o(this).hide()})}});var qt=/^(?:checkbox|radio)$/i,jr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Br=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=K.createDocumentFragment(),r=e.appendChild(K.createElement("div")),n=K.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),r.appendChild(n),H.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,r.innerHTML="<textarea>x</textarea>",H.noCloneChecked=!!r.cloneNode(!0).lastChild.defaultValue,r.innerHTML="<option></option>",H.option=!!r.lastChild})();var Je={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td,H.option||(Je.optgroup=Je.option=[1,"<select multiple='multiple'>","</select>"]);function Ke(e,r){var n;return typeof e.getElementsByTagName!="undefined"?n=e.getElementsByTagName(r||"*"):typeof e.querySelectorAll!="undefined"?n=e.querySelectorAll(r||"*"):n=[],r===void 0||r&&Ie(e,r)?o.merge([e],n):n}function Hr(e,r){for(var n=0,s=e.length;n<s;n++)oe.set(e[n],"globalEval",!r||oe.get(r[n],"globalEval"))}var Ur=/<|&#?\w+;/;function zr(e,r,n,s,c){for(var f,h,x,E,k,R,j=r.createDocumentFragment(),D=[],I=0,te=e.length;I<te;I++)if(f=e[I],f||f===0)if(be(f)==="object")o.merge(D,f.nodeType?[f]:f);else if(!Ur.test(f))D.push(r.createTextNode(f));else{for(h=h||j.appendChild(r.createElement("div")),x=(jr.exec(f)||["",""])[1].toLowerCase(),E=Je[x]||Je._default,h.innerHTML=E[1]+o.htmlPrefilter(f)+E[2],R=E[0];R--;)h=h.lastChild;o.merge(D,h.childNodes),h=j.firstChild,h.textContent=""}for(j.textContent="",I=0;f=D[I++];){if(s&&o.inArray(f,s)>-1){c&&c.push(f);continue}if(k=Rt(f),h=Ke(j.appendChild(f),"script"),k&&Hr(h),n)for(R=0;f=h[R++];)Br.test(f.type||"")&&n.push(f)}return j}var Ci=/^([^.]*)(?:\.(.+)|)/;function rt(){return!0}function Vt(){return!1}function Tn(e,r){return e===ki()==(r==="focus")}function ki(){try{return K.activeElement}catch(e){}}function qr(e,r,n,s,c,f){var h,x;if(typeof r=="object"){typeof n!="string"&&(s=s||n,n=void 0);for(x in r)qr(e,x,n,s,r[x],f);return e}if(s==null&&c==null?(c=n,s=n=void 0):c==null&&(typeof n=="string"?(c=s,s=void 0):(c=s,s=n,n=void 0)),c===!1)c=Vt;else if(!c)return e;return f===1&&(h=c,c=function(E){return o().off(E),h.apply(this,arguments)},c.guid=h.guid||(h.guid=o.guid++)),e.each(function(){o.event.add(this,r,c,s,n)})}o.event={global:{},add:function(e,r,n,s,c){var f,h,x,E,k,R,j,D,I,te,ve,re=oe.get(e);if(!!nr(e))for(n.handler&&(f=n,n=f.handler,c=f.selector),c&&o.find.matchesSelector(Pt,c),n.guid||(n.guid=o.guid++),(E=re.events)||(E=re.events=Object.create(null)),(h=re.handle)||(h=re.handle=function(qe){return typeof o!="undefined"&&o.event.triggered!==qe.type?o.event.dispatch.apply(e,arguments):void 0}),r=(r||"").match(gt)||[""],k=r.length;k--;)x=Ci.exec(r[k])||[],I=ve=x[1],te=(x[2]||"").split(".").sort(),!!I&&(j=o.event.special[I]||{},I=(c?j.delegateType:j.bindType)||I,j=o.event.special[I]||{},R=o.extend({type:I,origType:ve,data:s,handler:n,guid:n.guid,selector:c,needsContext:c&&o.expr.match.needsContext.test(c),namespace:te.join(".")},f),(D=E[I])||(D=E[I]=[],D.delegateCount=0,(!j.setup||j.setup.call(e,s,te,h)===!1)&&e.addEventListener&&e.addEventListener(I,h)),j.add&&(j.add.call(e,R),R.handler.guid||(R.handler.guid=n.guid)),c?D.splice(D.delegateCount++,0,R):D.push(R),o.event.global[I]=!0)},remove:function(e,r,n,s,c){var f,h,x,E,k,R,j,D,I,te,ve,re=oe.hasData(e)&&oe.get(e);if(!(!re||!(E=re.events))){for(r=(r||"").match(gt)||[""],k=r.length;k--;){if(x=Ci.exec(r[k])||[],I=ve=x[1],te=(x[2]||"").split(".").sort(),!I){for(I in E)o.event.remove(e,I+r[k],n,s,!0);continue}for(j=o.event.special[I]||{},I=(s?j.delegateType:j.bindType)||I,D=E[I]||[],x=x[2]&&new RegExp("(^|\\.)"+te.join("\\.(?:.*\\.|)")+"(\\.|$)"),h=f=D.length;f--;)R=D[f],(c||ve===R.origType)&&(!n||n.guid===R.guid)&&(!x||x.test(R.namespace))&&(!s||s===R.selector||s==="**"&&R.selector)&&(D.splice(f,1),R.selector&&D.delegateCount--,j.remove&&j.remove.call(e,R));h&&!D.length&&((!j.teardown||j.teardown.call(e,te,re.handle)===!1)&&o.removeEvent(e,I,re.handle),delete E[I])}o.isEmptyObject(E)&&oe.remove(e,"handle events")}},dispatch:function(e){var r,n,s,c,f,h,x=new Array(arguments.length),E=o.event.fix(e),k=(oe.get(this,"events")||Object.create(null))[E.type]||[],R=o.event.special[E.type]||{};for(x[0]=E,r=1;r<arguments.length;r++)x[r]=arguments[r];if(E.delegateTarget=this,!(R.preDispatch&&R.preDispatch.call(this,E)===!1)){for(h=o.event.handlers.call(this,E,k),r=0;(c=h[r++])&&!E.isPropagationStopped();)for(E.currentTarget=c.elem,n=0;(f=c.handlers[n++])&&!E.isImmediatePropagationStopped();)(!E.rnamespace||f.namespace===!1||E.rnamespace.test(f.namespace))&&(E.handleObj=f,E.data=f.data,s=((o.event.special[f.origType]||{}).handle||f.handler).apply(c.elem,x),s!==void 0&&(E.result=s)===!1&&(E.preventDefault(),E.stopPropagation()));return R.postDispatch&&R.postDispatch.call(this,E),E.result}},handlers:function(e,r){var n,s,c,f,h,x=[],E=r.delegateCount,k=e.target;if(E&&k.nodeType&&!(e.type==="click"&&e.button>=1)){for(;k!==this;k=k.parentNode||this)if(k.nodeType===1&&!(e.type==="click"&&k.disabled===!0)){for(f=[],h={},n=0;n<E;n++)s=r[n],c=s.selector+" ",h[c]===void 0&&(h[c]=s.needsContext?o(c,this).index(k)>-1:o.find(c,this,null,[k]).length),h[c]&&f.push(s);f.length&&x.push({elem:k,handlers:f})}}return k=this,E<r.length&&x.push({elem:k,handlers:r.slice(E)}),x},addProp:function(e,r){Object.defineProperty(o.Event.prototype,e,{enumerable:!0,configurable:!0,get:G(r)?function(){if(this.originalEvent)return r(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(n){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}})},fix:function(e){return e[o.expando]?e:new o.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var r=this||e;return qt.test(r.type)&&r.click&&Ie(r,"input")&&Cr(r,"click",rt),!1},trigger:function(e){var r=this||e;return qt.test(r.type)&&r.click&&Ie(r,"input")&&Cr(r,"click"),!0},_default:function(e){var r=e.target;return qt.test(r.type)&&r.click&&Ie(r,"input")&&oe.get(r,"click")||Ie(r,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function Cr(e,r,n){if(!n){oe.get(e,r)===void 0&&o.event.add(e,r,rt);return}oe.set(e,r,!1),o.event.add(e,r,{namespace:!1,handler:function(s){var c,f,h=oe.get(this,r);if(s.isTrigger&1&&this[r]){if(h.length)(o.event.special[r]||{}).delegateType&&s.stopPropagation();else if(h=u.call(arguments),oe.set(this,r,h),c=n(this,r),this[r](),f=oe.get(this,r),h!==f||c?oe.set(this,r,!1):f={},h!==f)return s.stopImmediatePropagation(),s.preventDefault(),f&&f.value}else h.length&&(oe.set(this,r,{value:o.event.trigger(o.extend(h[0],o.Event.prototype),h.slice(1),this)}),s.stopImmediatePropagation())}})}o.removeEvent=function(e,r,n){e.removeEventListener&&e.removeEventListener(r,n)},o.Event=function(e,r){if(!(this instanceof o.Event))return new o.Event(e,r);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?rt:Vt,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,r&&o.extend(this,r),this.timeStamp=e&&e.timeStamp||Date.now(),this[o.expando]=!0},o.Event.prototype={constructor:o.Event,isDefaultPrevented:Vt,isPropagationStopped:Vt,isImmediatePropagationStopped:Vt,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=rt,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=rt,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=rt,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},o.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},o.event.addProp),o.each({focus:"focusin",blur:"focusout"},function(e,r){o.event.special[e]={setup:function(){return Cr(this,e,Tn),!1},trigger:function(){return Cr(this,e),!0},_default:function(){return!0},delegateType:r}}),o.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){o.event.special[e]={delegateType:r,bindType:r,handle:function(n){var s,c=this,f=n.relatedTarget,h=n.handleObj;return(!f||f!==c&&!o.contains(c,f))&&(n.type=h.origType,s=h.handler.apply(this,arguments),n.type=r),s}}}),o.fn.extend({on:function(e,r,n,s){return qr(this,e,r,n,s)},one:function(e,r,n,s){return qr(this,e,r,n,s,1)},off:function(e,r,n){var s,c;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,o(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if(typeof e=="object"){for(c in e)this.off(c,r,e[c]);return this}return(r===!1||typeof r=="function")&&(n=r,r=void 0),n===!1&&(n=Vt),this.each(function(){o.event.remove(this,e,n,r)})}});var Cn=/<script|<style|<link/i,kn=/checked\s*(?:[^=]|=\s*.checked.)/i,Pn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pi(e,r){return Ie(e,"table")&&Ie(r.nodeType!==11?r:r.firstChild,"tr")&&o(e).children("tbody")[0]||e}function An(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function Fn(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ai(e,r){var n,s,c,f,h,x,E;if(r.nodeType===1){if(oe.hasData(e)&&(f=oe.get(e),E=f.events,E)){oe.remove(r,"handle events");for(c in E)for(n=0,s=E[c].length;n<s;n++)o.event.add(r,c,E[c][n])}$e.hasData(e)&&(h=$e.access(e),x=o.extend({},h),$e.set(r,x))}}function Dn(e,r){var n=r.nodeName.toLowerCase();n==="input"&&qt.test(e.type)?r.checked=e.checked:(n==="input"||n==="textarea")&&(r.defaultValue=e.defaultValue)}function Mt(e,r,n,s){r=d(r);var c,f,h,x,E,k,R=0,j=e.length,D=j-1,I=r[0],te=G(I);if(te||j>1&&typeof I=="string"&&!H.checkClone&&kn.test(I))return e.each(function(ve){var re=e.eq(ve);te&&(r[0]=I.call(this,ve,re.html())),Mt(re,r,n,s)});if(j&&(c=zr(r,e[0].ownerDocument,!1,e,s),f=c.firstChild,c.childNodes.length===1&&(c=f),f||s)){for(h=o.map(Ke(c,"script"),An),x=h.length;R<j;R++)E=c,R!==D&&(E=o.clone(E,!0,!0),x&&o.merge(h,Ke(E,"script"))),n.call(e[R],E,R);if(x)for(k=h[h.length-1].ownerDocument,o.map(h,Fn),R=0;R<x;R++)E=h[R],Br.test(E.type||"")&&!oe.access(E,"globalEval")&&o.contains(k,E)&&(E.src&&(E.type||"").toLowerCase()!=="module"?o._evalUrl&&!E.noModule&&o._evalUrl(E.src,{nonce:E.nonce||E.getAttribute("nonce")},k):Ee(E.textContent.replace(Pn,""),E,k))}return e}function Fi(e,r,n){for(var s,c=r?o.filter(r,e):e,f=0;(s=c[f])!=null;f++)!n&&s.nodeType===1&&o.cleanData(Ke(s)),s.parentNode&&(n&&Rt(s)&&Hr(Ke(s,"script")),s.parentNode.removeChild(s));return e}o.extend({htmlPrefilter:function(e){return e},clone:function(e,r,n){var s,c,f,h,x=e.cloneNode(!0),E=Rt(e);if(!H.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!o.isXMLDoc(e))for(h=Ke(x),f=Ke(e),s=0,c=f.length;s<c;s++)Dn(f[s],h[s]);if(r)if(n)for(f=f||Ke(e),h=h||Ke(x),s=0,c=f.length;s<c;s++)Ai(f[s],h[s]);else Ai(e,x);return h=Ke(x,"script"),h.length>0&&Hr(h,!E&&Ke(e,"script")),x},cleanData:function(e){for(var r,n,s,c=o.event.special,f=0;(n=e[f])!==void 0;f++)if(nr(n)){if(r=n[oe.expando]){if(r.events)for(s in r.events)c[s]?o.event.remove(n,s):o.removeEvent(n,s,r.handle);n[oe.expando]=void 0}n[$e.expando]&&(n[$e.expando]=void 0)}}}),o.fn.extend({detach:function(e){return Fi(this,e,!0)},remove:function(e){return Fi(this,e)},text:function(e){return St(this,function(r){return r===void 0?o.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=r)})},null,e,arguments.length)},append:function(){return Mt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var r=Pi(this,e);r.appendChild(e)}})},prepend:function(){return Mt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var r=Pi(this,e);r.insertBefore(e,r.firstChild)}})},before:function(){return Mt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Mt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,r=0;(e=this[r])!=null;r++)e.nodeType===1&&(o.cleanData(Ke(e,!1)),e.textContent="");return this},clone:function(e,r){return e=e==null?!1:e,r=r==null?e:r,this.map(function(){return o.clone(this,e,r)})},html:function(e){return St(this,function(r){var n=this[0]||{},s=0,c=this.length;if(r===void 0&&n.nodeType===1)return n.innerHTML;if(typeof r=="string"&&!Cn.test(r)&&!Je[(jr.exec(r)||["",""])[1].toLowerCase()]){r=o.htmlPrefilter(r);try{for(;s<c;s++)n=this[s]||{},n.nodeType===1&&(o.cleanData(Ke(n,!1)),n.innerHTML=r);n=0}catch(f){}}n&&this.empty().append(r)},null,e,arguments.length)},replaceWith:function(){var e=[];return Mt(this,arguments,function(r){var n=this.parentNode;o.inArray(this,e)<0&&(o.cleanData(Ke(this)),n&&n.replaceChild(r,this))},e)}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,r){o.fn[e]=function(n){for(var s,c=[],f=o(n),h=f.length-1,x=0;x<=h;x++)s=x===h?this:this.clone(!0),o(f[x])[r](s),m.apply(c,s.get());return this.pushStack(c)}});var Vr=new RegExp("^("+Tr+")(?!px)[a-z%]+$","i"),kr=function(e){var r=e.ownerDocument.defaultView;return(!r||!r.opener)&&(r=l),r.getComputedStyle(e)},Di=function(e,r,n){var s,c,f={};for(c in r)f[c]=e.style[c],e.style[c]=r[c];s=n.call(e);for(c in r)e.style[c]=f[c];return s},Ln=new RegExp(vt.join("|"),"i");(function(){function e(){if(!!k){E.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",k.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Pt.appendChild(E).appendChild(k);var R=l.getComputedStyle(k);n=R.top!=="1%",x=r(R.marginLeft)===12,k.style.right="60%",f=r(R.right)===36,s=r(R.width)===36,k.style.position="absolute",c=r(k.offsetWidth/3)===12,Pt.removeChild(E),k=null}}function r(R){return Math.round(parseFloat(R))}var n,s,c,f,h,x,E=K.createElement("div"),k=K.createElement("div");!k.style||(k.style.backgroundClip="content-box",k.cloneNode(!0).style.backgroundClip="",H.clearCloneStyle=k.style.backgroundClip==="content-box",o.extend(H,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),f},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),x},scrollboxSize:function(){return e(),c},reliableTrDimensions:function(){var R,j,D,I;return h==null&&(R=K.createElement("table"),j=K.createElement("tr"),D=K.createElement("div"),R.style.cssText="position:absolute;left:-11111px;border-collapse:separate",j.style.cssText="border:1px solid",j.style.height="1px",D.style.height="9px",D.style.display="block",Pt.appendChild(R).appendChild(j).appendChild(D),I=l.getComputedStyle(j),h=parseInt(I.height,10)+parseInt(I.borderTopWidth,10)+parseInt(I.borderBottomWidth,10)===j.offsetHeight,Pt.removeChild(R)),h}}))})();function or(e,r,n){var s,c,f,h,x=e.style;return n=n||kr(e),n&&(h=n.getPropertyValue(r)||n[r],h===""&&!Rt(e)&&(h=o.style(e,r)),!H.pixelBoxStyles()&&Vr.test(h)&&Ln.test(r)&&(s=x.width,c=x.minWidth,f=x.maxWidth,x.minWidth=x.maxWidth=x.width=h,h=n.width,x.width=s,x.minWidth=c,x.maxWidth=f)),h!==void 0?h+"":h}function Li(e,r){return{get:function(){if(e()){delete this.get;return}return(this.get=r).apply(this,arguments)}}}var Ri=["Webkit","Moz","ms"],Ii=K.createElement("div").style,Mi={};function Rn(e){for(var r=e[0].toUpperCase()+e.slice(1),n=Ri.length;n--;)if(e=Ri[n]+r,e in Ii)return e}function Gr(e){var r=o.cssProps[e]||Mi[e];return r||(e in Ii?e:Mi[e]=Rn(e)||e)}var In=/^(none|table(?!-c[ea]).+)/,Ni=/^--/,Mn={position:"absolute",visibility:"hidden",display:"block"},Yr={letterSpacing:"0",fontWeight:"400"};function Gt(e,r,n){var s=Lt.exec(r);return s?Math.max(0,s[2]-(n||0))+(s[3]||"px"):r}function Pr(e,r,n,s,c,f){var h=r==="width"?1:0,x=0,E=0;if(n===(s?"border":"content"))return 0;for(;h<4;h+=2)n==="margin"&&(E+=o.css(e,n+vt[h],!0,c)),s?(n==="content"&&(E-=o.css(e,"padding"+vt[h],!0,c)),n!=="margin"&&(E-=o.css(e,"border"+vt[h]+"Width",!0,c))):(E+=o.css(e,"padding"+vt[h],!0,c),n!=="padding"?E+=o.css(e,"border"+vt[h]+"Width",!0,c):x+=o.css(e,"border"+vt[h]+"Width",!0,c));return!s&&f>=0&&(E+=Math.max(0,Math.ceil(e["offset"+r[0].toUpperCase()+r.slice(1)]-f-E-x-.5))||0),E}function Nt(e,r,n){var s=kr(e),c=!H.boxSizingReliable()||n,f=c&&o.css(e,"boxSizing",!1,s)==="border-box",h=f,x=or(e,r,s),E="offset"+r[0].toUpperCase()+r.slice(1);if(Vr.test(x)){if(!n)return x;x="auto"}return(!H.boxSizingReliable()&&f||!H.reliableTrDimensions()&&Ie(e,"tr")||x==="auto"||!parseFloat(x)&&o.css(e,"display",!1,s)==="inline")&&e.getClientRects().length&&(f=o.css(e,"boxSizing",!1,s)==="border-box",h=E in e,h&&(x=e[E])),x=parseFloat(x)||0,x+Pr(e,r,n||(f?"border":"content"),h,s,x)+"px"}o.extend({cssHooks:{opacity:{get:function(e,r){if(r){var n=or(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,r,n,s){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var c,f,h,x=mt(r),E=Ni.test(r),k=e.style;if(E||(r=Gr(x)),h=o.cssHooks[r]||o.cssHooks[x],n!==void 0){if(f=typeof n,f==="string"&&(c=Lt.exec(n))&&c[1]&&(n=$r(e,r,c),f="number"),n==null||n!==n)return;f==="number"&&!E&&(n+=c&&c[3]||(o.cssNumber[x]?"":"px")),!H.clearCloneStyle&&n===""&&r.indexOf("background")===0&&(k[r]="inherit"),(!h||!("set"in h)||(n=h.set(e,n,s))!==void 0)&&(E?k.setProperty(r,n):k[r]=n)}else return h&&"get"in h&&(c=h.get(e,!1,s))!==void 0?c:k[r]}},css:function(e,r,n,s){var c,f,h,x=mt(r),E=Ni.test(r);return E||(r=Gr(x)),h=o.cssHooks[r]||o.cssHooks[x],h&&"get"in h&&(c=h.get(e,!0,n)),c===void 0&&(c=or(e,r,s)),c==="normal"&&r in Yr&&(c=Yr[r]),n===""||n?(f=parseFloat(c),n===!0||isFinite(f)?f||0:c):c}}),o.each(["height","width"],function(e,r){o.cssHooks[r]={get:function(n,s,c){if(s)return In.test(o.css(n,"display"))&&(!n.getClientRects().length||!n.getBoundingClientRect().width)?Di(n,Mn,function(){return Nt(n,r,c)}):Nt(n,r,c)},set:function(n,s,c){var f,h=kr(n),x=!H.scrollboxSize()&&h.position==="absolute",E=x||c,k=E&&o.css(n,"boxSizing",!1,h)==="border-box",R=c?Pr(n,r,c,k,h):0;return k&&x&&(R-=Math.ceil(n["offset"+r[0].toUpperCase()+r.slice(1)]-parseFloat(h[r])-Pr(n,r,"border",!1,h)-.5)),R&&(f=Lt.exec(s))&&(f[3]||"px")!=="px"&&(n.style[r]=s,s=o.css(n,r)),Gt(n,s,R)}}}),o.cssHooks.marginLeft=Li(H.reliableMarginLeft,function(e,r){if(r)return(parseFloat(or(e,"marginLeft"))||e.getBoundingClientRect().left-Di(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),o.each({margin:"",padding:"",border:"Width"},function(e,r){o.cssHooks[e+r]={expand:function(n){for(var s=0,c={},f=typeof n=="string"?n.split(" "):[n];s<4;s++)c[e+vt[s]+r]=f[s]||f[s-2]||f[0];return c}},e!=="margin"&&(o.cssHooks[e+r].set=Gt)}),o.fn.extend({css:function(e,r){return St(this,function(n,s,c){var f,h,x={},E=0;if(Array.isArray(s)){for(f=kr(n),h=s.length;E<h;E++)x[s[E]]=o.css(n,s[E],!1,f);return x}return c!==void 0?o.style(n,s,c):o.css(n,s)},e,r,arguments.length>1)}});function Ze(e,r,n,s,c){return new Ze.prototype.init(e,r,n,s,c)}o.Tween=Ze,Ze.prototype={constructor:Ze,init:function(e,r,n,s,c,f){this.elem=e,this.prop=n,this.easing=c||o.easing._default,this.options=r,this.start=this.now=this.cur(),this.end=s,this.unit=f||(o.cssNumber[n]?"":"px")},cur:function(){var e=Ze.propHooks[this.prop];return e&&e.get?e.get(this):Ze.propHooks._default.get(this)},run:function(e){var r,n=Ze.propHooks[this.prop];return this.options.duration?this.pos=r=o.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=r=e,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ze.propHooks._default.set(this),this}},Ze.prototype.init.prototype=Ze.prototype,Ze.propHooks={_default:{get:function(e){var r;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(r=o.css(e.elem,e.prop,""),!r||r==="auto"?0:r)},set:function(e){o.fx.step[e.prop]?o.fx.step[e.prop](e):e.elem.nodeType===1&&(o.cssHooks[e.prop]||e.elem.style[Gr(e.prop)]!=null)?o.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ze.propHooks.scrollTop=Ze.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},o.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},o.fx=Ze.prototype.init,o.fx.step={};var _t,Yt,Nn=/^(?:toggle|show|hide)$/,On=/queueHooks$/;function lr(){Yt&&(K.hidden===!1&&l.requestAnimationFrame?l.requestAnimationFrame(lr):l.setTimeout(lr,o.fx.interval),o.fx.tick())}function Oi(){return l.setTimeout(function(){_t=void 0}),_t=Date.now()}function Ar(e,r){var n,s=0,c={height:e};for(r=r?1:0;s<4;s+=2-r)n=vt[s],c["margin"+n]=c["padding"+n]=e;return r&&(c.opacity=c.width=e),c}function p(e,r,n){for(var s,c=(_.tweeners[r]||[]).concat(_.tweeners["*"]),f=0,h=c.length;f<h;f++)if(s=c[f].call(n,r,e))return s}function S(e,r,n){var s,c,f,h,x,E,k,R,j="width"in r||"height"in r,D=this,I={},te=e.style,ve=e.nodeType&&sr(e),re=oe.get(e,"fxshow");n.queue||(h=o._queueHooks(e,"fx"),h.unqueued==null&&(h.unqueued=0,x=h.empty.fire,h.empty.fire=function(){h.unqueued||x()}),h.unqueued++,D.always(function(){D.always(function(){h.unqueued--,o.queue(e,"fx").length||h.empty.fire()})}));for(s in r)if(c=r[s],Nn.test(c)){if(delete r[s],f=f||c==="toggle",c===(ve?"hide":"show"))if(c==="show"&&re&&re[s]!==void 0)ve=!0;else continue;I[s]=re&&re[s]||o.style(e,s)}if(E=!o.isEmptyObject(r),!(!E&&o.isEmptyObject(I))){j&&e.nodeType===1&&(n.overflow=[te.overflow,te.overflowX,te.overflowY],k=re&&re.display,k==null&&(k=oe.get(e,"display")),R=o.css(e,"display"),R==="none"&&(k?R=k:(It([e],!0),k=e.style.display||k,R=o.css(e,"display"),It([e]))),(R==="inline"||R==="inline-block"&&k!=null)&&o.css(e,"float")==="none"&&(E||(D.done(function(){te.display=k}),k==null&&(R=te.display,k=R==="none"?"":R)),te.display="inline-block")),n.overflow&&(te.overflow="hidden",D.always(function(){te.overflow=n.overflow[0],te.overflowX=n.overflow[1],te.overflowY=n.overflow[2]})),E=!1;for(s in I)E||(re?"hidden"in re&&(ve=re.hidden):re=oe.access(e,"fxshow",{display:k}),f&&(re.hidden=!ve),ve&&It([e],!0),D.done(function(){ve||It([e]),oe.remove(e,"fxshow");for(s in I)o.style(e,s,I[s])})),E=p(ve?re[s]:0,s,D),s in re||(re[s]=E.start,ve&&(E.end=E.start,E.start=0))}}function v(e,r){var n,s,c,f,h;for(n in e)if(s=mt(n),c=r[s],f=e[n],Array.isArray(f)&&(c=f[1],f=e[n]=f[0]),n!==s&&(e[s]=f,delete e[n]),h=o.cssHooks[s],h&&"expand"in h){f=h.expand(f),delete e[s];for(n in f)n in e||(e[n]=f[n],r[n]=c)}else r[s]=c}function _(e,r,n){var s,c,f=0,h=_.prefilters.length,x=o.Deferred().always(function(){delete E.elem}),E=function(){if(c)return!1;for(var j=_t||Oi(),D=Math.max(0,k.startTime+k.duration-j),I=D/k.duration||0,te=1-I,ve=0,re=k.tweens.length;ve<re;ve++)k.tweens[ve].run(te);return x.notifyWith(e,[k,te,D]),te<1&&re?D:(re||x.notifyWith(e,[k,1,0]),x.resolveWith(e,[k]),!1)},k=x.promise({elem:e,props:o.extend({},r),opts:o.extend(!0,{specialEasing:{},easing:o.easing._default},n),originalProperties:r,originalOptions:n,startTime:_t||Oi(),duration:n.duration,tweens:[],createTween:function(j,D){var I=o.Tween(e,k.opts,j,D,k.opts.specialEasing[j]||k.opts.easing);return k.tweens.push(I),I},stop:function(j){var D=0,I=j?k.tweens.length:0;if(c)return this;for(c=!0;D<I;D++)k.tweens[D].run(1);return j?(x.notifyWith(e,[k,1,0]),x.resolveWith(e,[k,j])):x.rejectWith(e,[k,j]),this}}),R=k.props;for(v(R,k.opts.specialEasing);f<h;f++)if(s=_.prefilters[f].call(k,e,R,k.opts),s)return G(s.stop)&&(o._queueHooks(k.elem,k.opts.queue).stop=s.stop.bind(s)),s;return o.map(R,p,k),G(k.opts.start)&&k.opts.start.call(e,k),k.progress(k.opts.progress).done(k.opts.done,k.opts.complete).fail(k.opts.fail).always(k.opts.always),o.fx.timer(o.extend(E,{elem:e,anim:k,queue:k.opts.queue})),k}o.Animation=o.extend(_,{tweeners:{"*":[function(e,r){var n=this.createTween(e,r);return $r(n.elem,e,Lt.exec(r),n),n}]},tweener:function(e,r){G(e)?(r=e,e=["*"]):e=e.match(gt);for(var n,s=0,c=e.length;s<c;s++)n=e[s],_.tweeners[n]=_.tweeners[n]||[],_.tweeners[n].unshift(r)},prefilters:[S],prefilter:function(e,r){r?_.prefilters.unshift(e):_.prefilters.push(e)}}),o.speed=function(e,r,n){var s=e&&typeof e=="object"?o.extend({},e):{complete:n||!n&&r||G(e)&&e,duration:e,easing:n&&r||r&&!G(r)&&r};return o.fx.off?s.duration=0:typeof s.duration!="number"&&(s.duration in o.fx.speeds?s.duration=o.fx.speeds[s.duration]:s.duration=o.fx.speeds._default),(s.queue==null||s.queue===!0)&&(s.queue="fx"),s.old=s.complete,s.complete=function(){G(s.old)&&s.old.call(this),s.queue&&o.dequeue(this,s.queue)},s},o.fn.extend({fadeTo:function(e,r,n,s){return this.filter(sr).css("opacity",0).show().end().animate({opacity:r},e,n,s)},animate:function(e,r,n,s){var c=o.isEmptyObject(e),f=o.speed(r,n,s),h=function(){var x=_(this,o.extend({},e),f);(c||oe.get(this,"finish"))&&x.stop(!0)};return h.finish=h,c||f.queue===!1?this.each(h):this.queue(f.queue,h)},stop:function(e,r,n){var s=function(c){var f=c.stop;delete c.stop,f(n)};return typeof e!="string"&&(n=r,r=e,e=void 0),r&&this.queue(e||"fx",[]),this.each(function(){var c=!0,f=e!=null&&e+"queueHooks",h=o.timers,x=oe.get(this);if(f)x[f]&&x[f].stop&&s(x[f]);else for(f in x)x[f]&&x[f].stop&&On.test(f)&&s(x[f]);for(f=h.length;f--;)h[f].elem===this&&(e==null||h[f].queue===e)&&(h[f].anim.stop(n),c=!1,h.splice(f,1));(c||!n)&&o.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var r,n=oe.get(this),s=n[e+"queue"],c=n[e+"queueHooks"],f=o.timers,h=s?s.length:0;for(n.finish=!0,o.queue(this,e,[]),c&&c.stop&&c.stop.call(this,!0),r=f.length;r--;)f[r].elem===this&&f[r].queue===e&&(f[r].anim.stop(!0),f.splice(r,1));for(r=0;r<h;r++)s[r]&&s[r].finish&&s[r].finish.call(this);delete n.finish})}}),o.each(["toggle","show","hide"],function(e,r){var n=o.fn[r];o.fn[r]=function(s,c,f){return s==null||typeof s=="boolean"?n.apply(this,arguments):this.animate(Ar(r,!0),s,c,f)}}),o.each({slideDown:Ar("show"),slideUp:Ar("hide"),slideToggle:Ar("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){o.fn[e]=function(n,s,c){return this.animate(r,n,s,c)}}),o.timers=[],o.fx.tick=function(){var e,r=0,n=o.timers;for(_t=Date.now();r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||o.fx.stop(),_t=void 0},o.fx.timer=function(e){o.timers.push(e),o.fx.start()},o.fx.interval=13,o.fx.start=function(){Yt||(Yt=!0,lr())},o.fx.stop=function(){Yt=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(e,r){return e=o.fx&&o.fx.speeds[e]||e,r=r||"fx",this.queue(r,function(n,s){var c=l.setTimeout(n,e);s.stop=function(){l.clearTimeout(c)}})},function(){var e=K.createElement("input"),r=K.createElement("select"),n=r.appendChild(K.createElement("option"));e.type="checkbox",H.checkOn=e.value!=="",H.optSelected=n.selected,e=K.createElement("input"),e.value="t",e.type="radio",H.radioValue=e.value==="t"}();var P,T=o.expr.attrHandle;o.fn.extend({attr:function(e,r){return St(this,o.attr,e,r,arguments.length>1)},removeAttr:function(e){return this.each(function(){o.removeAttr(this,e)})}}),o.extend({attr:function(e,r,n){var s,c,f=e.nodeType;if(!(f===3||f===8||f===2)){if(typeof e.getAttribute=="undefined")return o.prop(e,r,n);if((f!==1||!o.isXMLDoc(e))&&(c=o.attrHooks[r.toLowerCase()]||(o.expr.match.bool.test(r)?P:void 0)),n!==void 0){if(n===null){o.removeAttr(e,r);return}return c&&"set"in c&&(s=c.set(e,n,r))!==void 0?s:(e.setAttribute(r,n+""),n)}return c&&"get"in c&&(s=c.get(e,r))!==null?s:(s=o.find.attr(e,r),s==null?void 0:s)}},attrHooks:{type:{set:function(e,r){if(!H.radioValue&&r==="radio"&&Ie(e,"input")){var n=e.value;return e.setAttribute("type",r),n&&(e.value=n),r}}}},removeAttr:function(e,r){var n,s=0,c=r&&r.match(gt);if(c&&e.nodeType===1)for(;n=c[s++];)e.removeAttribute(n)}}),P={set:function(e,r,n){return r===!1?o.removeAttr(e,n):e.setAttribute(n,n),n}},o.each(o.expr.match.bool.source.match(/\w+/g),function(e,r){var n=T[r]||o.find.attr;T[r]=function(s,c,f){var h,x,E=c.toLowerCase();return f||(x=T[E],T[E]=h,h=n(s,c,f)!=null?E:null,T[E]=x),h}});var N=/^(?:input|select|textarea|button)$/i,z=/^(?:a|area)$/i;o.fn.extend({prop:function(e,r){return St(this,o.prop,e,r,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[o.propFix[e]||e]})}}),o.extend({prop:function(e,r,n){var s,c,f=e.nodeType;if(!(f===3||f===8||f===2))return(f!==1||!o.isXMLDoc(e))&&(r=o.propFix[r]||r,c=o.propHooks[r]),n!==void 0?c&&"set"in c&&(s=c.set(e,n,r))!==void 0?s:e[r]=n:c&&"get"in c&&(s=c.get(e,r))!==null?s:e[r]},propHooks:{tabIndex:{get:function(e){var r=o.find.attr(e,"tabindex");return r?parseInt(r,10):N.test(e.nodeName)||z.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),H.optSelected||(o.propHooks.selected={get:function(e){var r=e.parentNode;return r&&r.parentNode&&r.parentNode.selectedIndex,null},set:function(e){var r=e.parentNode;r&&(r.selectedIndex,r.parentNode&&r.parentNode.selectedIndex)}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});function q(e){var r=e.match(gt)||[];return r.join(" ")}function V(e){return e.getAttribute&&e.getAttribute("class")||""}function X(e){return Array.isArray(e)?e:typeof e=="string"?e.match(gt)||[]:[]}o.fn.extend({addClass:function(e){var r,n,s,c,f,h,x,E=0;if(G(e))return this.each(function(k){o(this).addClass(e.call(this,k,V(this)))});if(r=X(e),r.length){for(;n=this[E++];)if(c=V(n),s=n.nodeType===1&&" "+q(c)+" ",s){for(h=0;f=r[h++];)s.indexOf(" "+f+" ")<0&&(s+=f+" ");x=q(s),c!==x&&n.setAttribute("class",x)}}return this},removeClass:function(e){var r,n,s,c,f,h,x,E=0;if(G(e))return this.each(function(k){o(this).removeClass(e.call(this,k,V(this)))});if(!arguments.length)return this.attr("class","");if(r=X(e),r.length){for(;n=this[E++];)if(c=V(n),s=n.nodeType===1&&" "+q(c)+" ",s){for(h=0;f=r[h++];)for(;s.indexOf(" "+f+" ")>-1;)s=s.replace(" "+f+" "," ");x=q(s),c!==x&&n.setAttribute("class",x)}}return this},toggleClass:function(e,r){var n=typeof e,s=n==="string"||Array.isArray(e);return typeof r=="boolean"&&s?r?this.addClass(e):this.removeClass(e):G(e)?this.each(function(c){o(this).toggleClass(e.call(this,c,V(this),r),r)}):this.each(function(){var c,f,h,x;if(s)for(f=0,h=o(this),x=X(e);c=x[f++];)h.hasClass(c)?h.removeClass(c):h.addClass(c);else(e===void 0||n==="boolean")&&(c=V(this),c&&oe.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||e===!1?"":oe.get(this,"__className__")||""))})},hasClass:function(e){var r,n,s=0;for(r=" "+e+" ";n=this[s++];)if(n.nodeType===1&&(" "+q(V(n))+" ").indexOf(r)>-1)return!0;return!1}});var ee=/\r/g;o.fn.extend({val:function(e){var r,n,s,c=this[0];return arguments.length?(s=G(e),this.each(function(f){var h;this.nodeType===1&&(s?h=e.call(this,f,o(this).val()):h=e,h==null?h="":typeof h=="number"?h+="":Array.isArray(h)&&(h=o.map(h,function(x){return x==null?"":x+""})),r=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],(!r||!("set"in r)||r.set(this,h,"value")===void 0)&&(this.value=h))})):c?(r=o.valHooks[c.type]||o.valHooks[c.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(c,"value"))!==void 0?n:(n=c.value,typeof n=="string"?n.replace(ee,""):n==null?"":n)):void 0}}),o.extend({valHooks:{option:{get:function(e){var r=o.find.attr(e,"value");return r!=null?r:q(o.text(e))}},select:{get:function(e){var r,n,s,c=e.options,f=e.selectedIndex,h=e.type==="select-one",x=h?null:[],E=h?f+1:c.length;for(f<0?s=E:s=h?f:0;s<E;s++)if(n=c[s],(n.selected||s===f)&&!n.disabled&&(!n.parentNode.disabled||!Ie(n.parentNode,"optgroup"))){if(r=o(n).val(),h)return r;x.push(r)}return x},set:function(e,r){for(var n,s,c=e.options,f=o.makeArray(r),h=c.length;h--;)s=c[h],(s.selected=o.inArray(o.valHooks.option.get(s),f)>-1)&&(n=!0);return n||(e.selectedIndex=-1),f}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(e,r){if(Array.isArray(r))return e.checked=o.inArray(o(e).val(),r)>-1}},H.checkOn||(o.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})}),H.focusin="onfocusin"in l;var ye=/^(?:focusinfocus|focusoutblur)$/,_e=function(e){e.stopPropagation()};o.extend(o.event,{trigger:function(e,r,n,s){var c,f,h,x,E,k,R,j,D=[n||K],I=U.call(e,"type")?e.type:e,te=U.call(e,"namespace")?e.namespace.split("."):[];if(f=j=h=n=n||K,!(n.nodeType===3||n.nodeType===8)&&!ye.test(I+o.event.triggered)&&(I.indexOf(".")>-1&&(te=I.split("."),I=te.shift(),te.sort()),E=I.indexOf(":")<0&&"on"+I,e=e[o.expando]?e:new o.Event(I,typeof e=="object"&&e),e.isTrigger=s?2:3,e.namespace=te.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+te.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),r=r==null?[e]:o.makeArray(r,[e]),R=o.event.special[I]||{},!(!s&&R.trigger&&R.trigger.apply(n,r)===!1))){if(!s&&!R.noBubble&&!se(n)){for(x=R.delegateType||I,ye.test(x+I)||(f=f.parentNode);f;f=f.parentNode)D.push(f),h=f;h===(n.ownerDocument||K)&&D.push(h.defaultView||h.parentWindow||l)}for(c=0;(f=D[c++])&&!e.isPropagationStopped();)j=f,e.type=c>1?x:R.bindType||I,k=(oe.get(f,"events")||Object.create(null))[e.type]&&oe.get(f,"handle"),k&&k.apply(f,r),k=E&&f[E],k&&k.apply&&nr(f)&&(e.result=k.apply(f,r),e.result===!1&&e.preventDefault());return e.type=I,!s&&!e.isDefaultPrevented()&&(!R._default||R._default.apply(D.pop(),r)===!1)&&nr(n)&&E&&G(n[I])&&!se(n)&&(h=n[E],h&&(n[E]=null),o.event.triggered=I,e.isPropagationStopped()&&j.addEventListener(I,_e),n[I](),e.isPropagationStopped()&&j.removeEventListener(I,_e),o.event.triggered=void 0,h&&(n[E]=h)),e.result}},simulate:function(e,r,n){var s=o.extend(new o.Event,n,{type:e,isSimulated:!0});o.event.trigger(s,null,r)}}),o.fn.extend({trigger:function(e,r){return this.each(function(){o.event.trigger(e,r,this)})},triggerHandler:function(e,r){var n=this[0];if(n)return o.event.trigger(e,r,n,!0)}}),H.focusin||o.each({focus:"focusin",blur:"focusout"},function(e,r){var n=function(s){o.event.simulate(r,s.target,o.event.fix(s))};o.event.special[r]={setup:function(){var s=this.ownerDocument||this.document||this,c=oe.access(s,r);c||s.addEventListener(e,n,!0),oe.access(s,r,(c||0)+1)},teardown:function(){var s=this.ownerDocument||this.document||this,c=oe.access(s,r)-1;c?oe.access(s,r,c):(s.removeEventListener(e,n,!0),oe.remove(s,r))}}});var Se=l.location,We={guid:Date.now()},Me=/\?/;o.parseXML=function(e){var r,n;if(!e||typeof e!="string")return null;try{r=new l.DOMParser().parseFromString(e,"text/xml")}catch(s){}return n=r&&r.getElementsByTagName("parsererror")[0],(!r||n)&&o.error("Invalid XML: "+(n?o.map(n.childNodes,function(s){return s.textContent}).join(`
`):e)),r};var at=/\[\]$/,Xt=/\r?\n/g,Xr=/^(?:submit|button|image|reset|file)$/i,$n=/^(?:input|select|textarea|keygen)/i;function ur(e,r,n,s){var c;if(Array.isArray(r))o.each(r,function(f,h){n||at.test(e)?s(e,h):ur(e+"["+(typeof h=="object"&&h!=null?f:"")+"]",h,n,s)});else if(!n&&be(r)==="object")for(c in r)ur(e+"["+c+"]",r[c],n,s);else s(e,r)}o.param=function(e,r){var n,s=[],c=function(f,h){var x=G(h)?h():h;s[s.length]=encodeURIComponent(f)+"="+encodeURIComponent(x==null?"":x)};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!o.isPlainObject(e))o.each(e,function(){c(this.name,this.value)});else for(n in e)ur(n,e[n],r,c);return s.join("&")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=o.prop(this,"elements");return e?o.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!o(this).is(":disabled")&&$n.test(this.nodeName)&&!Xr.test(e)&&(this.checked||!qt.test(e))}).map(function(e,r){var n=o(this).val();return n==null?null:Array.isArray(n)?o.map(n,function(s){return{name:r.name,value:s.replace(Xt,`\r
`)}}):{name:r.name,value:n.replace(Xt,`\r
`)}}).get()}});var es=/%20/g,Wn=/#.*$/,jn=/([?&])_=[^&]*/,$i=/^(.*?):[ \t]*([^\r\n]*)$/mg,Eo=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,So=/^(?:GET|HEAD)$/,_o=/^\/\//,ts={},Bn={},rs="*/".concat("*"),Hn=K.createElement("a");Hn.href=Se.href;function is(e){return function(r,n){typeof r!="string"&&(n=r,r="*");var s,c=0,f=r.toLowerCase().match(gt)||[];if(G(n))for(;s=f[c++];)s[0]==="+"?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(n)):(e[s]=e[s]||[]).push(n)}}function ns(e,r,n,s){var c={},f=e===Bn;function h(x){var E;return c[x]=!0,o.each(e[x]||[],function(k,R){var j=R(r,n,s);if(typeof j=="string"&&!f&&!c[j])return r.dataTypes.unshift(j),h(j),!1;if(f)return!(E=j)}),E}return h(r.dataTypes[0])||!c["*"]&&h("*")}function Un(e,r){var n,s,c=o.ajaxSettings.flatOptions||{};for(n in r)r[n]!==void 0&&((c[n]?e:s||(s={}))[n]=r[n]);return s&&o.extend(!0,e,s),e}function To(e,r,n){for(var s,c,f,h,x=e.contents,E=e.dataTypes;E[0]==="*";)E.shift(),s===void 0&&(s=e.mimeType||r.getResponseHeader("Content-Type"));if(s){for(c in x)if(x[c]&&x[c].test(s)){E.unshift(c);break}}if(E[0]in n)f=E[0];else{for(c in n){if(!E[0]||e.converters[c+" "+E[0]]){f=c;break}h||(h=c)}f=f||h}if(f)return f!==E[0]&&E.unshift(f),n[f]}function Co(e,r,n,s){var c,f,h,x,E,k={},R=e.dataTypes.slice();if(R[1])for(h in e.converters)k[h.toLowerCase()]=e.converters[h];for(f=R.shift();f;)if(e.responseFields[f]&&(n[e.responseFields[f]]=r),!E&&s&&e.dataFilter&&(r=e.dataFilter(r,e.dataType)),E=f,f=R.shift(),f){if(f==="*")f=E;else if(E!=="*"&&E!==f){if(h=k[E+" "+f]||k["* "+f],!h){for(c in k)if(x=c.split(" "),x[1]===f&&(h=k[E+" "+x[0]]||k["* "+x[0]],h)){h===!0?h=k[c]:k[c]!==!0&&(f=x[0],R.unshift(x[1]));break}}if(h!==!0)if(h&&e.throws)r=h(r);else try{r=h(r)}catch(j){return{state:"parsererror",error:h?j:"No conversion from "+E+" to "+f}}}}return{state:"success",data:r}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:Eo.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":rs,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,r){return r?Un(Un(e,o.ajaxSettings),r):Un(o.ajaxSettings,e)},ajaxPrefilter:is(ts),ajaxTransport:is(Bn),ajax:function(e,r){typeof e=="object"&&(r=e,e=void 0),r=r||{};var n,s,c,f,h,x,E,k,R,j,D=o.ajaxSetup({},r),I=D.context||D,te=D.context&&(I.nodeType||I.jquery)?o(I):o.event,ve=o.Deferred(),re=o.Callbacks("once memory"),qe=D.statusCode||{},Ue={},ut={},Fe="canceled",me={readyState:0,getResponseHeader:function(Te){var je;if(E){if(!f)for(f={};je=$i.exec(c);)f[je[1].toLowerCase()+" "]=(f[je[1].toLowerCase()+" "]||[]).concat(je[2]);je=f[Te.toLowerCase()+" "]}return je==null?null:je.join(", ")},getAllResponseHeaders:function(){return E?c:null},setRequestHeader:function(Te,je){return E==null&&(Te=ut[Te.toLowerCase()]=ut[Te.toLowerCase()]||Te,Ue[Te]=je),this},overrideMimeType:function(Te){return E==null&&(D.mimeType=Te),this},statusCode:function(Te){var je;if(Te)if(E)me.always(Te[me.status]);else for(je in Te)qe[je]=[qe[je],Te[je]];return this},abort:function(Te){var je=Te||Fe;return n&&n.abort(je),st(0,je),this}};if(ve.promise(me),D.url=((e||D.url||Se.href)+"").replace(_o,Se.protocol+"//"),D.type=r.method||r.type||D.method||D.type,D.dataTypes=(D.dataType||"*").toLowerCase().match(gt)||[""],D.crossDomain==null){x=K.createElement("a");try{x.href=D.url,x.href=x.href,D.crossDomain=Hn.protocol+"//"+Hn.host!=x.protocol+"//"+x.host}catch(Te){D.crossDomain=!0}}if(D.data&&D.processData&&typeof D.data!="string"&&(D.data=o.param(D.data,D.traditional)),ns(ts,D,r,me),E)return me;k=o.event&&D.global,k&&o.active++==0&&o.event.trigger("ajaxStart"),D.type=D.type.toUpperCase(),D.hasContent=!So.test(D.type),s=D.url.replace(Wn,""),D.hasContent?D.data&&D.processData&&(D.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(D.data=D.data.replace(es,"+")):(j=D.url.slice(s.length),D.data&&(D.processData||typeof D.data=="string")&&(s+=(Me.test(s)?"&":"?")+D.data,delete D.data),D.cache===!1&&(s=s.replace(jn,"$1"),j=(Me.test(s)?"&":"?")+"_="+We.guid+++j),D.url=s+j),D.ifModified&&(o.lastModified[s]&&me.setRequestHeader("If-Modified-Since",o.lastModified[s]),o.etag[s]&&me.setRequestHeader("If-None-Match",o.etag[s])),(D.data&&D.hasContent&&D.contentType!==!1||r.contentType)&&me.setRequestHeader("Content-Type",D.contentType),me.setRequestHeader("Accept",D.dataTypes[0]&&D.accepts[D.dataTypes[0]]?D.accepts[D.dataTypes[0]]+(D.dataTypes[0]!=="*"?", "+rs+"; q=0.01":""):D.accepts["*"]);for(R in D.headers)me.setRequestHeader(R,D.headers[R]);if(D.beforeSend&&(D.beforeSend.call(I,me,D)===!1||E))return me.abort();if(Fe="abort",re.add(D.complete),me.done(D.success),me.fail(D.error),n=ns(Bn,D,r,me),!n)st(-1,"No Transport");else{if(me.readyState=1,k&&te.trigger("ajaxSend",[me,D]),E)return me;D.async&&D.timeout>0&&(h=l.setTimeout(function(){me.abort("timeout")},D.timeout));try{E=!1,n.send(Ue,st)}catch(Te){if(E)throw Te;st(-1,Te)}}function st(Te,je,Jr,Wi){var ct,cr,fr,ot,Qt,bt=je;E||(E=!0,h&&l.clearTimeout(h),n=void 0,c=Wi||"",me.readyState=Te>0?4:0,ct=Te>=200&&Te<300||Te===304,Jr&&(ot=To(D,me,Jr)),!ct&&o.inArray("script",D.dataTypes)>-1&&o.inArray("json",D.dataTypes)<0&&(D.converters["text script"]=function(){}),ot=Co(D,ot,me,ct),ct?(D.ifModified&&(Qt=me.getResponseHeader("Last-Modified"),Qt&&(o.lastModified[s]=Qt),Qt=me.getResponseHeader("etag"),Qt&&(o.etag[s]=Qt)),Te===204||D.type==="HEAD"?bt="nocontent":Te===304?bt="notmodified":(bt=ot.state,cr=ot.data,fr=ot.error,ct=!fr)):(fr=bt,(Te||!bt)&&(bt="error",Te<0&&(Te=0))),me.status=Te,me.statusText=(je||bt)+"",ct?ve.resolveWith(I,[cr,bt,me]):ve.rejectWith(I,[me,bt,fr]),me.statusCode(qe),qe=void 0,k&&te.trigger(ct?"ajaxSuccess":"ajaxError",[me,D,ct?cr:fr]),re.fireWith(I,[me,bt]),k&&(te.trigger("ajaxComplete",[me,D]),--o.active||o.event.trigger("ajaxStop")))}return me},getJSON:function(e,r,n){return o.get(e,r,n,"json")},getScript:function(e,r){return o.get(e,void 0,r,"script")}}),o.each(["get","post"],function(e,r){o[r]=function(n,s,c,f){return G(s)&&(f=f||c,c=s,s=void 0),o.ajax(o.extend({url:n,type:r,dataType:f,data:s,success:c},o.isPlainObject(n)&&n))}}),o.ajaxPrefilter(function(e){var r;for(r in e.headers)r.toLowerCase()==="content-type"&&(e.contentType=e.headers[r]||"")}),o._evalUrl=function(e,r,n){return o.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(s){o.globalEval(s,r,n)}})},o.fn.extend({wrapAll:function(e){var r;return this[0]&&(G(e)&&(e=e.call(this[0])),r=o(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&r.insertBefore(this[0]),r.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this},wrapInner:function(e){return G(e)?this.each(function(r){o(this).wrapInner(e.call(this,r))}):this.each(function(){var r=o(this),n=r.contents();n.length?n.wrapAll(e):r.append(e)})},wrap:function(e){var r=G(e);return this.each(function(n){o(this).wrapAll(r?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){o(this).replaceWith(this.childNodes)}),this}}),o.expr.pseudos.hidden=function(e){return!o.expr.pseudos.visible(e)},o.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},o.ajaxSettings.xhr=function(){try{return new l.XMLHttpRequest}catch(e){}};var ko={0:200,1223:204},Qr=o.ajaxSettings.xhr();H.cors=!!Qr&&"withCredentials"in Qr,H.ajax=Qr=!!Qr,o.ajaxTransport(function(e){var r,n;if(H.cors||Qr&&!e.crossDomain)return{send:function(s,c){var f,h=e.xhr();if(h.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(f in e.xhrFields)h[f]=e.xhrFields[f];e.mimeType&&h.overrideMimeType&&h.overrideMimeType(e.mimeType),!e.crossDomain&&!s["X-Requested-With"]&&(s["X-Requested-With"]="XMLHttpRequest");for(f in s)h.setRequestHeader(f,s[f]);r=function(x){return function(){r&&(r=n=h.onload=h.onerror=h.onabort=h.ontimeout=h.onreadystatechange=null,x==="abort"?h.abort():x==="error"?typeof h.status!="number"?c(0,"error"):c(h.status,h.statusText):c(ko[h.status]||h.status,h.statusText,(h.responseType||"text")!=="text"||typeof h.responseText!="string"?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=r(),n=h.onerror=h.ontimeout=r("error"),h.onabort!==void 0?h.onabort=n:h.onreadystatechange=function(){h.readyState===4&&l.setTimeout(function(){r&&n()})},r=r("abort");try{h.send(e.hasContent&&e.data||null)}catch(x){if(r)throw x}},abort:function(){r&&r()}}}),o.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return o.globalEval(e),e}}}),o.ajaxPrefilter("script",function(e){e.cache===void 0&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),o.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var r,n;return{send:function(s,c){r=o("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(f){r.remove(),n=null,f&&c(f.type==="error"?404:200,f.type)}),K.head.appendChild(r[0])},abort:function(){n&&n()}}}});var as=[],zn=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=as.pop()||o.expando+"_"+We.guid++;return this[e]=!0,e}}),o.ajaxPrefilter("json jsonp",function(e,r,n){var s,c,f,h=e.jsonp!==!1&&(zn.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&zn.test(e.data)&&"data");if(h||e.dataTypes[0]==="jsonp")return s=e.jsonpCallback=G(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,h?e[h]=e[h].replace(zn,"$1"+s):e.jsonp!==!1&&(e.url+=(Me.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return f||o.error(s+" was not called"),f[0]},e.dataTypes[0]="json",c=l[s],l[s]=function(){f=arguments},n.always(function(){c===void 0?o(l).removeProp(s):l[s]=c,e[s]&&(e.jsonpCallback=r.jsonpCallback,as.push(s)),f&&G(c)&&c(f[0]),f=c=void 0}),"script"}),H.createHTMLDocument=function(){var e=K.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),o.parseHTML=function(e,r,n){if(typeof e!="string")return[];typeof r=="boolean"&&(n=r,r=!1);var s,c,f;return r||(H.createHTMLDocument?(r=K.implementation.createHTMLDocument(""),s=r.createElement("base"),s.href=K.location.href,r.head.appendChild(s)):r=K),c=tt.exec(e),f=!n&&[],c?[r.createElement(c[1])]:(c=zr([e],r,f),f&&f.length&&o(f).remove(),o.merge([],c.childNodes))},o.fn.load=function(e,r,n){var s,c,f,h=this,x=e.indexOf(" ");return x>-1&&(s=q(e.slice(x)),e=e.slice(0,x)),G(r)?(n=r,r=void 0):r&&typeof r=="object"&&(c="POST"),h.length>0&&o.ajax({url:e,type:c||"GET",dataType:"html",data:r}).done(function(E){f=arguments,h.html(s?o("<div>").append(o.parseHTML(E)).find(s):E)}).always(n&&function(E,k){h.each(function(){n.apply(this,f||[E.responseText,k,E])})}),this},o.expr.pseudos.animated=function(e){return o.grep(o.timers,function(r){return e===r.elem}).length},o.offset={setOffset:function(e,r,n){var s,c,f,h,x,E,k,R=o.css(e,"position"),j=o(e),D={};R==="static"&&(e.style.position="relative"),x=j.offset(),f=o.css(e,"top"),E=o.css(e,"left"),k=(R==="absolute"||R==="fixed")&&(f+E).indexOf("auto")>-1,k?(s=j.position(),h=s.top,c=s.left):(h=parseFloat(f)||0,c=parseFloat(E)||0),G(r)&&(r=r.call(e,n,o.extend({},x))),r.top!=null&&(D.top=r.top-x.top+h),r.left!=null&&(D.left=r.left-x.left+c),"using"in r?r.using.call(e,D):j.css(D)}},o.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(c){o.offset.setOffset(this,e,c)});var r,n,s=this[0];if(!!s)return s.getClientRects().length?(r=s.getBoundingClientRect(),n=s.ownerDocument.defaultView,{top:r.top+n.pageYOffset,left:r.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var e,r,n,s=this[0],c={top:0,left:0};if(o.css(s,"position")==="fixed")r=s.getBoundingClientRect();else{for(r=this.offset(),n=s.ownerDocument,e=s.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&o.css(e,"position")==="static";)e=e.parentNode;e&&e!==s&&e.nodeType===1&&(c=o(e).offset(),c.top+=o.css(e,"borderTopWidth",!0),c.left+=o.css(e,"borderLeftWidth",!0))}return{top:r.top-c.top-o.css(s,"marginTop",!0),left:r.left-c.left-o.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&o.css(e,"position")==="static";)e=e.offsetParent;return e||Pt})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var n=r==="pageYOffset";o.fn[e]=function(s){return St(this,function(c,f,h){var x;if(se(c)?x=c:c.nodeType===9&&(x=c.defaultView),h===void 0)return x?x[r]:c[f];x?x.scrollTo(n?x.pageXOffset:h,n?h:x.pageYOffset):c[f]=h},e,s,arguments.length)}}),o.each(["top","left"],function(e,r){o.cssHooks[r]=Li(H.pixelPosition,function(n,s){if(s)return s=or(n,r),Vr.test(s)?o(n).position()[r]+"px":s})}),o.each({Height:"height",Width:"width"},function(e,r){o.each({padding:"inner"+e,content:r,"":"outer"+e},function(n,s){o.fn[s]=function(c,f){var h=arguments.length&&(n||typeof c!="boolean"),x=n||(c===!0||f===!0?"margin":"border");return St(this,function(E,k,R){var j;return se(E)?s.indexOf("outer")===0?E["inner"+e]:E.document.documentElement["client"+e]:E.nodeType===9?(j=E.documentElement,Math.max(E.body["scroll"+e],j["scroll"+e],E.body["offset"+e],j["offset"+e],j["client"+e])):R===void 0?o.css(E,k,x):o.style(E,k,R,x)},r,h?c:void 0,h)}})}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,r){o.fn[r]=function(n){return this.on(r,n)}}),o.fn.extend({bind:function(e,r,n){return this.on(e,null,r,n)},unbind:function(e,r){return this.off(e,null,r)},delegate:function(e,r,n,s){return this.on(r,e,n,s)},undelegate:function(e,r,n){return arguments.length===1?this.off(e,"**"):this.off(r,e||"**",n)},hover:function(e,r){return this.mouseenter(e).mouseleave(r||e)}}),o.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){o.fn[r]=function(n,s){return arguments.length>0?this.on(r,null,n,s):this.trigger(r)}});var Po=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;o.proxy=function(e,r){var n,s,c;if(typeof r=="string"&&(n=e[r],r=e,e=n),!!G(e))return s=u.call(arguments,2),c=function(){return e.apply(r||this,s.concat(u.call(arguments)))},c.guid=e.guid=e.guid||o.guid++,c},o.holdReady=function(e){e?o.readyWait++:o.ready(!0)},o.isArray=Array.isArray,o.parseJSON=JSON.parse,o.nodeName=Ie,o.isFunction=G,o.isWindow=se,o.camelCase=mt,o.type=be,o.now=Date.now,o.isNumeric=function(e){var r=o.type(e);return(r==="number"||r==="string")&&!isNaN(e-parseFloat(e))},o.trim=function(e){return e==null?"":(e+"").replace(Po,"")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return o});var Ao=l.jQuery,Fo=l.$;return o.noConflict=function(e){return l.$===o&&(l.$=Fo),e&&l.jQuery===o&&(l.jQuery=Ao),o},typeof t=="undefined"&&(l.jQuery=l.$=o),o})});var Wa=Zn(oa());var Ki=class{constructor(t,i){t=t||[],this.lines=t,this.text=i,this.offset2loc=new Map,this.line2offset=new Map;for(var a of t)a.offset>=0&&(this.offset2loc[a.offset]||(this.offset2loc[a.offset]=a),this.line2offset[a.line]||(this.line2offset[a.line]=a.offset))}findLineForOffset(t,i){if(this.offset2loc)for(var a=0;a<=i;a++){var u=this.offset2loc[t];if(u)return u;t--}return null}lineCount(){return this.lines.length}};function Fs(l){return"errors"in l}function Ds(l){return"output"in l}var Ls=Zn(oa()),la=class{constructor(t){this.preset_id=ht(t)}async getRemoteFile(t){return new Promise((i,a)=>Qi(t,i,gr(t)?"arraybuffer":"text"))}async getFileData(t){var i="presets/"+this.preset_id+"/"+t,a=await this.getRemoteFile(i);return a&&console.log("read",i,a.length,"bytes"),a}async setFileData(t,i){}};var ni=class{constructor(t,i){this.basefs=t,this.overlayfs=i}async getFileData(t){var i=await this.overlayfs.getFileData(t);return i==null?this.basefs.getFileData(t):i}async setFileData(t,i){return await this.overlayfs.setFileData(t,i),this.basefs.setFileData(t,i)}},ua=class{constructor(t){this.store=t}async getFileData(t){return this.store.getItem(t)}async setFileData(t,i){return this.store.setItem(t,i)}};var ca=class{constructor(t,i,a,u){this.filedata={};this.pendingWorkerMessages=0;this.tools_preloaded={};this.isCompiling=!1;this.filename2path={};this.worker=t,this.platform_id=i,this.platform=a,this.filesystem=u,t.onmessage=d=>{this.receiveWorkerMessage(d.data)}}receiveWorkerMessage(t){var i=this.pendingWorkerMessages>1;i?(this.sendBuild(),this.pendingWorkerMessages=1):(this.callbackBuildStatus&&this.callbackBuildStatus(!1),this.isCompiling||(console.log(this.pendingWorkerMessages),console.trace()),this.isCompiling=!1,this.pendingWorkerMessages=0),t&&Ds(t)?this.processBuildResult(t):Fs(t)&&this.processBuildListings(t),this.callbackBuildResult(t)}preloadWorker(t){var i=this.platform.getToolForFilename(t);i&&!this.tools_preloaded[i]&&(this.worker.postMessage({preload:i,platform:this.platform_id}),this.tools_preloaded[i]=!0)}pushAllFiles(t,i){t.push(i);var a=ea(this.mainPath);a.length>0&&a!="local"&&t.push(a+"/"+i)}parseIncludeDependencies(t){let i=[],a;if(this.platform_id.startsWith("script")){let u=/\b\w+[.]read\(["'](.+?)["']/gmi;for(;a=u.exec(t);)a[1]&&a[1].indexOf(":/")<0&&this.pushAllFiles(i,a[1])}else if(this.platform_id.startsWith("verilog")){let u=/^\s*(`include|[.]include)\s+"(.+?)"/gmi;for(;a=u.exec(t);)this.pushAllFiles(i,a[2]);let d=/^\s*\$(include|\$dofile|\$write_image_in_table)\('(.+?)'/gmi;for(;a=d.exec(t);)this.pushAllFiles(i,a[2]);let m=/^\s*([.]arch)\s+(\w+)/gmi;for(;a=m.exec(t);)this.pushAllFiles(i,a[2]+".json");let w=/\$readmem[bh]\("(.+?)"/gmi;for(;a=w.exec(t);)this.pushAllFiles(i,a[1])}else{let u=/^\s*[.#%]?(include|incbin)\s+"(.+?)"/gmi;for(;a=u.exec(t);)this.pushAllFiles(i,a[2]);let d=/^\s*([;']|[/][/])#resource\s+"(.+?)"/gm;for(;a=d.exec(t);)this.pushAllFiles(i,a[2]);let m=/^\s+(USE|ASM)\s+(\S+[.]\S+)/gm;for(;a=m.exec(t);)this.pushAllFiles(i,a[2]);let w=/^\s*(import|embed)\s*"(.+?)";/gmi;for(;a=w.exec(t);)a[1]=="import"?this.pushAllFiles(i,a[2]+".wiz"):this.pushAllFiles(i,a[2]);let b=/^\s*(import)\s*"(.+?)"/gmi;for(;a=b.exec(t);)this.pushAllFiles(i,a[2])}return i}parseLinkDependencies(t){let i=[],a;if(!this.platform_id.startsWith("verilog")){let u=/^\s*([;]|[/][/])#link\s+"(.+?)"/gm;for(;a=u.exec(t);)this.pushAllFiles(i,a[2])}return i}loadFileDependencies(t){let i=this.parseIncludeDependencies(t),a=this.parseLinkDependencies(t),u=i.concat(a);return this.loadFiles(u).then(d=>{if(d)for(let m of d)m.link=a.indexOf(m.path)>=0;return d})}okToSend(){return this.pendingWorkerMessages++==0&&this.mainPath!=null}updateFileInStore(t,i){this.filesystem.setFileData(t,i)}buildWorkerMessage(t){this.preloadWorker(this.mainPath);var i={updates:[],buildsteps:[]},a=this.stripLocalPath(this.mainPath),u=this.getFile(this.mainPath),d=[];i.updates.push({path:a,data:u}),this.filename2path[a]=this.mainPath;for(var m of t)m.link||(i.updates.push({path:m.filename,data:m.data}),d.push(m.filename)),this.filename2path[m.filename]=m.path;i.buildsteps.push({path:a,files:[a].concat(d),platform:this.platform_id,tool:this.platform.getToolForFilename(this.mainPath),mainfile:!0});for(var m of t)m.data&&m.link&&(this.preloadWorker(m.filename),i.updates.push({path:m.filename,data:m.data}),i.buildsteps.push({path:m.filename,files:[m.filename].concat(d),platform:this.platform_id,tool:this.platform.getToolForFilename(m.path)}));return this.dataItems&&(i.setitems=this.dataItems),i}async loadFiles(t){var i=[],a=(m,w)=>{i.push({path:m,filename:this.stripLocalPath(m),link:!0,data:w})};for(var u of t)if(u in this.filedata){var d=this.filedata[u];d&&a(u,d)}else{var d=await this.filesystem.getFileData(u);d?(this.filedata[u]=d,a(u,d)):this.filedata[u]=null}return i}getFile(t){return this.filedata[t]}iterateFiles(t){for(var i in this.filedata)t(i,this.getFile(i))}sendBuild(){if(!this.mainPath)throw Error("need to call setMainFile first");var t=this.getFile(this.mainPath);if(t instanceof Uint8Array){this.isCompiling=!0,this.receiveWorkerMessage({output:t,errors:[],listings:null,symbolmap:null,params:{}});return}var i=typeof t=="string"?t:"";return this.loadFileDependencies(i).then(a=>{a||(a=[]);var u=this.buildWorkerMessage(a);this.worker.postMessage(u),this.isCompiling=!0})}updateFile(t,i){this.filedata[t]!=i&&(this.updateFileInStore(t,i),this.filedata[t]=i,this.okToSend()&&(this.callbackBuildStatus&&this.callbackBuildStatus(!0),this.sendBuild()))}setMainFile(t){this.mainPath=t,this.callbackBuildStatus&&this.callbackBuildStatus(!0),this.sendBuild()}processBuildListings(t){if(t.listings){this.listings=t.listings;for(var i in this.listings){var a=this.listings[i];a.lines&&(a.sourcefile=new Ki(a.lines,a.text)),a.asmlines&&(a.assemblyfile=new Ki(a.asmlines,a.text))}}}processBuildResult(t){this.processBuildListings(t),this.processBuildSegments(t)}processBuildSegments(t){var i=this.platform.getMemoryMap&&this.platform.getMemoryMap().main||[];t.segments&&(i=i.concat(t.segments||[])),i.sort((a,u)=>a.start-u.start),this.segments=i}getListings(){return this.listings}getListingForFile(t){var i=xt(this.stripLocalPath(t)),a=this.getListings(),u=null;for(var d in a)if(d==t)return a[d];for(var d in a)if(u=d,xt(d)==i)return a[d]}stripLocalPath(t){if(this.mainPath){var i=ea(this.mainPath);i!=""&&t.startsWith(i)&&(t=t.substring(i.length+1))}return t}updateDataItems(t){this.dataItems=t,this.okToSend()&&this.sendBuild()}};function fa(l){var t=Ls.default.createInstance({name:"__"+l,version:2});return t}var da=Is(),ha=class{constructor(t,i){this.id2window={};this.id2createfn={};this.id2showfn={};this.id2div={};this.containerdiv=t,this.project=i,this.undofiles=[]}isWindow(t){return this.id2createfn[t]!=null}setCreateFunc(t,i){this.id2createfn[t]=i}setShowFunc(t,i){this.id2showfn[t]=i}create(t){var i=this.id2window[t];i||(console.log("creating window",t),i=this.id2window[t]=this.id2createfn[t](t));var a=this.id2div[t];return a||(a=this.id2div[t]=i.createDiv(this.containerdiv),da(a).hide()),i}createOrShow(t,i){var a=this.create(t),u=this.id2div[t];return this.activewnd!=a?(this.activediv&&da(this.activediv).hide(),this.activewnd&&this.activewnd.setVisible&&this.activewnd.setVisible(!1),this.activediv=u,this.activewnd=a,da(u).show(),this.refresh(!0),this.refreshErrors(),a.setVisible&&a.setVisible(!0),this.id2showfn[t]&&this.id2showfn[t](t,a)):this.refresh(i),this.activeid=t,a}put(t,i){this.id2window[t]=i}refresh(t){this.activewnd&&this.activewnd.refresh&&this.activewnd.refresh(t)}tick(){this.activewnd&&this.activewnd.tick&&this.activewnd.tick()}setErrors(t){this.lasterrors=t,this.refreshErrors()}refreshErrors(){this.activewnd&&this.activewnd.markErrors&&(this.lasterrors&&this.lasterrors.length?this.activewnd.markErrors(this.lasterrors):this.activewnd.clearErrors())}getActive(){return this.activewnd}getActiveID(){return this.activeid}getCurrentText(){if(this.activewnd&&this.activewnd.getValue)return this.activewnd.getValue();bootbox.alert("Please switch to an editor window.")}resize(){this.activeid&&this.activewnd&&this.activewnd.recreateOnResize&&(this.activewnd=null,this.id2window[this.activeid]=null,this.id2div[this.activeid]=null,this.createOrShow(this.activeid))}updateFile(t,i){var a=this.id2window[t];a&&a.setText&&typeof i=="string"?(a.setText(i),this.undofiles.push(t)):this.project.updateFile(t,i)}undoStep(){var t=this.undofiles.pop(),i=this.id2window[t];i&&i.undoStep?i.undoStep():bootbox.alert("No more steps to undo.")}updateAllOpenWindows(t){for(var i in this.id2window){var a=this.id2window[i];a&&a.setText&&t.getItem(i).then(u=>{this.updateFile(i,u)})}}findWindowWithFilePrefix(t){t=yt(xt(t));for(var i in this.id2createfn)if(!(i.toLowerCase().endsWith(".h")||i.toLowerCase().endsWith(".inc")||i.toLowerCase().endsWith(".bas"))&&yt(xt(i))==t)return i;return null}};var Go=`$NAME
=====

[Open this project in 8bitworkshop](http://8bitworkshop.com/redir.html?platform=$PLATFORM&githubURL=$GITHUBURL&file=$MAINFILE).
`;function ai(){for(var l={},t=0;t<localStorage.length;t++){var i=localStorage.key(t);if(i.startsWith("__repo__")){var a=JSON.parse(localStorage.getItem(i)),u=i.substring("__repo__".length);l[u]=a}}return l}function en(l){var t=l.split("/",8);return t.length<5||t[0]!="https:"||t[2]!="github.com"||t[5]&&t[5]!="tree"?null:{user:t[3],repo:t[4],repopath:t[3]+"/"+t[4],branch:t[6],subtreepath:t[7]}}var pa=class{constructor(t,i,a,u){this.githubCons=t,this.githubToken=i,this.store=a,this.project=u,this.recreateGithub()}recreateGithub(){this.github=new this.githubCons({token:this.githubToken})}login(){if(this.githubToken&&this.githubToken.length)return new Promise((i,a)=>{i()});var t=new firebase.auth.GithubAuthProvider;return t.addScope("repo"),firebase.auth().signInWithPopup(t).then(i=>{this.githubToken=i.credential.accessToken;var a=i.user;this.recreateGithub(),document.cookie="__github_key="+this.githubToken+";path=/;max-age=31536000",console.log("Stored GitHub OAUTH key")})}logout(){return this.githubToken&&this.githubToken.length?firebase.auth().signOut().then(()=>{document.cookie="__github_key=;path=/;max-age=0",this.githubToken=null,this.recreateGithub()}):new Promise((t,i)=>{t()})}isFileIgnored(t){return t=t.toUpperCase(),!!(t.startsWith("LICENSE")||t.startsWith("README")||t.startsWith("."))}async getGithubSession(t){var i=en(t);if(!i)throw new Error("Please enter a valid GitHub URL.");var a=ai()[i.repopath],u=i.branch||a&&a.branch,d=this.github.repos(i.user,i.repo);try{u=(await d.fetch()).defaultBranch||"master"}catch(w){console.log("could not fetch default branch: "+w),u="main"}console.log("branch =",u);var m={url:t,user:i.user,reponame:i.repo,repopath:i.repopath,branch:u,subtreepath:i.subtreepath,prefix:"",repo:d,platform_id:this.project?this.project.platform_id:a?a.platform_id:null};return m}getGithubHEADTree(t){var i;return this.getGithubSession(t).then(a=>(i=a,i.repo.git.refs.heads(i.branch).fetch())).then(a=>(i.head=a,i.sha=a.object.sha,i.repo.git.trees(i.sha).fetch())).then(a=>{if(i.subtreepath){for(let u of a.tree)if(u.type=="tree"&&u.path==i.subtreepath&&u.sha)return i.repo.git.trees(u.sha).fetch();throw Error("Cannot find subtree '"+i.subtreepath+"' in tree "+a.sha)}return a}).then(a=>(i.tree=a,i))}bind(t,i){var a="__repo__"+t.repopath;if(i){var u={url:t.url,branch:t.branch,platform_id:t.platform_id,mainPath:t.mainPath,sha:t.sha};console.log("storing",u),localStorage.setItem(a,JSON.stringify(u))}else localStorage.removeItem(a)}import(t){var i;return this.getGithubSession(t).then(a=>(i=a,i.repo.contents("README.md").read())).catch(a=>(console.log(a),console.log("no README.md found"),i.repo.fetch().then(u=>""))).then(a=>{var u;if(u=/8bitworkshop.com[^)]+file=([^)&]+)/.exec(a),u&&u[1]&&(console.log("main path: '"+u[1]+"'"),i.mainPath=u[1]),u=/8bitworkshop.com[^)]+platform=([A-Za-z0-9._\-]+)/.exec(a),u){if(console.log("platform id: '"+u[1]+"'"),i.platform_id&&!i.platform_id.startsWith(u[1]))throw Error("Platform mismatch: Repository is "+u[1]+", you have "+this.project.platform_id+" selected.");i.platform_id=u[1]}return this.bind(i,!0),i})}pull(t,i){var a;return this.getGithubHEADTree(t).then(u=>{a=u;let d=[];return a.paths=[],a.tree.tree.forEach(m=>{if(console.log(m.path,m.type,m.size),a.paths.push(m.path),m.type=="blob"&&!this.isFileIgnored(m.path)){var w=a.repo.git.blobs(m.sha).fetch().then(b=>{var L=a.prefix+m.path,U=m.size,de=b.encoding,W=b.content;if(b.encoding=="base64"){var H=Vi(atob(W)),G=gr(m.path,H);W=G?H:Yi(H)}return b.size!=W.length&&(W=W.slice(0,b.size)),(i||this.store).setItem(L,W)});d.push(w)}else console.log("ignoring "+m.path)}),Promise.all(d)}).then(u=>a)}importAndPull(t){return this.import(t).then(i=>this.pull(t))}publish(t,i,a,u){var d,m=this.project.platform_id,w=this.project.stripLocalPath(this.project.mainPath);return this.github.user.repos.create({name:t,description:i,private:u,auto_init:!1,license_template:a}).then(b=>{d=b;var L=Go;L=L.replace(/\$NAME/g,encodeURIComponent(t)),L=L.replace(/\$PLATFORM/g,encodeURIComponent(m)),L=L.replace(/\$GITHUBURL/g,encodeURIComponent(d.htmlUrl)),L=L.replace(/\$MAINFILE/g,encodeURIComponent(w));var U={message:"8bitworkshop: updated metadata in README.md",content:btoa(L)};return d.contents("README.md").add(U)}).then(()=>this.getGithubSession(d.htmlUrl))}commit(t,i,a){var u;return i||(i="updated from 8bitworkshop.com"),this.getGithubHEADTree(t).then(d=>{if(u=d,u.subtreepath)throw Error("Sorry, right now you can only commit files to the root directory of a repository.");return Promise.all(a.map(m=>typeof m.data=="string"?u.repo.git.blobs.create({content:m.data,encoding:"utf-8"}):u.repo.git.blobs.create({content:btoa(Gi(m.data)),encoding:"base64"})))}).then(d=>u.repo.git.trees.create({tree:a.map((m,w)=>({path:m.path,mode:"100644",type:"blob",sha:d[w].sha})),base_tree:u.tree.sha})).then(d=>u.repo.git.commits.create({message:i,tree:d.sha,parents:[u.head.object.sha]})).then(d=>u.repo.commits(d.sha).fetch()).then(d=>(u.commit=d,u))}push(t){return t.head.update({sha:t.commit.sha}).then(i=>t)}deleteRepository(t){return this.getGithubSession(t).then(i=>i.repo.remove())}};var si=window.matchMedia&&window.matchMedia("only screen and (max-width: 760px)").matches;function Wt(l,t){var i=$(document.createElement("div"));return l&&i.appendTo(l),t&&i.addClass(t),i}function Ms(l,t){var i=l.charCoords({line:t,ch:0},"local").top,a=l.getScrollerElement().offsetHeight/2;l.scrollTo(null,i-a-5)}function Ns(l,t){var i=document.createElement("span");return i.setAttribute("class",t),i.appendChild(document.createTextNode(l)),i}var Yo=200,ma={default:{theme:"mbo"},"6502":{isAsm:!0},z80:{isAsm:!0},jsasm:{isAsm:!0},gas:{isAsm:!0},vasm:{isAsm:!0},inform6:{theme:"cobalt"},markdown:{lineWrap:!0},fastbasic:{noGutters:!0},basic:{noLineNumbers:!0,noGutters:!0},ecs:{theme:"mbo",isAsm:!0}},Os={input:null},oi=class{constructor(t,i){this.updateTimer=null;this.dirtylisting=!0;this.errormsgs=[];this.errorwidgets=[];this.errormarks=[];this.path=t,this.mode=i}createDiv(t){var i=document.createElement("div");i.setAttribute("class","editor"),t.appendChild(i);var a=fe.getFile(this.path),u=a&&this.mode=="verilog"&&/__asm\b([\s\S]+?)\b__endasm\b/.test(a);return this.newEditor(i,u),a&&(this.setText(a),this.editor.setSelection({line:0,ch:0},{line:0,ch:0},{scroll:!0})),this.setupEditor(),i}setVisible(t){t&&this.editor.focus()}newEditor(t,i){var a=ma[this.mode]||ma.default,u=i||a.isAsm,d=!!a.lineWrap,m=a.theme||ma.default.theme,w=!a.noLineNumbers&&!si;Z.embed&&(w=!1,u=!1);var b=["CodeMirror-linenumbers","gutter-offset","gutter-info"];u&&(b=["CodeMirror-linenumbers","gutter-offset","gutter-bytes","gutter-clock","gutter-info"]),(a.noGutters||si)&&(b=["gutter-info"]),this.editor=CodeMirror(t,{theme:m,lineNumbers:w,matchBrackets:!0,tabSize:8,indentAuto:!0,lineWrapping:d,gutters:b})}editorChanged(){clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{fe.updateFile(this.path,this.editor.getValue())},300),this.markHighlight&&(this.markHighlight.clear(),this.markHighlight=null)}setupEditor(){this.editor.on("changes",(t,i)=>{this.editorChanged()}),this.editor.on("cursorActivity",t=>{this.inspectUnderCursor()}),this.editor.on("gutterClick",(t,i)=>{this.toggleBreakpoint(i)}),this.editor.setOption("mode",this.mode),this.editor.on("beforeChange",(t,i)=>{Os.input&&i.text&&(i.text=i.text.map(Os.input))})}inspectUnderCursor(){var t=this.editor.getCursor(!0),i=this.editor.getCursor(!1);if(t.line==i.line&&t.ch<i.ch&&i.ch-t.ch<80){var a=this.editor.getSelection();this.inspect(a)}else this.inspect(null)}inspect(t){var i;if(F.inspect&&(i=F.inspect(t)),this.inspectWidget&&(this.inspectWidget.clear(),this.inspectWidget=null),i){var a=Ns(i,"tooltipinfoline"),u=this.editor.getCursor().line;this.inspectWidget=this.editor.addLineWidget(u,a,{above:!1})}}setText(t){var i,a,u=this.editor.getValue();u!=t&&(this.editor.setValue(t),u==""&&this.editor.clearHistory())}insertText(t){var i=this.editor.getCursor();this.editor.replaceRange(t,i,i)}highlightLines(t,i){var a="hilite-span",u={className:a,inclusiveLeft:!0};this.markHighlight=this.editor.markText({line:t,ch:0},{line:i,ch:0},u),this.editor.scrollIntoView({from:{line:t,ch:0},to:{line:i,ch:0}})}replaceSelection(t,i,a){this.editor.setSelection(this.editor.posFromIndex(t),this.editor.posFromIndex(i)),this.editor.replaceSelection(a)}getValue(){return this.editor.getValue()}getPath(){return this.path}addError(t){if(!t.path||this.path.endsWith(t.path)){var i=this.editor.lineCount(),a=t.line-1;if((isNaN(a)||a<0||a>=i)&&(a=0),this.addErrorMarker(a,t.msg),t.start!=null){var u={className:"mark-error",inclusiveLeft:!0},d={line:a,ch:t.end?t.start:t.start-1},m={line:a,ch:t.end?t.end:t.start},w=this.editor.markText(d,m,u);this.errormarks.push(w)}}}addErrorMarker(t,i){var a=document.createElement("div");a.setAttribute("class","tooltipbox tooltiperror"),a.appendChild(document.createTextNode("\u24CD")),this.editor.setGutterMarker(t,"gutter-info",a),this.errormsgs.push({line:t,msg:i}),$(a).mouseover(u=>{this.expandErrors()})}addErrorLine(t,i){var a=Ns(i,"tooltiperrorline");this.errorwidgets.push(this.editor.addLineWidget(t,a))}expandErrors(){for(var t;t=this.errormsgs.shift();)this.addErrorLine(t.line,t.msg)}markErrors(t){this.clearErrors(),t=t.slice(0,Yo);for(var i of t)this.addError(i)}clearErrors(){for(this.dirtylisting=!0,this.editor.clearGutter("gutter-info"),this.errormsgs=[];this.errorwidgets.length;)this.errorwidgets.shift().clear();for(;this.errormarks.length;)this.errormarks.shift().clear()}getSourceFile(){return this.sourcefile}updateListing(){this.clearErrors(),this.editor.clearGutter("gutter-bytes"),this.editor.clearGutter("gutter-offset"),this.editor.clearGutter("gutter-clock");var t=this.sourcefile.lines||[];for(var i of t)if(i.offset>=0&&this.setGutter("gutter-offset",i.line-1,De(i.offset&65535,4)),i.insns){var a=i.insns.length>9?"...":i.insns;if(this.setGutter("gutter-bytes",i.line-1,a),i.iscode){if(i.cycles)this.setGutter("gutter-clock",i.line-1,i.cycles+"");else if(F.getOpcodeMetadata){var u=parseInt(i.insns.split(" ")[0],16),d=F.getOpcodeMetadata(u,i.offset);if(d&&d.minCycles){var m=d.minCycles+"";this.setGutter("gutter-clock",i.line-1,m)}}}}}setGutter(t,i,a){var u=this.editor.lineInfo(i);if(!(u&&u.gutterMarkers&&u.gutterMarkers[t])){var d=document.createTextNode(a);this.editor.setGutterMarker(i,t,d)}}setGutterBytes(t,i){this.setGutter("gutter-bytes",t-1,i)}setTimingResult(t){if(this.editor.clearGutter("gutter-bytes"),this.sourcefile!=null)for(let m of Object.keys(this.sourcefile.line2offset)){var i=this.sourcefile.line2offset[m],a=t.pc2minclocks[i],u=t.pc2maxclocks[i];if(a>=0&&u>=0){var d;u==a?d=a+"":d=a+"-"+u,u==t.MAX_CLOCKS&&(d+="+"),this.setGutterBytes(parseInt(m),d)}}}setCurrentLine(t,i){var a=F.isBlocked&&F.isBlocked(),u=w=>{var b=document.createElement("div"),L=a?"currentpc-marker-blocked":"currentpc-marker";b.classList.add(L),b.appendChild(document.createTextNode("\u25B6")),this.editor.setGutterMarker(w.line-1,"gutter-info",b)};if(this.clearCurrentLine(i),t){u(t),i&&this.editor.setCursor({line:t.line-1,ch:t.start||0},{scroll:!0});var d=a?"currentpc-span-blocked":"currentpc-span",m={className:d,inclusiveLeft:!0};t.start||t.end?this.markCurrentPC=this.editor.markText({line:t.line-1,ch:t.start},{line:t.line-1,ch:t.end||t.start+1},m):this.markCurrentPC=this.editor.markText({line:t.line-1,ch:0},{line:t.line,ch:0},m),this.currentDebugLine=t}}clearCurrentLine(t){this.currentDebugLine&&(this.editor.clearGutter("gutter-info"),t&&this.editor.setSelection(this.editor.getCursor()),this.currentDebugLine=null),this.markCurrentPC&&(this.markCurrentPC.clear(),this.markCurrentPC=null)}getActiveLine(){if(this.sourcefile){var t=Kt&&Kt.c;if(!t&&F.getCPUState&&!F.isRunning()&&(t=F.getCPUState()),t){var i=t&&(t.EPC||t.PC),a=this.sourcefile.findLineForOffset(i,15);return a}}}refreshDebugState(t){this.clearCurrentLine(t);var i=this.getActiveLine();i&&this.setCurrentLine(i,t)}refreshListing(){var t=fe.getListingForFile(this.path);t&&t.sourcefile&&t.sourcefile!==this.sourcefile&&(this.sourcefile=t.sourcefile,this.dirtylisting=!0),!(!this.sourcefile||!this.dirtylisting)&&(this.updateListing(),this.dirtylisting=!1)}refresh(t){this.refreshListing(),this.refreshDebugState(t)}tick(){this.refreshDebugState(!1)}getLine(t){return this.editor.getLine(t-1)}getCurrentLine(){return this.editor.getCursor().line+1}getCursorPC(){for(var t=this.getCurrentLine();this.sourcefile&&t>=0;){var i=this.sourcefile.line2offset[t];if(i>=0)return i;t--}return-1}undoStep(){this.editor.execCommand("undo")}toggleBreakpoint(t){if(this.sourcefile!=null){var i=this.sourcefile.line2offset[t+1];ya(i)}}},va=1024,tn=class{getDisasmView(){return this.disasmview}createDiv(t){var i=document.createElement("div");return i.setAttribute("class","editor"),t.appendChild(i),this.newEditor(i),i}newEditor(t){this.disasmview=CodeMirror(t,{mode:"z80",theme:"cobalt",tabSize:8,readOnly:!0,styleActiveLine:!0})}refresh(t){let i=Kt||F.saveState(),a=i.c?i.c.PC:0,u=0,d=0,m=F.debugSymbols&&F.debugSymbols.addr2symbol||{},w=(U,de)=>{let W="",H=0;for(;H<de;){let G=U+H|0,se=F.disassemble(G,F.readAddress.bind(F)),K="",xe="";for(let Ae=0;Ae<se.nbytes;Ae++)K+=De(F.readAddress(G+Ae));for(;K.length<14;)K+=" ";let Ee=se.line;if(m&&se.isaddr&&(Ee=Ee.replace(/([^#])[$]([0-9A-F]+)/,(Ae,...o)=>{let Y=parseInt(o[1],16),ne=m[Y];return ne?o[0]+ne:(ne=m[Y-1],ne?o[0]+ne+"+1":Ae)})),m){let Ae=m[G];Ae&&(xe="; "+Ae)}W+=De(G,4)+"	"+ri(K,14)+"	"+ri(Ee,30)+xe+`
`,G==a&&(d=u),u++,H+=se.nbytes||1}return W};var b=a<0?a-va:Math.max(0,a-va);let L=w(b,a-b)+w(a,va);this.disasmview.setValue(L),t&&this.disasmview.setCursor(d,0),Ms(this.disasmview,d)}getCursorPC(){var t=this.disasmview.getCursor().line;if(t>=0){var i=this.disasmview.getLine(t).trim().split(/\s+/);if(i&&i.length>=1){var a=parseInt(i[0],16);if(a>=0)return a}}return-1}},ba=class extends tn{constructor(t){super();this.path=t}refreshListing(){var t=fe.getListingForFile(this.path);this.assemblyfile=t&&(t.assemblyfile||t.sourcefile)}refresh(t){if(this.refreshListing(),!!this.assemblyfile){var i=this.assemblyfile.text,a=this.getDisasmView();if(a.setValue(i),!!F.saveState){var u=Kt||F.saveState(),d=u.c?u.c.EPC||u.c.PC:0;if(d>=0&&this.assemblyfile){var m=this.assemblyfile.findLineForOffset(d,15);m&&(t&&a.setCursor(m.line-1,0),Ms(a,m.line-1))}}}}};function $s(l){return l.endsWith("_SIZE__")||l.endsWith("_LAST__")||l.endsWith("STACKSIZE__")||l.endsWith("FILEOFFS__")||l.startsWith("l__")||l.startsWith("s__")||l.startsWith(".__.")}var rn=class{constructor(){this.recreateOnResize=!0;this.totalRows=5120}createDiv(t){var i=document.createElement("div");return i.setAttribute("class","memdump"),t.appendChild(i),this.showMemoryWindow(t,i),this.maindiv=i}showMemoryWindow(t,i){this.memorylist=new xs({w:$(t).width(),h:$(t).height(),itemHeight:Ss(),totalRows:this.totalRows,generatorFn:a=>{var u=this.getMemoryLineAt(a),d=document.createElement("div");if(this.dumplines){var m=this.dumplines[a];m&&d.classList.add("seg_"+this.getMemorySegment(this.dumplines[a].a))}return d.appendChild(document.createTextNode(u)),d}}),$(i).append(this.memorylist.container),this.tick(),lt&&this.dumplines&&this.scrollToAddress(lt.data_start)}scrollToAddress(t){this.dumplines&&this.memorylist.scrollToItem(this.findMemoryWindowLine(t))}refresh(){this.dumplines=null,this.tick()}tick(){this.memorylist&&$(this.maindiv).find("[data-index]").each((t,i)=>{var a=$(i),u=parseInt(a.attr("data-index")),d=a.text(),m=this.getMemoryLineAt(u);d!=m&&a.text(m)})}getMemoryLineAt(t){var i=t*16,a=0,u=16,d;if(this.getDumpLines()){var m=this.dumplines[t];if(m)i=m.a&65520,a=m.a-i,u=a+m.l,d=m.s;else return"."}for(var w=De(i+a,4)+" ",b=0;b<a;b++)w+="   ";a>8&&(w+=" ");for(var b=a;b<u;b++){var L=this.readAddress(i+b);b==8&&(w+=" "),w+=" "+(typeof L=="number"?De(L,2):"??")}for(var b=u;b<16;b++)w+="   ";return d&&(w+="  "+d),w}readAddress(t){return F.readAddress(t)}getDumpLineAt(t){var i=this.dumplines[t];if(i)return i.a+" "+i.s}getDumpLines(){var t=F.debugSymbols&&F.debugSymbols.addr2symbol||{};if(this.dumplines==null){this.dumplines=[];var i=0,a;for(let w of Object.keys(t)){var u=parseInt(w),d=t[u];if(a)for($s(a)&&(a="");i<u&&this.dumplines.length<65536;){var m=i+16&1048560;m>u&&(m=u),this.dumplines.push({a:i,l:m-i,s:a}),i=m}a=d}}return this.dumplines}getMemorySegment(t){if(lt){if(t>=lt.data_start&&t<lt.data_start+lt.data_size)return F.getSP&&t>=F.getSP()-15?"stack":"data";if(t>=lt.code_start&&t<lt.code_start+(lt.code_size||lt.rom_size))return"code"}var i=fe.segments;if(i){for(var a of i)if(t>=a.start&&t<a.start+a.size){if(a.type=="rom")return"code";if(a.type=="ram")return"data";if(a.type=="io")return"io"}}return"unknown"}findMemoryWindowLine(t){for(var i=0;i<this.dumplines.length;i++)if(this.dumplines[i].a>=t)return i}},xa=class extends rn{constructor(){super(...arguments);this.totalRows=2048}readAddress(t){return F.readVRAMAddress(t)}getMemorySegment(t){return"video"}getDumpLines(){return null}},wa=class{constructor(t,i){this.recreateOnResize=!0;this.path=t,this.data=i}createDiv(t){return this.vlist=new ii(t),this.vlist.create(t,this.data.length+15>>4,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(t){for(var i=t*16,a=0,u=16,d=De(i+a,4)+" ",m=0;m<a;m++)d+="   ";a>8&&(d+=" ");for(var m=a;m<u;m++){var w=this.data[i+m];m==8&&(d+=" "),d+=" "+(w>=0?De(w,2):"  ")}return{text:d}}refresh(){this.vlist.refresh()}getPath(){return this.path}},Ea=class{createDiv(t){return this.maindiv=Wt(t,"vertical-scroll"),this.maindiv.css("display","grid"),this.maindiv.css("grid-template-columns","5em 40% 40%"),this.maindiv[0]}addSegment(t,i){if(i){var a=$('<div class="segment-offset" style="grid-column-start:1"/>');a.text("$"+De(t.start,4)),this.maindiv.append(a)}var u=$('<div class="segment"/>');if(i||u.css("grid-column-start",3),t.last?u.text(t.name+" ("+(t.last-t.start)+" / "+t.size+" bytes used)"):u.text(t.name+" ("+t.size+" bytes)"),t.size>=256){var d=(Math.log(t.size)-Math.log(256))*.5;u.css("padding-top",d+"em"),u.css("padding-bottom",d+"em")}t.type&&u.addClass("segment-"+t.type),this.maindiv.append(u),u.click(()=>{var m=ge.createOrShow("#memory");m.scrollToAddress(t.start)})}refresh(){this.maindiv.empty();var t=fe.segments;if(t){var i=0,a=-1;for(var u of t)u.start>i&&this.addSegment({name:"",start:i,size:u.start-i},!0),this.addSegment(u,a!=u.start),a=u.start,i=u.start+u.size}}},mr=class{constructor(){this.cumulativeData=!1;var t=160,i=262;try{t=Math.ceil(F.machine.cpuCyclesPerLine)||t,i=Math.ceil(F.machine.numTotalScanlines)||i}catch(a){}this.cyclesPerLine=t,this.totalScanlines=i}addr2symbol(t){var i=F.debugSymbols&&F.debugSymbols.addr2symbol||{};return i[t]}addr2str(t){var i=this.addr2symbol(t);return typeof i=="string"?"$"+De(t)+" ("+i+")":"$"+De(t)}showTooltip(t){t?(this.tooldiv||(this.tooldiv=document.createElement("div"),this.tooldiv.setAttribute("class","tooltiptrack"),document.body.appendChild(this.tooldiv)),$(this.tooldiv).text(t).show()):$(this.tooldiv).hide()}setVisible(t){t?(this.probe=F.startProbing(),this.probe.singleFrame=!this.cumulativeData,this.tick()):(this.probe&&(this.probe.singleFrame=!0),F.stopProbing(),this.probe=null)}redraw(t){var i=this.probe;if(!(!i||!i.idx))for(var a=0,u=0,d=0,m=0;m<i.idx;m++){var w=i.buf[m],b=w&65535,L=w>>16&255,U=w&4278190080;switch(U){case pe.SCANLINE:a++,u=0;break;case pe.FRAME:a=0,u=0;break;case pe.CLOCKS:u+=b,d+=b;break;default:t(U,b,u,a,d,L);break}}}opToString(t,i,a){var u="";switch(t){case pe.EXECUTE:u="Exec";break;case pe.MEM_READ:u="Read";break;case pe.MEM_WRITE:u="Write";break;case pe.IO_READ:u="IO Read";break;case pe.IO_WRITE:u="IO Write";break;case pe.VRAM_READ:u="VRAM Read";break;case pe.VRAM_WRITE:u="VRAM Write";break;case pe.INTERRUPT:u="Interrupt";break;case pe.ILLEGAL:u="Error";break;case pe.SP_PUSH:u="Stack Push";break;case pe.SP_POP:u="Stack Pop";break;default:return""}return typeof i=="number"&&(u+=" "+this.addr2str(i)),t&pe.HAS_VALUE&&typeof a=="number"&&(u+=" = $"+De(a,2)),u}getOpRGB(t){switch(t){case pe.EXECUTE:return 98305;case pe.MEM_READ:return 8388865;case pe.MEM_WRITE:return 65920;case pe.IO_READ:return 98432;case pe.IO_WRITE:return 12583296;case pe.VRAM_READ:return 8421377;case pe.VRAM_WRITE:return 4227264;case pe.INTERRUPT:return 13619151;case pe.ILLEGAL:return 4145151;default:return 0}}},Ws=class extends mr{constructor(){super(...arguments);this.recreateOnResize=!0}createCanvas(t,i,a){var u=document.createElement("div"),d=document.createElement("canvas");return d.width=i,d.height=a,d.classList.add("pixelated"),d.style.width="100%",d.style.height="90vh",d.style.backgroundColor="black",d.style.cursor="crosshair",d.onmousemove=m=>{var w=Es(d,m);this.showTooltip(this.getTooltipText(w.x,w.y)),$(this.tooldiv).css("left",m.pageX+10).css("top",m.pageY-30)},d.onmouseout=m=>{$(this.tooldiv).hide()},t.appendChild(u),u.appendChild(d),this.canvas=d,this.ctx=d.getContext("2d"),this.initCanvas(),this.maindiv=u}initCanvas(){}getTooltipText(t,i){return null}clear(){}tick(){this.clear(),this.redraw(this.drawEvent.bind(this))}},Sa=class extends Ws{constructor(){super(...arguments);this.recreateOnResize=!1}createDiv(t){return this.createCanvas(t,this.cyclesPerLine,this.totalScanlines)}initCanvas(){this.imageData=this.ctx.createImageData(this.canvas.width,this.canvas.height),this.datau32=new Uint32Array(this.imageData.data.buffer)}getTooltipText(t,i){t=t|0,i=i|0;var a="",u=null,d=[],m=-1;return this.redraw((w,b,L,U,de,W)=>{switch(w){case pe.EXECUTE:u=this.addr2symbol(b)||u;break;case pe.SP_PUSH:d.push(u);break;case pe.SP_POP:u=d.pop();break}U==i&&L<=t&&(L!=m&&(a="",m=L),a==""&&u&&(a+=`
`+u),a+=`
`+this.opToString(w,b,W))}),"X: "+t+"  Y: "+i+" "+a}refresh(){this.tick(),this.datau32.fill(4278190080)}tick(){super.tick(),this.ctx.putImageData(this.imageData,0,0)}clear(){this.datau32.fill(4278190080)}},_a=class extends Sa{createDiv(t){return this.createCanvas(t,256,256)}clear(){for(var t=0;t<=65535;t++){var i=F.readAddress(t),a=i>>2|i&31;a|=a<<8|a<<16,this.datau32[t]=a|4278190080}}drawEvent(t,i,a,u){var d=this.getOpRGB(t);if(!!d){var m=i&255,w=i>>8&255,b=this.datau32[i&65535];b=b|d|4278190080,this.datau32[i&65535]=b}}getTooltipText(t,i){var a=(t&255)+(i<<8),u="",d=-1,m={},w=null,b=[];return this.redraw((L,U,de,W,H,G)=>{switch(L){case pe.EXECUTE:d=U,w=this.addr2symbol(U)||w;break;case pe.SP_PUSH:b.push(w);break;case pe.SP_POP:w=b.pop();break}var se=L|d;U==a&&!m[se]&&(u==""&&w&&(u+=`
`+w),u+=`
PC `+this.addr2str(d)+" "+this.opToString(L,null,G),m[se]=1)}),this.addr2str(a)+u}},Ta=class extends Sa{drawEvent(t,i,a,u){var d=a+u*this.canvas.width,m=this.getOpRGB(t);if(!!m){var w=this.datau32[d];w=w|m|4278190080,this.datau32[d]=w}}},Ca=class extends mr{constructor(){super(...arguments);this.recreateOnResize=!0}createDiv(t){return this.vlist=new ii(t),this.vlist.create(t,this.cyclesPerLine*this.totalScanlines,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(t){var i="",a="seg_data",u=this.dumplines&&this.dumplines[t];if(u!=null){var d=u.info.join(", ");i="("+At(u.row,4)+", "+At(u.col,4)+")  "+ri(u.asm||"",20)+d,d.indexOf("Write ")>=0&&(a="seg_io")}return{text:i,clas:a}}refresh(){this.tick()}tick(){let t=F instanceof aa||F instanceof na;this.dumplines={},this.redraw((i,a,u,d,m,w)=>{t&&(m>>=2);var b=this.dumplines[m];switch(b==null&&(b={op:i,addr:a,row:d,col:u,asm:null,info:[]},this.dumplines[m]=b),i){case pe.EXECUTE:if(F.disassemble){var L=F.disassemble(a,F.readAddress.bind(F));b.asm=L&&L.line}break;default:var U=this.opToString(i,a,w);U!=""&&b.info.push(U);break}}),this.vlist.refresh()}},ka=class extends mr{constructor(){super(...arguments);this.recreateOnResize=!0}createDiv(t){return this.vlist=new ii(t),this.vlist.create(t,this.totalScanlines,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(t){for(var i=At(t+"",3)+" ",a="seg_code",u=this.dumplines&&this.dumplines[t]||[],d=Math.round(this.cyclesPerLine/3.3),m=0;m<this.cyclesPerLine;m++){var w=u[m];if(w!==void 0){var b=w&65535,L=L&4278190080;if(L==pe.EXECUTE)i+=",";else{var U=De(b);i+=U,m+=U.length-1}}else i+=m==d?"|":"."}return u[-1]&&(i+=" "+u[-1]),{text:i,clas:a}}refresh(){this.tick()}tick(){let t=F instanceof aa||F instanceof na;this.dumplines={},this.redraw((i,a,u,d,m,w)=>{var b=this.dumplines[d];switch(b==null&&(this.dumplines[d]=b=[]),i){case pe.EXECUTE:var L=F.debugSymbols.addr2symbol[a];L&&(b[-1]=L);break;case pe.IO_READ:case pe.IO_WRITE:case pe.VRAM_READ:case pe.VRAM_WRITE:b[u]=i|a;break}}),this.vlist.refresh()}},Pa=class extends mr{constructor(){super(...arguments);this.recreateOnResize=!0;this.cumulativeData=!0}createDiv(t){return F.debugSymbols&&F.debugSymbols.symbolmap?this.keys=Array.from(Object.keys(F.debugSymbols.symbolmap).filter(i=>!$s(i))):this.keys=["no symbols defined"],this.vlist=new ii(t),this.vlist.create(t,this.keys.length+1,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(t){if(t==0)return{text:At("Symbol",35)+At("Reads",8)+At("Writes",8)};var i=this.keys[t-1],a=this.dumplines&&this.dumplines[i];function u(w){var b=a[w]|0;return At(b?b.toString():"",8)}var d,m;return a!=null?(d=At(i,35)+u(pe.MEM_READ)+u(pe.MEM_WRITE),a[pe.EXECUTE]?m="seg_code":a[pe.IO_READ]||a[pe.IO_WRITE]?m="seg_io":m="seg_data"):(d=At(i,35),m="seg_unknown"),{text:d,clas:m}}refresh(){this.tick()}tick(){this.dumplines={},this.redraw((t,i,a,u,d,m)=>{var w=F.debugSymbols.addr2symbol[i];if(w!=null){var b=this.dumplines[w];b==null&&(b={},this.dumplines[w]=b),b[t]=(b[t]|0)+1}}),this.vlist.refresh(),this.probe&&this.probe.clear()}};var Ac=ks(),nn=/([0#]?)([x$%]|\d'h)([0-9a-f]+)(?:[;].*)?|(\d'b|0b)([01]+)/gim;function Xo(l){return l.replace(/(\shex\s+)([0-9a-f]+)/ig,function(t,i,a){for(var u=i,d=0;d<a.length;d+=2)u+="0x"+a.substr(d,2)+",";return u})}function Qo(l){for(var t=[],i;i=nn.exec(l);){var a;typeof i[4]!="undefined"?a=parseInt(i[5],2):i[2].startsWith("%")||i[2].endsWith("b")?a=parseInt(i[3],2):i[2].startsWith("x")||i[2].startsWith("$")||i[2].endsWith("h")?a=parseInt(i[3],16):a=parseInt(i[3]),t.push(a)}return t}function Jo(l,t){for(var i="",a,u=0,d=0;a=nn.exec(l);)i+=l.slice(u,nn.lastIndex-a[0].length),u=nn.lastIndex,typeof a[4]!="undefined"?i+=a[4]+t[d++].toString(2):a[2].startsWith("%")?i+=a[1]+"%"+t[d++].toString(2):a[2].endsWith("b")?i+=a[1]+a[2]+t[d++].toString(2):a[2].endsWith("h")?i+=a[1]+a[2]+t[d++].toString(16):a[2].startsWith("x")?i+=a[1]+"x"+De(t[d++]):a[2].startsWith("$")?i+=a[1]+"$"+De(t[d++]):i+=a[1]+t[d++].toString();return i+=l.slice(u),i=i.replace(/(\shex\s+)([,x0-9a-f]+)/ig,(m,w,b)=>{var L=w+b;return L=L.replace(/0x/ig,"").replace(/,/ig,""),L}),i}function js(l,t){if(!t)return l;for(var i=0,a=0;a<t.length;a++){var u=t[a];u<0&&(u=-u-1,i^=1<<u),l&1<<a&&(i^=1<<u)}return i}function Bs(l,t){var i=t[l%t.length];return[i>>3,i&7]}function Ko(l,t){for(var i=t.w,a=t.h,u=t.count||1,d=t.bpp||1,m=t.np||1,w=t.bpw||8,b=t.sl||Math.ceil(i*d/w),L=(1<<d)-1,U=t.pofs||b*a*u,de=t.skip||0,W=[],H=0;H<u;H++){for(var G=[],se=0;se<a;se++)for(var K=t.flip?a-1-se:se,xe=H*b*a+K*b,Ee=0,be=0;be<i;be++){var Ae=0,o=js(xe,t.remap);t.reindex&&([o,Ee]=Bs(be,t.reindex),o+=xe);for(var Y=0;Y<m;Y++){var ne=l[o+Y*U+de];Ae|=((t.brev?ne>>w-Ee-d:ne>>Ee)&L)<<Y*d}G.push(Ae),Ee+=d,Ee>=w&&!t.reindex&&(xe+=1,Ee=0)}W.push(new Uint8Array(G))}return W}function Zo(l,t){t.destfmt&&(t=t.destfmt);var i=t.w,a=t.h,u=t.count||1,d=t.bpp||1,m=t.np||1,w=t.bpw||8,b=t.sl||Math.ceil(t.w*d/w),L=(1<<d)-1,U=t.pofs||b*a*u,de=t.skip||0,W;m>0&&t.sl?W=new Uint8Array(b*a*u):w<=8?W=new Uint8Array(b*a*u*m):W=new Uint32Array(b*a*u*m);for(var H=0;H<u;H++)for(var G=l[H],se=0,K=0;K<a;K++)for(var xe=t.flip?a-1-K:K,Ee=H*b*a+xe*b,be=0,Ae=0;Ae<i;Ae++){var o=G[se++],Y=js(Ee,t.remap);t.reindex&&([Y,be]=Bs(Ae,t.reindex),Y+=Ee);for(var ne=0;ne<m;ne++){var he=o>>ne*d&L;W[Y+ne*U+de]|=t.brev?he<<w-be-d:he<<be}be+=d,be>=w&&!t.reindex&&(Ee+=1,be=0)}return W}function Hs(l,t,i,a,u,d,m){for(var w=[],b=0;b<l.length;b++){var L=l[b],U=4278190080;U|=(L>>t&(1<<i)-1)<<0+8-i,U|=(L>>a&(1<<u)-1)<<8+8-u,U|=(L>>d&(1<<m)-1)<<16+8-m,w.push(U)}return w}function el(l){var t=l.pal;if(typeof t=="number"){var i=Math.floor(Math.abs(t/100)%10),a=Math.floor(Math.abs(t/10)%10),u=Math.floor(Math.abs(t)%10);return 1<<i+a+u}else{var d=zs[t];if(d)return d.length;throw new Error("No palette named "+t)}}function Us(l,t){var i=t.pal,a;if(typeof i=="number"){var u=Math.floor(Math.abs(i/100)%10),d=Math.floor(Math.abs(i/10)%10),m=Math.floor(Math.abs(i)%10);i>=0?a=Hs(l,0,u,u,d,u+d,m):a=Hs(l,u+d,m,u,d,0,u)}else{var w=zs[i];if(w)a=new Uint32Array(l).map(b=>w[b&w.length-1]|4278190080);else throw new Error("No palette named "+i)}return a}var zs={nes:[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],ap2lores:[0,16711935,127,8323199,32512,8355711,191,255,12549888,16760576,12566463,16744319,65280,16776960,49023,16777215],vcs:[0,0,4210752,4210752,7105644,7105644,9474192,9474192,11579568,11579568,13158600,13158600,14474460,14474460,16053492,16053492,17476,17476,1074276,1074276,2393220,2393220,3448992,3448992,4241592,4241592,5296336,5296336,6088936,6088936,6880508,6880508,10352,10352,1328260,1328260,2645144,2645144,3963052,3963052,5016764,5016764,6070476,6070476,6862044,6862044,7915756,7915756,6276,6276,1586328,1586328,3166380,3166380,4745408,4745408,6062288,6062288,7378144,7378144,8431852,8431852,9747708,9747708,136,136,2105500,2105500,3947696,3947696,5789888,5789888,7368912,7368912,8947936,8947936,10526956,10526956,11842812,11842812,6029432,6029432,7610508,7610508,8928416,8928416,10246320,10246320,11563200,11563200,12616912,12616912,13671644,13671644,14725356,14725356,7864392,7864392,9445472,9445472,10763384,10763384,12081292,12081292,13398176,13398176,14451892,14451892,15506628,15506628,16560340,16560340,8650772,8650772,9969712,9969712,11287628,11287628,12605544,12605544,13660284,13660284,14715028,14715028,15507624,15507624,16561340,16561340,8912896,8912896,10231836,10231836,11550776,11550776,12606544,12606544,13661288,13661288,14716028,14716028,15508624,15508624,16562340,16562340,8132608,8132608,9451548,9451548,11031608,11031608,12349520,12349520,13404264,13404264,14457980,14457980,15512720,15512720,16566436,16566436,6040576,6040576,7883804,7883804,9463864,9463864,11306064,11306064,12622952,12622952,13939836,13939836,15256720,15256720,16572580,16572580,2898944,2898944,4742172,4742172,6585400,6585400,8428624,8428624,9745512,9745512,11325564,11325564,12641424,12641424,13958308,13958308,15360,15360,2120736,2120736,4226112,4226112,6069340,6069340,7648372,7648372,9228428,9228428,10806436,10806436,12123320,12123320,14356,14356,1858612,1858612,3701840,3701840,5281900,5281900,6861956,6861956,8178844,8178844,9495732,9495732,10812616,10812616,12332,12332,1855564,1855564,3436648,3436648,5016708,5016708,6596764,6596764,7913652,7913652,8967372,8967372,10284256,10284256,10308,10308,1591396,1591396,3172484,3172484,4490400,4490400,5807288,5807288,7124176,7124176,8178920,8178920,9232636,9232636],astrocade:[0,2368548,4737096,7171437,9539985,11974326,14342874,16777215,12255269,14680137,16716142,16725394,16734903,16744155,16753663,16762879,11534409,13959277,16318866,16721334,16730842,16740095,16749311,16758783,10420330,12779662,15138995,16718039,16727291,16736767,16745983,16755199,8847495,11206827,13631696,15994612,16724735,16733951,16743423,16752639,6946975,9306307,11731175,14092287,16461055,16732415,16741631,16751103,4784304,7143637,9568505,11929087,14297599,16731647,16741119,16750335,2425019,4784352,7209215,9570047,12004095,14372863,16741375,16750847,191,2359523,4718847,7146495,9515263,11949311,14318079,16752127,187,224,2294015,4658431,7092735,9461247,11895551,14264063,176,213,249,2367999,4736511,7105279,9539327,11908095,159,195,3303,209151,2577919,4946431,7380735,9749247,135,171,7888,17140,681983,3050495,5484543,7853311,106,3470,12723,22231,31483,1548031,3916799,6285311,73,8557,17810,27318,36570,373759,2742271,5176575,4389,13641,23150,32402,41911,51163,2026495,4456447,9472,18724,27976,37485,46737,56246,1834970,4194303,14080,23296,32803,42055,51564,60816,2031541,4456409,18176,27648,36864,46116,55624,392556,2752401,5177269,21760,30976,40192,49667,58919,1572683,3932016,6291348,24320,33536,43008,52224,716810,3079982,5504851,7864183,25856,35328,44544,250368,2619136,4980503,7405371,9764703,26624,35840,45312,2413824,4782336,7143173,9568041,11927374,26112,35584,2338560,4707328,7141376,9502464,11927326,14286659,24832,2393344,4762112,7196160,9564928,11992832,14352155,16711487,2447360,4815872,7250176,9618688,12052992,14417664,16776990,16777027,4803328,7172096,9606144,11974912,14343424,16776965,16777001,16777038,6962176,9330688,11764992,14133504,16502272,16773655,16777019,16777055,8858112,11226880,13660928,16029440,16759818,16769070,16777043,16777079,10426112,12794624,15163392,16745475,16754727,16764235,16773488,16777108,11534848,13969152,16337664,16740388,16749640,16759148,16768401,16777141,12255232,14684928,16725795,16735047,16744556,16753808,16763317,16772569],c64:[0,16777215,2832232,11707504,8797551,4427096,7940149,7325624,2445167,14659,5859226,4473924,7105644,8704666,11886188,9803157]},tl={nes:[["Screen Color",0,1],["Background 0",1,3],["Background 1",5,3],["Background 2",9,3],["Background 3",13,3],["Sprite 0",17,3],["Sprite 1",21,3],["Sprite 2",25,3],["Sprite 3",29,3]],astrocade:[["Left",0,-4],["Right",4,-4]]};function li(l,t){if(l==null||t==null||l.length!==t.length)return!1;if(l===t)return!0;for(var i=0;i<l.length;i++)if(l[i]!==t[i])return!1;return!0}function an(l,t){if(l==null||t==null||l.length!==t.length)return!1;if(l===t)return!0;for(var i=0;i<l.length;i++)if(!li(l[i],t[i]))return!1;return!0}var jt=class{refreshLeft(){for(var t=this;t;)t.updateLeft(),t=t.left}refreshRight(){for(var t=this;t;)t.updateRight(),t=t.right}addRight(t){return this.right=t,t.left=this,t}addLeft(t){return this.left=t,t.right=this,t}},Aa=class extends jt{},sn=class extends Aa{constructor(t,i){super();this.project=t,this.fileid=i,this.label=i}updateLeft(){return this.words=this.right.words,this.project&&this.project.updateFile(this.fileid,this.words),!0}updateRight(){return this.project&&(this.words=this.project.project.getFile(this.fileid)),!0}},Fa=class extends Aa{constructor(t,i,a,u,d){super();this.project=t,this.fileid=i,this.label=a,this.start=u,this.end=d}updateLeft(){if(this.right.words.length!=this.words.length)throw Error("Expected "+this.right.words.length+" bytes; image has "+this.words.length);this.words=this.right.words;var t=this.text.substring(this.start,this.end);return t=Jo(t,this.words),this.text=this.text.substring(0,this.start)+t+this.text.substring(this.end),this.project&&this.project.updateFile(this.fileid,this.text),!0}updateRight(){this.project&&(this.text=this.project.project.getFile(this.fileid));var t=this.text.substring(this.start,this.end);t=Xo(t);var i=Qo(t);return this.words=i,!0}},Da=class extends jt{updateLeft(){return!1}updateRight(){return this.words=ys(new Uint8Array(this.left.words)),!0}},La=class extends jt{constructor(t){super();this.fmt=t}updateLeft(){return this.images=this.right.images,this.words=Zo(this.images,this.fmt),!0}updateRight(){return li(this.words,this.left.words)?!1:(this.words=this.left.words,this.images=Ko(this.words,this.fmt),!0)}},qs=class{constructor(t){this.palcols=t}indexOf(t){return this.palcols.indexOf(t)}},Lr=class extends jt{constructor(t,i){super();this.palindex=0;this.context=t,this.ncolors=1<<(i.bpp||1)*(i.np||1)}updateLeft(){this.right&&(this.rgbimgs=this.right.rgbimgs);var t=new qs(this.palette),i=this.rgbimgs.map(a=>{for(var u=new Uint8Array(a.length),d=0;d<a.length;d++)u[d]=t.indexOf(a[d]);return u});return this.images=i,!0}updateRight(){if(!this.updateRefs()&&an(this.images,this.left.images))return!1;this.images=this.left.images;var t=this.palette.length-1;return this.rgbimgs=this.images.map(i=>{for(var a=new Uint32Array(i.length),u=0;u<i.length;u++)a[u]=this.palette[i[u]&t];return a}),!0}updateRefs(){var t;return this.context!=null&&(this.paloptions=this.context.getPalettes(this.ncolors),this.paloptions&&this.paloptions.length>0&&(t=this.paloptions[this.palindex].palette)),t==null&&(this.ncolors<=2?t=new Uint32Array([4278190080,4294967295]):t=new Uint32Array([4278190080,4294902015,4294967040,4294967295])),li(this.palette,t)?!1:(this.palette=t,!0)}};function rl(l){for(var t=new Map,i=new Uint32Array(l.length),a=0,u=0;u<l.length;u++){for(var d=l[u];t[d];)d^=++a;i[u]=d,t[d]=1}return i}var on=class extends jt{constructor(t){super();this.palfmt=t}updateLeft(){return!0}updateRight(){return li(this.words,this.left.words)?!1:(this.words=this.left.words,this.palette=rl(Us(this.words,this.palfmt)),this.layout=tl[this.palfmt.layout],this.rgbimgs=[],this.palette.forEach(t=>{this.rgbimgs.push(new Uint32Array([t]))}),!0)}getAllColors(){for(var t=[],i=0;i<el(this.palfmt);i++)t.push(i);return Us(t,this.palfmt)}},Vs=class extends jt{constructor(t){super();this.tileindex=0;this.context=t}updateRefs(){var t=this.tilemap;return this.context!=null&&(this.tileoptions=this.context.getTilemaps(256),this.tileoptions&&this.tileoptions.length>0&&(this.tilemap=this.tileoptions[this.tileindex].images)),!an(t,this.tilemap)}};var Ra=class extends Vs{constructor(t){super(t)}updateLeft(){return!1}updateRight(){if(!this.updateRefs()&&li(this.words,this.left.words))return!1;this.words=this.left.words,this.cols=32,this.rows=30,this.width=this.cols*8,this.height=this.rows*8,this.baseofs=0;var t=new Uint8Array(this.width*this.height);this.images=[t];for(var i=0,a,u=0;u<this.rows;u++)for(var d=0;d<this.cols;d++){var m=this.words[this.baseofs+i];if(typeof m=="undefined")throw Error("No name for address "+this.baseofs+" + "+i);var w=this.tilemap[m];if(!w)throw Error("No tilemap found for tile index "+m);a=i&11264|960|i&3072|i>>4&56|i>>2&7;for(var b=this.words[a],L=m^b<<9^2147483648,U=u*this.cols*8*8+d*8,de=0,W=(d&2)+((i&64)>>4),H=(b>>W&3)<<2,G=0;G<8;G++){for(var se=0;se<8;se++){var K=w[de++];K&&(K+=H),t[U++]=K}U+=this.cols*8-8}i++}return!0}},ln=class{recreate(t,i){var a=$('<div class="asset_grid"/>');t.empty().append(a);var u=Math.max(2,Math.ceil(16/this.width)),d=this.width<=8?16:8,m=null;this.rgbimgs.forEach((w,b)=>{var L=new un;L.width=this.width,L.height=this.height,L.recreate(),L.canvas.style.width=L.width*u+"px",L.canvas.title="$"+De(b),L.updateImage(w),$(L.canvas).addClass("asset_cell"),$(L.canvas).click(de=>{i(b,L)}),m||(m=$("<span/>"),a.append(m)),m.append(L.canvas);var U=b%d==d-1;U&&(a.append($("<br/>")),m=null)})}};function vr(l,t){var i=$(document.createElement("div"));return l&&i.appendTo(l),t&&i.addClass(t),i}var Ia=class extends jt{constructor(t,i,a){super();this.context=t,this.parentdiv=i,this.fmt=a}updateLeft(){return!0}updateRight(){if(an(this.rgbimgs,this.left.rgbimgs))return!1;this.rgbimgs=this.left.rgbimgs;var t=vr(this.parentdiv.empty(),"asset_dual"),i=vr(t),a=vr(t,"asset_editor").hide(),u=this.chooser=new ln;u.rgbimgs=this.rgbimgs,u.width=this.fmt.w||1,u.height=this.fmt.h||1,u.recreate(i,(w,b)=>{var L=Math.ceil(192/this.fmt.w),U=L*(this.fmt.aspect||1),de=this.createEditor(a,b,U,L);this.context.setCurrentEditor(a,$(b.canvas),this),this.rgbimgs[w]=b.rgbdata});var d=this.left;if(d instanceof Lr&&d.paloptions.length>1){var m=$(document.createElement("select"));d.paloptions.forEach((w,b)=>{var L=$(document.createElement("option")).text(w.name).val(b).appendTo(m);b==d.palindex&&L.attr("selected","selected")}),m.appendTo(i).change(w=>{var b=$(w.target).val();d.palindex=b,d.refreshRight()})}return!0}createEditor(t,i,a,u){var d=new Gs;d.createWith(i),d.updateImage();for(var m=i.width*a,w=i.height*u;m>500||w>500;)m/=2,w/=2;return d.canvas.style.width=m+"px",d.canvas.style.height=w+"px",d.makeEditable(this,t,this.left.palette),d}},Ma=class extends jt{constructor(t,i,a){super();this.context=t,this.parentdiv=i,this.fmt=a}updateLeft(){return!0}updateRight(){if(an(this.rgbimgs,this.left.rgbimgs))return!1;this.rgbimgs=this.left.rgbimgs;var t=vr(this.parentdiv.empty(),"asset_dual"),i=vr(t),a=vr(t,"asset_editor").hide(),u=new un;return u.width=this.fmt.w,u.height=this.fmt.h,u.recreate(),u.updateImage(this.rgbimgs[0]),i.append(u.canvas),!0}},un=class{recreate(){this.canvas=this.newCanvas(),this.imagedata=this.ctx.createImageData(this.width,this.height),this.rgbdata=new Uint32Array(this.imagedata.data.buffer),this.peerviewers=[this]}createWith(t){this.width=t.width,this.height=t.height,this.imagedata=t.imagedata,this.rgbdata=t.rgbdata,this.canvas=this.newCanvas(),this.peerviewers=[this,t]}newCanvas(){var t=document.createElement("canvas");return t.width=this.width,t.height=this.height,t.classList.add("pixels"),t.classList.add("pixelated"),this.ctx=t.getContext("2d"),t}updateImage(t){t&&this.rgbdata.set(t);for(let i of this.peerviewers)i.ctx.putImageData(this.imagedata,0,0)}},Gs=class extends un{constructor(){super(...arguments);this.curpalcol=-1;this.offscreen=new Map}getPositionFromEvent(t){var i=Math.floor(t.offsetX*this.width/$(this.canvas).width()),a=Math.floor(t.offsetY*this.height/$(this.canvas).height());return{x:i,y:a}}setPaletteColor(t){t&=this.palette.length-1,this.curpalcol!=t&&(this.curpalcol>=0&&this.palbtns[this.curpalcol].removeClass("selected"),this.curpalcol=t,this.currgba=this.palette[t&this.palette.length-1],this.palbtns[t].addClass("selected"))}makeEditable(t,i,a){this.left=t,this.palette=a;var u,d=!1,m=$(this.canvas);m.mousedown(w=>{var b=this.getPositionFromEvent(w);u=this.getPixel(b.x,b.y)==this.currgba?this.palette[0]:this.currgba,this.setPixel(b.x,b.y,this.currgba),d=!0,$(document).mouseup(L=>{$(document).off("mouseup");var U=this.getPositionFromEvent(L);this.setPixel(U.x,U.y,u),d=!1,this.commit()})}).mousemove(w=>{var b=this.getPositionFromEvent(w);d&&this.setPixel(b.x,b.y,u)}),i.empty(),this.createToolbarButtons(i[0]),i.append(this.canvas),i.append(this.createPaletteButtons()),this.setPaletteColor(1)}getPixel(t,i){if(t=Math.round(t),i=Math.round(i),t<0||t>=this.width||i<0||i>=this.height)return this.offscreen[t+","+i]|this.palette[0];var a=t+i*this.width;return this.rgbdata[a]}setPixel(t,i,a){if(t=Math.round(t),i=Math.round(i),t<0||t>=this.width||i<0||i>=this.height)this.offscreen[t+","+i]=a;else{var u=t+i*this.width,d=this.rgbdata[u];d!=a&&(this.rgbdata[u]=a,this.updateImage())}}createPaletteButtons(){this.palbtns=[];for(var t=vr(null,"asset_toolbar"),i=0;i<this.palette.length;i++){var a=$(document.createElement("button")).addClass("palbtn"),u=this.palette[i]&16777215,d="#"+De(Xi(u),6);a.click(this.setPaletteColor.bind(this,i)),a.css("backgroundColor",d).text(i.toString(16)),a.css("color",u&32768?"black":"white"),t.append(a),this.palbtns.push(a)}return t}createToolbarButtons(t){var i=new Ji(t,null);i.add("ctrl+shift+h","Flip X","glyphicon-resize-horizontal",this.flipX.bind(this)),i.add("ctrl+shift+v","Flip Y","glyphicon-resize-vertical",this.flipY.bind(this)),i.add("ctrl+shift+9","Rotate","glyphicon-repeat",this.rotate90.bind(this)),i.add("ctrl+shift+left","Move Left","glyphicon-arrow-left",this.translate.bind(this,1,0)),i.add("ctrl+shift+right","Move Right","glyphicon-arrow-right",this.translate.bind(this,-1,0)),i.add("ctrl+shift+up","Move Up","glyphicon-arrow-up",this.translate.bind(this,0,1)),i.add("ctrl+shift+down","Move Down","glyphicon-arrow-down",this.translate.bind(this,0,-1))}commit(){this.updateImage(),this.left.refreshLeft()}remapPixels(t){for(var i=0,a=new Uint32Array(this.rgbdata.length),u=0;u<this.height;u++)for(var d=0;d<this.width;d++)a[i]=t(d,u),i++;this.rgbdata.set(a),this.commit()}rotate(t){var i=Math.sin(t*Math.PI/180),a=Math.cos(t*Math.PI/180);this.remapPixels((u,d)=>{var m=u+.5-this.width/2,w=d+.5-this.height/2,b=m*a-w*i+this.width/2-.5,L=w*a+m*i+this.height/2-.5;return this.getPixel(b,L)})}rotate90(){this.rotate(90)}flipX(){this.remapPixels((t,i)=>this.getPixel(this.width-1-t,i))}flipY(){this.remapPixels((t,i)=>this.getPixel(t,this.height-1-i))}translate(t,i){this.remapPixels((a,u)=>this.getPixel(a+t,u+i))}};var cn=ks(),Na=class{createDiv(t){return this.maindiv=Wt(t,"vertical-scroll"),this.maindiv[0]}clearAssets(){this.rootnodes=[],this.deferrednodes=[]}registerAsset(t,i,a){this.rootnodes.push(i),a?a>1?this.deferrednodes.push(i):this.deferrednodes.unshift(i):i.refreshRight()}getPalettes(t){var i=[];return this.rootnodes.forEach(a=>{for(;a!=null;){if(a instanceof on){var u=a.palette;t==u.length&&i.push({node:a,name:"Palette",palette:u}),a.layout&&a.layout.forEach(([d,m,w])=>{if(m<u.length){if(w==t){var b=u.slice(m,m+w);i.push({node:a,name:d,palette:b})}else if(-w==t){var b=u.slice(m,m-w);b.reverse(),i.push({node:a,name:d,palette:b})}else if(w+1==t){var b=new Uint32Array(t);b[0]=u[0],b.set(u.slice(m,m+w),1),i.push({node:a,name:d,palette:b})}}});break}a=a.right}}),i}getTilemaps(t){var i=[];return this.rootnodes.forEach(a=>{for(;a!=null;){if(a instanceof Lr){var u=a.rgbimgs;u&&u.length>=t&&i.push({node:a,name:"Tilemap",images:a.images,rgbimgs:u})}a=a.right}}),i}isEditing(){return this.cureditordiv!=null}getCurrentEditNode(){return this.cureditnode}setCurrentEditor(t,i,a){let u=250;for(this.cureditordiv!=t&&(this.cureditordiv&&(this.cureditordiv.hide(u),this.cureditordiv=null),t&&(this.cureditordiv=t,this.cureditordiv.show(),this.cureditordiv[0].scrollIntoView({behavior:"smooth",block:"center"}))),this.cureditelem&&(this.cureditelem.removeClass("selected"),this.cureditelem=null),i&&(this.cureditelem=i,this.cureditelem.addClass("selected"));a.left;)a=a.left;this.cureditnode=a}scanFileTextForAssets(t,i){for(var a=[],u=/[/;][*;]([{].+[}])[*;][/;]/g,d;d=u.exec(i);){var m=d.index+d[0].length,w;if(ie.includes("verilog")?w=i.indexOf("end",m):d[0].startsWith(";;")?w=i.indexOf(";;",m):w=i.indexOf(";",m),w>m)try{var b=d[1].replace(/([A-Za-z]+):/g,'"$1":'),L=JSON.parse(b);a.push({fileid:t,fmt:L,start:m,end:w})}catch(Ae){console.log(Ae)}}for(var U=/DEF_METASPRITE_(\d+)x(\d+)[(](\w+),\s*(\w+),\s*(\w+)/gi;d=U.exec(i);){for(var de=parseInt(d[1]),W=parseInt(d[2]),H=d[3],G=parseInt(d[4]),se=parseInt(d[5]),K=[],xe=0;xe<de;xe++)for(var Ee=0;Ee<W;Ee++)K.push({x:xe*8,y:Ee*8,tile:G,attr:se});var be={defs:K,width:de*8,height:W*8};a.push({fileid:t,label:H,meta:be})}return a}addPaletteEditorViews(t,i,a){var u=$('<div class="asset_dual"/>').appendTo(t),d=$('<div class="asset_editor"/>').hide(),m=[];i.getAllColors().forEach(H=>{m.push(new Uint32Array([H]))});var w=$("<table/>").appendTo(u);d.appendTo(u);var b=i.layout;if(!b){var L=i.palette.length,U=L>32?8:4;b=[];for(var de=0;de<L;de+=U)b.push(["",de,Math.min(L-de,U)])}function W(H,G){var se=i.words[G],K=i.palette[G],xe="#"+De(Xi(K),6),Ee=K&32768?"black":"white";H.text(De(se,2)).css("background-color",xe).css("color",Ee)}b.forEach(([H,G,se])=>{if(G<i.palette.length){var K=$("<tr/>").appendTo(w);$("<td/>").text(H).appendTo(K);for(var xe=[],Ee=G;Ee<G+Math.abs(se);Ee++)xe.push(Ee);se<0&&xe.reverse(),xe.forEach(be=>{var Ae=$("<td/>").addClass("asset_cell asset_editable").appendTo(K);W(Ae,be),Ae.click(o=>{var Y=new ln;Y.rgbimgs=m,Y.width=1,Y.height=1,Y.recreate(d,(ne,he)=>{a(be,ne),W(Ae,be)}),this.setCurrentEditor(d,Ae,i)})})}})}addPixelEditor(t,i,a){a.xform="scale(2)";var u=new La(a);i.addRight(u);var d=new Lr(this,a);u.addRight(d),d.addRight(new Ia(this,Wt(t),a))}addPaletteEditor(t,i,a){var u=new on(a);i.addRight(u),i.refreshRight(),this.addPaletteEditorViews(t,u,(d,m)=>{console.log("set entry",d,"=",m),i.words[d]=m,u.words=null,u.updateRight(),u.refreshLeft()})}ensureFileDiv(t){var i=this.getFileDivId(t),a=$(document.getElementById(i));if(a.length===0){var u=Wt(this.maindiv,"asset_file"),d=Wt(u,"asset_file_header").text(t);a=Wt(u).attr("id",i).addClass("disable-select")}return a}refreshAssetsInFile(t,i){let a=0;if(ie.startsWith("nes")&&t.endsWith(".chr")&&i instanceof Uint8Array){let u=new sn(ge,t),d={w:8,h:8,bpp:1,count:i.length>>4,brev:!0,np:2,pofs:8,remap:[0,1,2,4,5,6,7,8,9,10,11,12]};this.addPixelEditor(this.ensureFileDiv(t),u,d),this.registerAsset("charmap",u,1),a++}else if(ie.startsWith("nes")&&t.endsWith(".pal")&&i instanceof Uint8Array){let u=new sn(ge,t),d={pal:"nes",layout:"nes"};this.addPaletteEditor(this.ensureFileDiv(t),u,d),this.registerAsset("palette",u,0),a++}else if(typeof i=="string"){let u=this.scanFileTextForAssets(t,i);for(let d of u)if(d.fmt){let m=t,w=new Fa(ge,t,m,d.start,d.end),b=w;if(d.fmt.comp=="rletag"&&(w=w.addRight(new Da)),d.fmt.map=="nesnt"){w=w.addRight(new Ra(this)),w=w.addRight(new Lr(this,{w:8,h:8,bpp:4}));let L={w:8*(d.fmt.w||32),h:8*(d.fmt.h||30),count:1};w=w.addRight(new Ma(this,Wt(this.ensureFileDiv(t)),L)),this.registerAsset("nametable",b,2),a++}else d.fmt.w>0&&d.fmt.h>0?(this.addPixelEditor(this.ensureFileDiv(t),w,d.fmt),this.registerAsset("charmap",b,1),a++):d.fmt.pal&&(this.addPaletteEditor(this.ensureFileDiv(t),w,d.fmt),this.registerAsset("palette",b,0),a++)}}return a}getFileDivId(t){return"__asset__"+bs(t)}refresh(t){if(t)this.maindiv.empty(),this.clearAssets(),fe.iterateFiles((a,u)=>{try{var d=this.refreshAssetsInFile(a,u)}catch(m){console.log(m),this.ensureFileDiv(a).text(m+"")}}),console.log("Found "+this.rootnodes.length+" assets"),this.deferrednodes.forEach(a=>{try{a.refreshRight()}catch(u){console.log(u),alert(u+"")}}),this.deferrednodes=[];else for(var i of this.rootnodes)i!==this.getCurrentEditNode()&&i.refreshRight()}setVisible(t){t?cn.bind&&cn.bind("ctrl+z",ge.undoStep.bind(ge)):cn.unbind&&cn.unbind("ctrl+z")}};var ui=256,Ys=100,Xs=!1,ci=class{constructor(t,i){this.expanded=!1;this.parent=t,this.name=i,this.children=new Map,this.level=t?t.level+1:-1,this.view=t?t.view:null}getDiv(){return this._div==null&&(this._div=document.createElement("div"),this._div.classList.add("vertical-scroll"),this._div.classList.add("tree-content"),this._header=document.createElement("div"),this._header.classList.add("tree-header"),this._header.classList.add("tree-level-"+this.level),this._header.append(this.name),this._inline=document.createElement("span"),this._inline.classList.add("tree-value"),this._header.append(this._inline),this._div.append(this._header),this.parent._content.append(this._div),this._header.onclick=t=>{this.toggleExpanded()}),this.expanded&&this._content==null?(this._content=document.createElement("div"),this._div.append(this._content)):!this.expanded&&this._content!=null&&(this._content.remove(),this._content=null,this.children.clear()),this._div}toggleExpanded(){this.expanded=!this.expanded,this.view.tick()}remove(){this._div.remove(),this._div=null}update(t){this.getDiv();var i="";if(t&&t.$$&&typeof t.$$=="function"&&this._content!=null&&(t=t.$$()),t==null)i=t+"";else if(typeof t=="number")t!=(t|0)?i=t.toString():i=t+"	($"+De(t)+")";else if(typeof t=="boolean")i=t.toString();else if(typeof t=="string")t.length<Ys?i=t:i=t.substring(0,Ys)+"...";else if(t.buffer&&t.length<=ui)i=ws(t,0,t.length);else if(typeof t=="object"||typeof t=="function")if(this._content!=null){if(t.slice&&t.length>ui){let b={},L=t;for(var a=ui;t.length/a>ui;)a*=2;for(let U=0;U<L.length;U+=a)b["$"+De(U)]={$$:()=>L.slice(U,U+a)};t=b}let m=t instanceof Array?Array.from(t.keys()):Object.getOwnPropertyNames(t);if(m.length>ui){let b={},L=t;for(var a=100;m.length/a>100;)a*=2;for(let de=0;de<m.length;de+=a){for(var u={},d=de;d<de+a;d++)u[m[d]]=L[m[d]];b["["+de+"...]"]=u}t=b,m=Object.getOwnPropertyNames(t)}let w=new Set(this.children.keys());m.forEach(b=>{var L=!Xs&&typeof b=="string"&&b.startsWith("$$");if(!L){let U=this.children.get(b);U==null&&(U=new ci(this,b),this.children.set(b,U)),U.update(t[b])}w.delete(b)}),w.forEach(b=>{this.children.get(b).remove(),this.children.delete(b)}),this._header.classList.add("tree-expanded"),this._header.classList.remove("tree-collapsed")}else this._header.classList.add("tree-collapsed"),this._header.classList.remove("tree-expanded");else i=typeof t;this._inline.innerText!=i&&(this._inline.innerText=i)}};function Qs(l,t){var i=new ci(null,null);i.view=t,i._content=l;var a=new ci(i,"/");return a.expanded=!0,a.getDiv(),a._div.style.padding="0px",a}var Js=class{createDiv(t){return this.root=Qs(t,this),this.root.getDiv()}refresh(){this.tick()}tick(){this.root.update(this.getRootObject())}};var Oa=class extends Js{getRootObject(){return F.getDebugTree()}},$a=class extends mr{constructor(){super(...arguments);this.cumulativeData=!0}createDiv(t){return this.clear(),this.treeroot=Qs(t,this),this.treeroot.getDiv()}refresh(){this.tick()}tick(){this.treeroot.update(this.getRootObject()),this.probe&&this.probe.clear()}clear(){this.graph=null,this.reset()}reset(){this.stack=[],this.lastsp=-1,this.lastpc=0,this.jsr=!1,this.rts=!1}newNode(t,i){return{$$SP:i,$$PC:t,count:0,startLine:null,endLine:null,calls:{}}}newRoot(t,i){this.stack.length==0?(this.graph=this.newNode(null,i),this.stack.unshift(this.graph)):i>this.stack[0].$$SP&&(this.graph=this.newNode(null,i),this.graph.calls[this.addr2str(t)]=this.stack[0],this.stack.unshift(this.graph))}getRootObject(){return this.redraw((t,i,a,u,d,m)=>{switch(t){case pe.SP_POP:this.newRoot(this.lastpc,this.lastsp);case pe.SP_PUSH:if(this.stack.length){let b=this.stack[this.stack.length-1];var w=this.lastsp-i;(w==2||w==3)&&i<b.$$SP&&(this.jsr=!0),(w==-2||w==-3)&&this.stack.length>1&&i>b.$$SP&&(this.rts=!0)}this.lastsp=i;break;case pe.EXECUTE:if(Math.abs(i-this.lastpc)>=4){if(this.jsr&&this.stack.length){let b=this.stack[this.stack.length-1],L=this.addr2str(i),U=b.calls[L];U==null?U=b.calls[L]=this.newNode(i,this.lastsp):U.$$PC==null&&(U.$$PC=i),this.stack.push(U),U.count++,U.startLine=u}this.jsr=!1,this.rts&&this.stack.length&&(this.stack.pop().endLine=u),this.rts=!1}this.lastpc=i;break}}),this.graph&&(this.graph.$$Stack=this.stack),Xs?this.graph:this.graph&&this.graph.calls}};var Zt=Zn(Vo()),il=qo(),Z=ta(window.location.search||"?"),fi=Dr(Z.electron),it=Dr(Z.embed),fn,ie,br,Be,F,di=$("#controls_top"),ze,fe,ge,nt,ja,Ge,dn,Ye,lt,Kt,hi,pi,hn=!1,Rr=!1,Ba=null,Ha=!1,Ks="c.PC == 0x6000",nl={dasm:"6502",acme:"6502",cc65:"text/x-csrc",ca65:"6502",nesasm:"6502",z80asm:"z80",sdasz80:"z80",sdcc:"text/x-csrc",verilator:"verilog",jsasm:"z80",zmac:"z80",bataribasic:"bataribasic",markdown:"markdown",js:"javascript",xasm6809:"z80",cmoc:"text/x-csrc",yasm:"gas",smlrc:"text/x-csrc",inform6:"inform6",fastbasic:"fastbasic",basic:"basic",silice:"verilog",wiz:"text/x-wiz",vasmarm:"vasm",armips:"vasm",ecs:"ecs"};function gi(l,t,i,a){window.ga&&ga("send","event",l,t,i,a)}function Ce(l){Oe(!1),bootbox.alert({title:'<span class="glyphicon glyphicon-alert" aria-hidden="true"></span> Alert',message:l})}function Bt(l){Oe(!1),bootbox.alert(l)}function al(l){throw Ce(l),new Error(l)}function sl(){return new Worker("./gen/worker/bundle.js")}var wt=function(){try{let t="__some_random_key_you_are_not_going_to_use__";localStorage.setItem(t,t);var l=localStorage.getItem(t)==t;return localStorage.removeItem(t),l}catch(t){return!1}}(),Zs=class{setLastPreset(t){wt&&!it&&(Be&&ie&&!fi?localStorage.setItem("__lastrepo_"+ie,Be):localStorage.removeItem("__lastrepo_"+ie),localStorage.setItem("__lastplatform",ie),localStorage.setItem("__lastid_"+br,t))}unsetLastPreset(){wt&&!it&&(delete Z.file,localStorage.removeItem("__lastid_"+br))}getLastPreset(){return wt&&!it&&localStorage.getItem("__lastid_"+br)}getLastPlatformID(){return wt&&!it&&localStorage.getItem("__lastplatform")}getLastRepoID(t){return wt&&!it&&t&&localStorage.getItem("__lastrepo_"+t)}shouldCompleteTour(){return wt&&!it&&!localStorage.getItem("8bitworkshop.hello")}completedTour(){wt&&!it&&localStorage.setItem("8bitworkshop.hello","true")}},yr=new Zs;function Ua(l,t){navigator.storage&&navigator.storage.persist?navigator.storage.persist().then(i=>{console.log("requestPersistPermission =",i),i?l&&!t&&Bt("Your browser says it will persist your local file edits, but you may want to back up your work anyway."):l&&Ce("Your browser refused to expand the peristent storage quota. Your edits may not be preserved after closing the page.")}):l&&Ce("Your browser may not persist edits after closing the page. Try a different browser.")}function ol(){return dn?dn.title||dn.name||fe.mainPath||"ROM":fe.mainPath||"ROM"}async function ll(){var l=new la(ie);return fi?(console.log("using electron with local filesystem",alternateLocalFilesystem),new ni(l,alternateLocalFilesystem)):Z.localfs!=null?new ni(l,await yl(Z.localfs)):new ni(l,new ua(Ye))}async function ul(){var l=await ll();fe=new ca(sl(),ie,F,l),ge=new ha($("#workspace")[0],fe),fe.callbackBuildResult=t=>{Yl(t)},fe.callbackBuildStatus=t=>{cl(t)}}function cl(l){l?di.addClass("is-busy"):di.removeClass("is-busy"),$("#compile_spinner").css("visibility",l?"visible":"hidden")}function mi(){var l=$("#windowMenuList").empty(),t=!1;function i(b,L,U){t&&(l.append(document.createElement("hr")),t=!1);var de=document.createElement("li"),W=document.createElement("a");if(W.setAttribute("class","dropdown-item"),W.setAttribute("href","#"),W.setAttribute("data-wndid",b),b==ge.getActiveID()&&$(W).addClass("dropdown-item-checked"),W.appendChild(document.createTextNode(L)),de.appendChild(W),l.append(de),U){var H=(G,se)=>{l.find("a").removeClass("dropdown-item-checked"),$(W).addClass("dropdown-item-checked")};ge.setCreateFunc(b,U),ge.setShowFunc(b,H),$(W).click(G=>{ge.createOrShow(b),Ba=b})}}function a(b){var L=F.getToolForFilename(b),U=L&&nl[L];return new oi(b,U)}function u(b){i(b,yt(b),()=>{var L=fe.getFile(b);if(typeof L=="string")return a(b);if(L instanceof Uint8Array)return new wa(b,L)})}u(fe.mainPath),fe.iterateFiles((b,L)=>{L&&b!=fe.mainPath&&u(b)}),t=!0;var d=fe.getListings();if(d)for(var m in d){var w=d[m];(w.assemblyfile&&w.assemblyfile.text||w.sourcefile&&w.sourcefile.text||w.text)&&i(m,yt(m),b=>new ba(b))}t=!0,F.disassemble&&F.saveState&&i("#disasm","Disassembly",()=>new tn),F.readAddress&&i("#memory","Memory Browser",()=>new rn),fe.segments&&fe.segments.length&&i("#memmap","Memory Map",()=>new Ea),F.readVRAMAddress&&i("#memvram","VRAM Browser",()=>new xa),F.startProbing&&(i("#memheatmap","Memory Probe",()=>new _a),i("#crtheatmap","CRT Probe",()=>new Ta),i("#probelog","Probe Log",()=>new Ca),i("#scanlineio","Scanline I/O",()=>new ka),i("#symbolprobe","Symbol Profiler",()=>new Pa),i("#callstack","Call Stack",()=>new $a)),F.getDebugTree&&i("#debugview","Debug Tree",()=>new Oa),i("#asseteditor","Asset Editor",()=>new Na)}function fl(l,t){if(t){var i=Z.highlight.split(","),a=parseInt(i[0])-1,u=parseInt(i[1])-1,d=ge.createOrShow(l);d.highlightLines(a,u)}}function eo(l){mi(),ge.createOrShow(l),fe.setMainFile(l),fl(l,Z.highlight)}async function dl(l){fe.mainPath=l,yr.setLastPreset(l);var t=await fe.loadFiles([l]);if(yi=new Date,t&&t.length)eo(l);else{var i=await hl(l);fe.filedata[l]=i||`
`,eo(l),Z.newfile?Ua(!0,!0):Bt('Could not find file "'+l+'". Loading default file.'),delete Z.newfile,bn()}}function za(l){if(l=="/")Z={repo:"/"};else if(l.indexOf("://")>=0){var t=en(l);t&&(Z={repo:t.repopath})}else Z.platform=ie,Z.file=l;Ir()}async function hl(l){var t=F.getToolForFilename(l);try{return await $.get("presets/"+ht(ie)+"/skeleton."+t,"text")}catch(i){Ce("Could not load skeleton for "+ie+"/"+t+"; using blank file")}}function qa(l){return l.indexOf(" ")>=0?(Ce("No spaces in filenames, please."),!1):!0}function pl(l){return bootbox.prompt({title:"Enter the name of your new main source file.",placeholder:"newfile"+F.getDefaultExtension(),callback:t=>{if(t&&t.trim().length>0){if(!qa(t))return;t.indexOf(".")<0&&(t+=F.getDefaultExtension());var i=t;gi("workspace","file","new"),Z.newfile="1",za(i)}}}),!0}function gl(l){let t=$('<input type="file" multiple accept="*" style="display:none">'),i=t[0];t.change(a=>{ml(i.files)}),t.click()}function ml(l){console.log(l);var t=0;function i(){var a=l[t++];if(!a)console.log("Done uploading",t),t>2?(Bt("Files uploaded."),setTimeout(bi,1e3)):(Z.file=l[0].name,bootbox.confirm({message:"Open '"+Z.file+"' as main project file?",buttons:{confirm:{label:"Open As New Project"},cancel:{label:"Include/Link With Project Later"}},callback:m=>{m?Ir():setTimeout(bi,1e3)}})),gi("workspace","file","upload");else{var u=a.name,d=new FileReader;d.onload=function(m){var w=m.target.result,b=new Uint8Array(w);gr(u,b)||(b=Yi(b).replace(`\r
`,`
`)),ge.updateFile(u,b),console.log("Uploaded "+u+" "+b.length+" bytes"),i()},d.readAsArrayBuffer(a)}}l&&i()}async function vl(l){var t=window.showDirectoryPicker;t||bootbox.alert("This browser can't open local files on your computer, yet. Try Chrome.");var i=await t(),a=i.name,u="__localfs__"+a,d={handle:i},m=Wa.createInstance({name:u,version:2});await m.setItem(u,d),Z={localfs:a},Ir(!0)}async function bl(l){return new Promise((t,i)=>{bootbox.prompt(l,a=>{t(a)})})}async function yl(l){let t={mode:"readwrite"};var i="__localfs__"+l,a=Wa.createInstance({name:i,version:2}),u=await a.getItem(i),d=u.handle;console.log(u,d);var m=await d.queryPermission(t);if(console.log(m),m!=="granted"&&(await bl("Request permissions to access filesystem?"),m=await d.requestPermission(t)),m!=="granted"){bootbox.alert("Could not get permission to access filesystem.");return}return{getFileData:async w=>{console.log("getFileData",w);let b=await d.getFileHandle(w,{create:!1});console.log("getFileData",b);let L=await b.getFile();console.log("getFileData",L);let U=await(gr(w)?L.binary():L.text());return console.log(b,L,U),U},setFileData:async(w,b)=>{}}}function Et(){return yt(fe.mainPath)}function xl(){return yt(ge.getActiveID())}var Va;function to(l){for(var t=l+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var u=i[a];u.charAt(0)==" ";)u=u.substring(1,u.length);if(u.indexOf(t)==0)return u.substring(t.length,u.length)}return null}async function xr(){if(!Va){await Ft("lib/octokat.js"),await Ft("https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"),await Ft("https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"),await Ft("https://8bitworkshop.com/config.js");var l=to("__github_key");Va=new pa(Octokat,l,Ye,fe),console.log("loaded github service")}return Va}function vi(){var l=(Be||"").split("/");return l.length!=2?(Ce("<p>You are not in a GitHub repository.</p><p>Choose one from the pulldown, or Import or Publish one.</p>"),null):"https://github.com/"+l[0]+"/"+l[1]}async function Ga(l,t){var i,a=en(l);if(!a){Ce("Could not parse Github URL.");return}var u=ai()[a.repopath];if(!(u&&!confirm("You've already imported "+a.repopath+" -- do you want to replace all local files?"))){Oe(!0);var d=fa(a.repopath);Ut(.25);var m=await xr();return m.import(l).then(w=>(i=w,Ut(.75),m.pull(l,d))).then(w=>{Z={repo:i.repopath},Oe(!1),gi("sync","import",l),Ir(t)}).catch(w=>{Oe(!1),console.log(w),Ce("<p>Could not import "+l+".</p>"+w)})}}async function wl(l){var t=await xr();t.login().then(()=>{Bt("You are signed in to Github.")}).catch(i=>{Ce("<p>Could not sign in.</p>"+i)})}async function El(l){var t=await xr();t.logout().then(()=>{Bt("You are logged out of Github.")})}function Sl(l){var t=$("#importGithubModal"),i=$("#importGithubButton");t.modal("show"),i.off("click").on("click",()=>{var a=$("#importGithubURL").val()+"";t.modal("hide"),Ga(a,!1)})}function _l(l){if(!(Be&&!confirm("This project ("+fe.mainPath+") is already bound to a Github repository. Do you want to re-publish to a new repository? (You can instead choose 'Push Changes' to update files in the existing repository.)"))){var t=$("#publishGithubModal"),i=$("#publishGithubButton");$("#githubRepoName").val(xt(yt(fe.mainPath))),t.modal("show"),i.off("click").on("click",async()=>{var a=$("#githubRepoName").val()+"",u=$("#githubRepoDesc").val()+"",d=$("#githubRepoPrivate").val()=="private",m=$("#githubRepoLicense").val()+"",w;if(!a){Ce("You did not enter a project name.");return}t.modal("hide"),Oe(!0);var b=await xr();b.login().then(()=>(Ut(.25),b.publish(a,u,m,d))).then(L=>(w=L,Ut(.5),Be=Z.repo=w.repopath,ro("initial import from 8bitworkshop.com"))).then(()=>{gi("sync","publish",d?"":a),Ga(w.url,!1)}).catch(L=>{Oe(!1),console.log(L),Ce("Could not publish GitHub repository: "+L)})})}}function Tl(l){var t=vi();if(!!t){var i=$("#pushGithubModal"),a=$("#pushGithubButton");i.modal("show"),a.off("click").on("click",()=>{var u=$("#githubCommitMsg").val()+"";i.modal("hide"),ro(u)})}}function Cl(l){var t=vi();!t||bootbox.confirm("Pull from repository and replace all local files? Any changes you've made will be overwritten.",async i=>{if(i){Oe(!0);var a=await xr();a.pull(t).then(u=>{Oe(!1),ge.updateAllOpenWindows(Ye)})}})}function kl(l){return new Promise((t,i)=>{var a=l.commit.files;if(console.log(a),a.length==0){Oe(!1),bootbox.alert("No files changed.");return}var u="";for(var d of a)u+=d.filename+": "+d.status,(d.additions||d.deletions||d.changes)&&(u+=" ("+d.additions+" additions, "+d.deletions+" deletions, "+d.changes+" changes)"),u+="<br/>";bootbox.confirm(u,m=>{m?t(l):Oe(!1)})})}async function ro(l){var t=vi();if(!!t){var i=[];for(var a in fe.filedata){var u=fe.stripLocalPath(a),d=fe.filedata[a];u&&d&&i.push({path:u,data:d})}if(Ge instanceof Uint8Array){let w="bin/"+Et()+".rom";i.push({path:w,data:Ge})}Oe(!0);var m=await xr();return m.login().then(()=>(Ut(.5),m.commit(t,l,i))).then(w=>kl(w)).then(w=>m.push(w)).then(w=>(Oe(!1),Bt("Pushed files to "+t),w)).catch(w=>{Oe(!1),console.log(w),Ce("Could not push GitHub repository: "+w)})}}function Pl(){var l=vi();!l||bootbox.prompt("<p>Are you sure you want to delete this repository ("+l+") from browser storage?</p><p>All changes since last commit will be lost.</p><p>Type DELETE to proceed.<p>",t=>{t.trim().toUpperCase()=="DELETE"&&Al()})}function Al(){var l=vi(),t;Oe(!0),Ye.keys().then(i=>Promise.all(i.map(a=>Ye.removeItem(a)))).then(()=>(t=xr(),t.getGithubSession(l))).then(i=>{t.bind(i,!1)}).then(()=>{Oe(!1),Z={repo:"/"},Ir()})}function Fl(l){return Ge==null?(Ce("Please fix errors before sharing."),!0):Ge instanceof Uint8Array?(Dl(),Ft("lib/liblzg.js").then(()=>{var t=vs(window.Module,Array.from(Ge));window.Module=null;var i=btoa(Gi(t)),a={p:ie,r:i},u=$.param(a),d=Ll(u,"player.html"),m='<iframe width=640 height=600 src="'+d+'">';$("#embedLinkTextarea").text(d),$("#embedIframeTextarea").text(m),$("#embedLinkModal").modal("show"),$("#embedAdviceWarnAll").hide(),$("#embedAdviceWarnIE").hide(),d.length>=65536?$("#embedAdviceWarnAll").show():d.length>=5120&&$("#embedAdviceWarnIE").show()}),!0):(Ce("Can't share a Verilog executable yet. (It's not actually a ROM...)"),!0)}function Dl(){console.log("clipboard"),import("./clipboard-JDH3YSSJ.js").then(l=>{let t=l.default;new t(".btn")})}function Ll(l,t){console.log(l);var i=window.location,a=i.pathname.replace("index.html",""),u=i.host=="8bitworkshop.com"?"https:":i.protocol,d=u+"//"+i.host+a+t+"?"+l;return d}function Rl(l){var t=lt&&lt.code_start;Ft("lib/c2t.js").then(()=>{var i="",a=function(de){i+=de+`
`},u=window.c2t({noInitialRun:!0,print:a,printErr:a}),d=u.FS,m=Et()+".bin",w=Et()+".wav";d.writeFile(m,Ge,{encoding:"binary"});var b=["-2bc",m+","+t.toString(16),w];u.callMain(b);var L=d.readFile(w,{encoding:"binary"});if(L){var U=new Blob([L],{type:"audio/wav"});(0,Zt.saveAs)(U,w),i+="Then connect your audio output to the cassette input, turn up the volume, and play the audio file.",Bt('<pre style="white-space: pre-wrap">'+i+"</pre>")}})}function Il(l){Ft("lib/makewav.js").then(()=>{let t="",i=function(w){t+=w+`
`};var a=xt(Et());let u=a+".bin",d=a+".wav";window.makewav({noInitialRun:!1,print:i,printErr:i,arguments:["-ts","-f0","-v10",u],preRun:w=>{w.FS.writeFile(u,Ge,{encoding:"binary"})}}).ready.then(w=>{let b=[u];w.run(b),console.log(t);let U=w.FS.readFile(d,{encoding:"binary"});if(U){let de=new Blob([U],{type:"audio/wav"});(0,Zt.saveAs)(de,d),t+=`
Connect your audio output to the SuperCharger input, turn up the volume, and play the audio file.`,Bt('<pre style="white-space: pre-wrap">'+t+"</pre>")}})})}function Ml(l){if(Ge==null)return Ce("Please fix errors before exporting."),!0;var t;switch(ht(ie)){case"vcs":t=Il;break;case"apple2":t=Rl;break}if(t===void 0)return Ce("Cassette export is not supported on this platform."),!0;t(l)}function Nl(l){var t=ge.getActive();if(t&&t.setText){var i=ge.getActiveID();$.get("presets/"+ht(ie)+"/"+i,a=>{bootbox.confirm("Reset '"+i+"' to default?",u=>{u&&t.setText(a)})},"text").fail(()=>{Ce(Be?"Can only revert built-in examples. If you want to revert all files, You can pull from the repository.":"Can only revert built-in examples.")})}else Ce("Cannot revert the active window. Please choose a text file.")}function Ol(l){var t=ge.getActive();if(t&&t.getPath){var i=ge.getActiveID();bootbox.confirm("Delete '"+i+"'?",a=>{a&&Ye.removeItem(i).then(()=>{Z.file==i?(yr.unsetLastPreset(),Ir()):(bi(),Bt("Deleted "+i))})})}else Ce("Cannot delete the active window.")}function $l(l){var t=ge.getActive();if(t&&t.getPath&&fe.getFile(t.getPath())){var i=ge.getActiveID();bootbox.prompt({title:"Rename '"+i+"' to?",value:i,callback:a=>{var u=fe.getFile(t.getPath());if(a&&a!=i&&u){if(!qa(a))return;Ye.removeItem(i).then(()=>Ye.setItem(a,u)).then(()=>{bi(),alert("Renamed "+i+" to "+a),i==fe.mainPath&&za(a)})}}})}else Ce("Cannot rename the active window.")}function Wl(l){if(Ge==null)return Ce("Please finish compiling with no errors before downloading ROM."),!0;var t=xt(Et());if(F.getDownloadFile){var i=F.getDownloadFile(),t=xt(Et());(0,Zt.saveAs)(i.blob,t+i.extension)}else if(Ge instanceof Uint8Array){var a=new Blob([Ge],{type:"application/octet-stream"}),u=F.getROMExtension&&F.getROMExtension(Ge)||"-"+ht(ie)+".bin";(0,Zt.saveAs)(a,t+u)}else Ce(`The "${ie}" platform doesn't have downloadable ROMs.`)}function jl(l){var t=ge.getCurrentText();if(!t)return!1;var i=new Blob([t],{type:"text/plain;charset=utf-8"});(0,Zt.saveAs)(i,xl(),{autoBom:!1})}async function io(){let l=(await import("./jszip.min-SSIOTNUA.js")).default;return new l}async function Bl(l){var t=await io();fe.iterateFiles((i,a)=>{a&&t.file(yt(i),a)}),t.generateAsync({type:"blob"}).then(i=>{(0,Zt.saveAs)(i,Et()+"-"+ht(ie)+".zip")})}async function Hl(l){var t=await io(),i=await Ye.keys();Oe(!0);try{var a=0;await Promise.all(i.map(d=>Ye.getItem(d).then(m=>{Ut(a++/(i.length+1)),m&&t.file(d,m)})));var u=await t.generateAsync({type:"blob"});(0,Zt.saveAs)(u,ht(ie)+"-all.zip")}finally{Oe(!1)}}function Ul(l){var t={};l.append($("<option />").text("--------- Examples ---------").attr("disabled","true"));for(var i=0;i<fn.length;i++){var a=fn[i],u=a.chapter?a.chapter+". "+a.name:a.name,d=a.id==fe.mainPath;l.append($("<option />").val(a.id).text(u).attr("selected",d?"selected":null)),d&&(dn=a),t[a.id]=u}return t}function zl(l){if(wt&&!fi){var t=0,i=ai();if(i)for(let u in i){var a=i[u];a.platform_id&&ht(a.platform_id)==ht(ie)&&(t++==0&&l.append($("<option />").text("------ Repositories ------").attr("disabled","true")),l.append($("<option />").val(a.url).text(a.url.substring(a.url.indexOf("/")))))}}}async function no(l,t,i,a){var u=await Ye.keys(),d=0;u||(u=[]);for(var m=0;m<u.length;m++){var w=u[m];if(w.startsWith(i)&&!a[w]){d++==0&&l.append($("<option />").text("------- "+t+" -------").attr("disabled","true"));var b=w.substring(i.length);l.append($("<option />").val(w).text(b).attr("selected",w==fe.mainPath?"selected":null))}}}function ao(l){l.css("visibility","visible");var t=fe.mainPath;l.val()!=t&&l.append($("<option />").val(t).text(t).attr("selected","selected"))}async function bi(){var l=$("#preset_select").empty();if(Be)l.append($("<option />").val("/").text("Leave Repository")),$("#repo_name").text(yt(Be)+"/").show(),await no(l,Be,"",{}),ao(l);else{zl(l);var t=Ul(l);await no(l,"Local Files","",t),ao(l)}l.off("change").change(function(i){za($(this).val().toString())})}function ql(l){var t=$("<p/>");if(l.path!=null){var i=l.line?l.label?`(${l.path} @ ${l.label})`:`(${l.path}:${l.line})`:`(${l.path})`,a=$("<a/>").text(i),u=l.path;u==Et()&&(u=fe.mainPath),ge.isWindow(u)&&a.click(d=>{var m=ge.createOrShow(u);m instanceof oi&&m.setCurrentLine(l,!0)}),t.append(a),t.append("&nbsp;")}return t.append($("<span/>").text(l.msg)),t}function so(){$("#error_alert").hide(),Ha=!1}function Ya(l,t){var i=$("#error_alert_msg").empty();for(var a of l.slice(0,10))i.append(ql(a));$("#error_alert").show(),Ha=t}function oo(l,t){if(t!=null){var i={msg:t,line:0};l instanceof ia&&l.$loc&&(i=Object.create(l.$loc),i.msg=t,console.log(i)),Ya([i],!0)}}var Vl=new Date,yi;function Gl(){if(window.ga&&yi){var l=new Date;ga("send","timing","load",ie,yi.getTime()-Vl.getTime()),ga("send","timing","build",ie,l.getTime()-yi.getTime()),yi=null}}async function Yl(l){if("errors"in l&&l.errors.length>0)di.addClass("has-errors"),ge.setErrors(l.errors),mi(),Ya(l.errors,!1);else{if(di.removeClass("has-errors"),ge.setErrors(null),so(),l==null||"unchanged"in l&&l.unchanged||!("output"in l))return;F.debugSymbols=new Ts(l.symbolmap,l.debuginfo),lt=l.params;var t=l.output;if(t!=null)try{wi(),po(),await F.loadROM(ol(),t),Ge=t,ja||Dt(),Gl(),ju()}catch(i){console.log(i),di.addClass("has-errors"),oo(i,i+""),Ge=null,mi();return}mi(),ge.refresh(!1)}}async function Xl(){if(F.loadBIOS){var l=ie+".rom",t=await Ye.getItem(l);t instanceof Uint8Array?(console.log("loading BIOS",l,t.length+" bytes"),F.loadBIOS(l,t)):console.log("BIOS file must be binary")}}function lo(){var l=$("#mem_info");l.hide(),hi=null}function xi(l){if(!!Cs(F)){var t=$("#mem_info"),i=F.getDebugCategories();i&&!pi&&(pi=i[0]);var a=l&&F.getDebugInfo(pi,l);if(a){var u=hi?ms(hi,a):a;t.show().html(u);var d=$('<div class="mem_info_links">'),m=b=>{var L=$("<a>"+b+"</a>");b==pi&&L.addClass("selected"),L.click(U=>{pi=b,hi=null,xi(Kt)}),d.append(L),d.append("<span> </span>")};for(var w of i)m(w);t.append("<br>"),t.append(d),hi=a}else lo()}}function pn(l,t){$("#debug_bar, #run_bar").find("button").removeClass("btn_active").removeClass("btn_stopped"),$("#dbg_"+l).addClass("btn_"+t)}function Xa(){return F&&Ge!=null}function kt(){return Xa()?!0:(Ce("Can't do this until build successfully completes."),!1)}function Ql(l){if(Ba==null&&!!F.disassemble){var t=fe.getListings(),i="#disasm",a=32;if(t){var u=l.c?l.c.EPC||l.c.PC:0;for(var d in t){var m=t[d],w=m.assemblyfile||m.sourcefile,b=fe.filename2path[d]||d;if(w==m.sourcefile&&(b=ge.findWindowWithFilePrefix(d)),ge.isWindow(b)){var L=w&&w.findLineForOffset(u,32);L&&u-L.offset<a&&(i=b,a=u-L.offset)}}}ge.createOrShow(i,!0)}}function gn(l){Kt=l,xi(l),Ql(l),ge.refresh(!0),hn=!0}function uo(l){F.setupDebug&&F.setupDebug((t,i)=>{gn(t),pn(l||"pause","stopped"),i&&Ya([{msg:"STOPPED: "+i,line:0}],!0)})}function er(l){!kt()||(Ka(),uo(l),l&&pn(l,"active"))}function Ht(){F&&F.isRunning()&&(F.pause(),console.log("Paused")),pn("pause","stopped")}function Jl(){!kt()||(wi(),Ht(),ja=!0)}function Dt(){F.isRunning()||(F.resume(),console.log("Resumed")),pn("go","active"),Ha&&so()}function co(){!kt()||(wi(),F.isRunning()||ge.refresh(!1),Dt(),ja=!1,Ba=null)}function Kl(){!kt()||(er("step"),F.step())}function Zl(){!kt()||(er("stepover"),F.stepOver())}function eu(){!kt()||(er("tovsync"),F.runToVsync())}function fo(){var l=ge.getActive();return l&&l.getCursorPC&&l.getCursorPC()}function ya(l){!kt()||!(l>=0)||(er("toline"),console.log("Run to",l.toString(16)),F.runToPC?F.runToPC(l):F.runEval(t=>t.PC==l))}function tu(){F.restartAtPC(fo())?co():Ce("Could not restart program at selected line.")}function ru(){ya(fo())}function iu(){!kt()||(er("stepout"),F.runUntilReturn())}function nu(){!kt()||(er("stepback"),F.stepBack())}function wi(){Kt=null,F.clearDebug&&F.clearDebug(),uo(),xi()}function Qa(){F.reset(),po()}function au(){!kt()||(wi(),Qa(),Dt())}function su(){if(!!kt()){var l=Rr;Ka(),F.setupDebug&&F.runEval?(wi(),Dt(),Qa(),er("restart"),F.runEval(t=>!0)):(Qa(),Dt()),l&&go()}}function ou(){var l=$("#debugExprModal"),t=$("#debugExprSubmit");$("#debugExprInput").val(Ks),$("#debugExprExamples").text(lu()),l.modal("show"),t.off("click").on("click",()=>{var i=$("#debugExprInput").val()+"";l.modal("hide"),uu(i)})}function lu(){var l=F.saveState&&F.saveState(),t=l.c;console.log(t,l);var i="";return t.PC&&(i+="c.PC == 0x"+De(t.PC)+`
`),t.SP&&(i+="c.SP < 0x"+De(t.SP)+`
`),t.HL&&(i+=`c.HL == 0x4000
`),F.readAddress&&(i+=`this.readAddress(0x1234) == 0x0
`),F.readVRAMAddress&&(i+=`this.readVRAMAddress(0x1234) != 0x80
`),F.getRasterScanline&&(i+=`this.getRasterScanline() > 222
`),i}function uu(l){var t=new Function("c","return ("+l+");").bind(F);er(),F.runEval(t),Ks=l}function ho(){F.isRunning()?(ge.tick(),hn=!1):hn||(ge.tick(),hn=!0),setTimeout(ho,100)}function Oe(l){l?(Ut(0),$("#pleaseWaitModal").modal("show")):(Ut(1),$("#pleaseWaitModal").modal("hide"))}function Ut(l){$("#pleaseWaitProgressBar").css("width",l*100+"%").show()}var Ja=!1;function cu(){Ja||Ft("lib/gif.js").then(()=>{var l=$("#emulator").find("canvas")[0];if(!l){Ce("Could not find canvas element to record video!");return}var t=0;l.style&&l.style.transform&&(l.style.transform.indexOf("rotate(-90deg)")>=0?t=-1:l.style.transform.indexOf("rotate(90deg)")>=0&&(t=1));var i=new GIF({workerScript:"lib/gif.worker.js",workers:4,quality:10,rotate:t}),a=$("#videoPreviewImage");i.on("progress",b=>{Ut(b)}),i.on("finished",b=>{a.attr("src",URL.createObjectURL(b)),Oe(!1),Dt(),$("#videoPreviewModal").modal("show")});var u=20,d=300,m=0;console.log("Recording video",l),$("#emulator").css("backgroundColor","#cc3333");var w=()=>{m++>d?(console.log("Rendering video"),$("#emulator").css("backgroundColor","inherit"),Oe(!0),Ht(),i.render(),Ja=!1):(i.addFrame(l,{delay:u,copy:!0}),setTimeout(w,u),Ja=!0)};w()})}function mn(l){F.setFrameRate(l),l>.01?$("#fps_label").text(l.toFixed(2)):$("#fps_label").text("1/"+Math.round(1/l))}function fu(){var l=F.getFrameRate();l=l/2,l>1e-5&&mn(l)}function du(){var l=F.getFrameRate();l=Math.min(60,l*2),mn(l)}function hu(){mn(60/65536)}function pu(){Dt(),mn(60)}function gu(){ge.refresh(!1);var l=ge.getActive();if(l.getSourceFile&&l.setTimingResult){var t=F.newCodeAnalyzer();t.showLoopTimingForPC(0),l.setTimingResult(t)}}function Ka(){Rr&&(F.setRecorder(null),$("#dbg_record").removeClass("btn_recording"),$("#replaydiv").hide(),lo(),Rr=!1)}function po(){Rr&&nt.reset()}function go(){nt.reset(),F.setRecorder(nt),$("#dbg_record").addClass("btn_recording"),$("#replaydiv").show(),Rr=!0}function mu(){Rr?Ka():go()}function vu(){if(F.showHelp){let l=F.getToolForFilename(fe.mainPath);F.showHelp(l)}}function tr(l,t,i){var a=ge.getActive();a&&a.insertText?bootbox.prompt({title:"Add "+l+" File to Project",value:"filename"+t,callback:u=>{if(u&&u.trim().length>0){if(!qa(u))return;var d=u,m=`
`+i(u)+`
`;fe.loadFiles([d]).then(w=>{w&&w.length?Ce(u+" already exists; including anyway"):fe.updateFile(d,`
`),a.insertText(m),mi()})}}}):Ce("Can't insert text in this window -- switch back to main file")}function bu(){var l=Et(),t=F.getToolForFilename(l);l.endsWith(".c")||t=="sdcc"||t=="cc65"||t=="cmoc"||t=="smlrc"?tr("Header",".h",i=>'#include "'+i+'"'):t=="dasm"||t=="zmac"?tr("Include",".inc",i=>'	include "'+i+'"'):t=="ca65"||t=="sdasz80"||t=="vasm"||t=="armips"?tr("Include",".inc",i=>'	.include "'+i+'"'):t=="verilator"?tr("Verilog",".v",i=>'`include "'+i+'"'):t=="wiz"?tr("Include",".wiz",i=>'import "'+i+'";'):t=="ecs"?tr("Include",".ecs",i=>'import "'+i+'"'):Ce("Can't add include file to this project type ("+t+")")}function yu(){var l=Et(),t=F.getToolForFilename(l);l.endsWith(".c")||t=="sdcc"||t=="cc65"||t=="cmoc"||t=="smlrc"?tr("Linked C (or .s)",".c",i=>'//#link "'+i+'"'):l.endsWith("asm")||l.endsWith(".s")||t=="ca65"||t=="lwasm"?tr("Linked ASM",".inc",i=>';#link "'+i+'"'):Ce("Can't add linked file to this project type ("+t+")")}function xu(){ze=new Ji($("#toolbar")[0],null),ze.grp.prop("id","run_bar"),ze.add("ctrl+alt+r","Reset","glyphicon-refresh",au).prop("id","dbg_reset"),ze.add("ctrl+alt+,","Pause","glyphicon-pause",Jl).prop("id","dbg_pause"),ze.add("ctrl+alt+.","Resume","glyphicon-play",co).prop("id","dbg_go"),F.restartAtPC&&ze.add("ctrl+alt+/","Restart at Cursor","glyphicon-play-circle",tu).prop("id","dbg_restartatline"),ze.newGroup(),ze.grp.prop("id","debug_bar"),F.runEval&&ze.add("ctrl+alt+e","Reset and Debug","glyphicon-fast-backward",su).prop("id","dbg_restart"),F.stepBack&&ze.add("ctrl+alt+b","Step Backwards","glyphicon-step-backward",nu).prop("id","dbg_stepback"),F.step&&ze.add("ctrl+alt+s","Single Step","glyphicon-step-forward",Kl).prop("id","dbg_step"),F.stepOver&&ze.add("ctrl+alt+t","Step Over","glyphicon-hand-right",Zl).prop("id","dbg_stepover"),F.runUntilReturn&&ze.add("ctrl+alt+o","Step Out of Subroutine","glyphicon-hand-up",iu).prop("id","dbg_stepout"),F.runToVsync&&ze.add("ctrl+alt+n","Next Frame/Interrupt","glyphicon-forward",eu).prop("id","dbg_tovsync"),(F.runEval||F.runToPC)&&!ie.startsWith("verilog")&&ze.add("ctrl+alt+l","Run To Line","glyphicon-save",ru).prop("id","dbg_toline"),ze.newGroup(),ze.grp.prop("id","xtra_bar"),$(".dropdown-menu").collapse({toggle:!1}),$("#item_new_file").click(pl),$("#item_upload_file").click(gl),$("#item_open_directory").click(vl),$("#item_github_login").click(wl),$("#item_github_logout").click(El),$("#item_github_import").click(Sl),$("#item_github_publish").click(_l),$("#item_github_push").click(Tl),$("#item_github_pull").click(Cl),$("#item_repo_delete").click(Pl),$("#item_share_file").click(Fl),$("#item_reset_file").click(Nl),$("#item_rename_file").click($l),$("#item_delete_file").click(Ol),F.runEval?$("#item_debug_expr").click(ou).show():$("#item_debug_expr").hide(),$("#item_download_rom").click(Wl),$("#item_download_file").click(jl),$("#item_download_zip").click(Bl),$("#item_download_allzip").click(Hl),$("#item_record_video").click(cu),ie.startsWith("apple2")||ie.startsWith("vcs")?$("#item_export_cassette").click(Ml):$("#item_export_cassette").hide(),F.setFrameRate&&F.getFrameRate&&($("#dbg_slower").click(fu),$("#dbg_faster").click(du),$("#dbg_slowest").click(hu),$("#dbg_fastest").click(pu)),$("#item_addfile_include").click(bu),$("#item_addfile_link").click(yu),$("#item_request_persist").click(()=>Ua(!0,!1)),ho(),F.showHelp&&ze.add("ctrl+alt+?","Show Help","glyphicon-question-sign",vu),F.newCodeAnalyzer&&ze.add(null,"Analyze CPU Timing","glyphicon-time",gu),F.setRecorder&&F.advance&&wu()}function wu(){var l=$("#replayslider"),t=$("#clockslider"),i=$("#replay_frame"),a=$("#replay_clock");F.advanceFrameClock||$("#clockdiv").hide();var u=()=>{i.text(nt.lastSeekFrame+""),a.text(nt.lastSeekStep+"")},d=b=>{Ht();var L=parseInt(l.val().toString()),U=parseInt(t.val().toString());nt.loadFrame(L,U)>=0&&(t.attr("min",0),t.attr("max",nt.lastStepCount),u(),gn(F.saveState()))},m=b=>{Ht(),nt.loadFrame(b)>=0&&(l.val(b),u(),gn(F.saveState()))},w=b=>{Ht();var L=parseInt(l.val().toString());nt.loadFrame(L,b)>=0&&(t.val(b),u(),gn(F.saveState()))};nt.callbackStateChanged=()=>{l.attr("min",0),l.attr("max",nt.numFrames()),l.val(nt.currentFrame()),t.val(nt.currentStep()),u(),xi(F.saveState())},l.on("input",d),t.on("input",d),$("#replay_min").click(()=>{m(1)}),$("#replay_max").click(()=>{m(nt.numFrames())}),$("#replay_back").click(()=>{m(parseInt(l.val().toString())-1)}),$("#replay_fwd").click(()=>{m(parseInt(l.val().toString())+1)}),$("#clock_back").click(()=>{w(parseInt(t.val().toString())-1)}),$("#clock_fwd").click(()=>{w(parseInt(t.val().toString())+1)}),$("#replay_bar").show(),ze.add("ctrl+alt+0","Start/Stop Replay Recording","glyphicon-record",mu).prop("id","dbg_record")}function Eu(){try{var l=window.screen.orientation||window.screen.msOrientation||window.screen.mozOrientation||null;if(l){if(l.type.indexOf("landscape")!==-1)return!0;if(l.type.indexOf("portrait")!==-1)return!1}if("orientation"in window){var t=window.orientation;if(t===0||t===180)return!1;if(t===90||t===270)return!0}}catch(i){}return window.innerWidth>window.innerHeight}async function Su(){if(yr.shouldCompleteTour()){await Ft("lib/bootstrap-tourist.js");var l=ie.startsWith("vcs"),t=[{element:"#platformsMenuButton",placement:"right",title:"Platform Selector",content:`You're currently on the "<b>`+ie+'</b>" platform. You can choose a different one from the menu.'},{element:"#preset_select",title:"Project Selector",content:"You can choose different code examples, create your own files, or import projects from GitHub."},{element:"#workspace",title:"Code Editor",content:l?"Type your 6502 assembly code into the editor, and it'll be assembled in real-time.":"Type your source code into the editor, and it'll be compiled in real-time."},{element:"#emulator",placement:"left",title:"Emulator",content:"We'll load your compiled code into the emulator whenever you make changes."},{element:"#debug_bar",placement:"bottom",title:"Debug Tools",content:"Use these buttons to set breakpoints, single step through code, pause/resume, and use debugging tools."},{element:"#dropdownMenuButton",title:"Main Menu",content:"Click the menu to create new files, download your code, or share your work with others."},{element:"#sidebar",title:"Sidebar",content:"Pull right to expose the sidebar. It lets you switch between source files, view assembly listings, and use other tools like Disassembler, Memory Browser, and Asset Editor."}];Eu()||t.unshift({element:"#controls_top",placement:"bottom",title:"Portrait mode detected",content:"This site works best on desktop browsers. For best results, rotate your device to landscape orientation."}),window.location.host.endsWith("8bitworkshop.com")&&(t.unshift({element:"#dropdownMenuButton",placement:"right",title:"Cookie Consent",content:'Before we start, we should tell you that this website stores cookies and other data in your browser. You can review our <a href="/privacy.html" target="_new">privacy policy</a>.'}),t.push({element:"#booksMenuButton",placement:"left",title:"Books",content:"Get some books that explain how to program all of this stuff, and write some games!"})),fi&&(t.unshift({element:"#dropdownMenuButton",placement:"right",title:"Developer Analytics",content:"BTW, we send stack traces to sentry.io when exceptions are thrown. Hope that's ok."}),t.unshift({element:"#dropdownMenuButton",placement:"right",title:"Welcome to 8bitworkshop Desktop!",content:'The directory "~/8bitworkshop" contains all of your file edits and built ROM images. You can create new projects under the platform directories (e.g. "c64/myproject")'}));var i=new Tour({autoscroll:!1,steps:t,onEnd:()=>{yr.completedTour()}});setTimeout(()=>{i.start()},2500)}}function vn(l){var t=(l.message||l.error||l)+"";if(t.indexOf("QuotaExceededError")>=0)Ua(!1,!1);else{var i=l.error||l.reason;i!=null&&i instanceof ia&&_u(i)}}function _u(l){console.log("haltEmulation"),Ht(),Wu(l)}function Tu(){window.addEventListener("error",vn),window.addEventListener("unhandledrejection",vn)}function mo(){window.removeEventListener("error",vn),window.removeEventListener("unhandledrejection",vn)}function Ir(l){mo(),l?window.location.replace("?"+$.param(Z)):window.location.href="?"+$.param(Z)}function bn(){ie&&(Z.platform=ie),delete Z[""],history.replaceState({},"","?"+$.param(Z))}function Cu(){var l=!1;document.addEventListener("visibilitychange",()=>{document.visibilityState=="hidden"&&F&&F.isRunning()?(Ht(),l=!0):document.visibilityState=="visible"&&l&&(Dt(),l=!1)}),$(window).on("focus",()=>{l&&(Dt(),l=!1)}),$(window).on("blur",()=>{F&&F.isRunning()&&(Ht(),l=!0)}),$(window).on("orientationchange",()=>{F&&F.resize&&setTimeout(F.resize.bind(F),200)})}function ku(){var l=$(document).find(".emucontrols-"+Fr(ie));ie.endsWith(".mame")&&l.show();var t=$("#emulator").find("canvas");t&&(t.on("focus",()=>{F.isRunning()&&(l.fadeIn(200),F.resume())}),t.on("blur",()=>{l.fadeOut(200)}))}function Pu(){window.ga&&($(".dropdown-item").click(l=>{l.target&&l.target.id&&gi("menu",l.target.id)}),ga("send","pageview",location.pathname+"?platform="+ie+(Be?"&repo="+Be:"&file="+Z.file)))}async function Au(){if(!ra[ie])throw Error("Invalid platform '"+ie+"'.");let l=$("#emuscreen")[0],t=ta(Z.options||"");if(F=new ra[ie](l,t),Mu(),nt=new _s(F),fn=F.getPresets?F.getPresets():[],!Z.file){var i=yr.getLastPreset(),a=i||(Be?null:fn[0].id);Z.file=a||"DEFAULT",a||Ce("There is no default main file for this project. Try selecting one from the pulldown.")}ie=="vcs"&&Z.file.startsWith("examples/")&&!Z.file.endsWith(".a")&&(Z.file+=".a"),bn(),Tu(),Pu(),await F.start(),await Xl(),await ul(),await dl(Z.file),F.sourceFileFetch=u=>fe.filedata[u],xu(),Cu(),ku(),it?Fu():(bi(),Du(),Su()),vo()}function Fu(){$("#dropdownMenuButton").hide(),$("#platformsMenuButton").hide(),$("#booksMenuButton").hide()}function Du(){Fr(ie)=="nes"?$(".book-nes").addClass("book-active"):Fr(ie)=="vcs"?$(".book-vcs").addClass("book-active"):Fr(ie)=="verilog"?$(".book-verilog").addClass("book-active"):F.getToolForFilename(Et())=="sdcc"&&$(".book-arcade").addClass("book-active")}function vo(){setTimeout(()=>{$("#controls_dynamic").css("visibility","inherit")},250)}function Lu(){var l="workspace-split3-"+ie;it&&(l="embed-"+l);var t;ie.startsWith("vcs")?t=[0,50,50]:it||si?t=[0,55,45]:t=[12,44,44];var i=wt&&localStorage.getItem(l);if(i)try{t=JSON.parse(i)}catch(u){console.log(u)}var a=il(["#sidebar","#workspace","#emulator"],{sizes:t,minSize:[0,250,250],onDrag:()=>{F&&F.resize&&F.resize()},onDragEnd:()=>{wt&&localStorage.setItem(l,JSON.stringify(a.getSizes())),ge&&ge.resize()}})}function Ru(l){let t=Dr(Z.ignore)||it;Oe(!0),Qi(l,async i=>{if(i){var a=yt(l);console.log("Importing "+i.length+" bytes as "+a);try{var u=await Ye.getItem(a);Oe(!1),u!=null&&t||(u==null||confirm("Replace existing file '"+a+"'?"))&&await Ye.setItem(a,i),delete Z.importURL,Z.file=a,bn(),yo()}finally{Oe(!1)}}else Ce("Could not load source code from URL: "+l),Oe(!1)},"text")}async function Iu(){var l=Dr(Z.ignore),t=Dr(Z.force);it?l=!t:t=!1;for(var i=0;i<20;i++){let u=Z["file"+i+"_name"],d=Z["file"+i+"_data"];if(u==null||d==null)break;var a=await Ye.getItem(u);if(!(l&&a)){let m=d;Z["file"+i+"_type"]=="binary"&&(m=Vi(atob(m))),(!a||t||confirm("Replace existing file '"+u+"'?"))&&await Ye.setItem(u,m)}i==0&&(Z.file=u),delete Z["file"+i+"_name"],delete Z["file"+i+"_data"],delete Z["file"+i+"_type"]}delete Z.ignore,delete Z.force,bn()}function Mu(){var l=F.getPlatformName&&F.getPlatformName(),t=$('a[href="?platform='+ie+'"]');t.length&&(t.addClass("dropdown-item-checked"),l=l||t.text()||l),$(".platform_name").text(l||ie)}function Nu(){if(ie=Z.platform||yr.getLastPlatformID(),Be=Z.repo,!Z.repo&&!Z.file&&(Be=yr.getLastRepoID(ie)),wt&&Be&&Be!=="/"){var l=ai()[Be];l&&(console.log(ie,Z,l),Z.repo=Be,l.platform_id&&!Z.platform&&(Z.platform=ie=l.platform_id),!Z.file&&l.mainPath&&(Z.file=l.mainPath))}else Be="",delete Z.repo;ie||(it&&al("The 'platform' must be specified when embed=1"),ie=Z.platform="vcs")}async function bo(){if(Z.githubURL){Ga(Z.githubURL,!0);return}if(Nu(),Lu(),br=Be||ht(ie),it&&(br=(document.referrer||document.location.href)+br),Ye=fa(br),Z.importURL){Ru(Z.importURL);return}Z.file0_name&&await Iu(),yo()}async function yo(){try{var l=await Ps(Fr(ie));console.log("starting platform",ie),await Au(),document.title=document.title+" ["+ie+"] - "+(Be?"["+Be+"] - ":"")+fe.mainPath}catch(t){console.log(t),Ce('Platform "'+ie+'" failed to load.')}finally{vo()}}var Za="__use_https";function xo(l){document.cookie=Za+"="+l+";domain=8bitworkshop.com;path=/;max-age=315360000"}function Ou(){var l=to(Za);if(typeof l=="string")return!!l;var t=wt&&!localStorage.getItem("__lastplatform")?1:0;return xo(t),!!t}function $u(){bootbox.confirm('<p>Do you want to force the browser to use HTTPS from now on?</p><p>WARNING: This will make all of your local files unavailable, so you should "Download All Changes" first for each platform where you have done work.</p><p>You can go back to HTTP by setting the "'+Za+'" cookie to 0.</p>',l=>{l&&(xo(1),wo())})}function wo(){window.location.protocol=="http:"&&window.location.host=="8bitworkshop.com"&&(Ou()?(mo(),window.location.replace(window.location.href.replace(/^http:/,"https:"))):$("#item_switch_https").click($u).show())}wo();function cf(l,t){F.writeFile(l,t)}function ff(l){return F.readFile(l)}function df(){return F.saveState()}function Wu(l){var t=l&&l.message||t;oo(l,t),ge.refresh(!1),F.saveState&&xi(F.saveState())}async function hf(l){var t=fe.filedata[l];t!=null&&(ge.updateFile(l,await alternateLocalFilesystem.getFileData(l)),console.log("updating file",l))}function ju(){if(fi&&Ge instanceof Uint8Array){var l=xt(Et()),t=F.getROMExtension&&F.getROMExtension(Ge)||"-"+ht(ie)+".bin";alternateLocalFilesystem.setFileData(`bin/${l}${t}`,Ge)}}function pf(l){var t=ge.getActive();if(t instanceof oi){var i=t.editor.getSearchCursor(l);i.findNext()&&t.editor.setSelection(i.pos.to,i.pos.from)}}function Bu(){let l=!1;new IntersectionObserver((i,a)=>{for(var u of i)u.isIntersecting&&!l&&(bo(),l=!0),u.intersectionRatio==0&&Xa()&&F.isRunning()&&Ht(),u.intersectionRatio>0&&Xa()&&!F.isRunning()&&Dt()},{}).observe($("#emulator")[0])}typeof process=="undefined"&&(it&&typeof IntersectionObserver=="function"?Bu():bo());export{Os as a,Z as b,ie as c,br as d,Be as e,F as f,fe as g,ge as h,lt as i,Kt as j,ya as k,mn as l,_u as m,Lu as n,Nu as o,bo as p,cf as q,ff as r,df as s,Wu as t,hf as u,pf as v};
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
//# sourceMappingURL=chunk-JQQOUIAY.js.map
