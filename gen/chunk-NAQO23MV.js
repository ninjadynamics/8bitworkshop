import{c as P0}from"./chunk-JM5NHRL4.js";import{B as g0,O as p0,R as C0,S as _0,T as l0,Y as k0,g as N,i as S0,r as x0}from"./chunk-VOKPYVET.js";var z0=[{mn:"BRK",am:"",nb:1,il:0,c1:7,c2:0},{mn:"ORA",am:"(aa,x)",nb:2,il:0,c1:6,c2:0},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"SLO",am:"(aa,x)",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa",nb:2,il:1,c1:3,c2:0},{mn:"ORA",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"ASL",am:"aa",nb:2,il:0,c1:5,c2:0},{mn:"SLO",am:"aa",nb:2,il:1,c1:5,c2:0},{mn:"PHP",am:"",nb:1,il:0,c1:3,c2:0},{mn:"ORA",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"ASL",am:"",nb:1,il:0,c1:2,c2:0},{mn:"ANC",am:"#aa",nb:2,il:1,c1:2,c2:0},{mn:"NOP",am:"AAAA",nb:3,il:1,c1:4,c2:0},{mn:"ORA",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"ASL",am:"AAAA",nb:3,il:0,c1:6,c2:0},{mn:"SLO",am:"AAAA",nb:3,il:1,c1:6,c2:0},{mn:"BPL",am:"branch",nb:2,il:0,c1:2,c2:2},{mn:"ORA",am:"(aa),y",nb:2,il:0,c1:5,c2:1},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"SLO",am:"(aa),y",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa,x",nb:2,il:1,c1:4,c2:0},{mn:"ORA",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"ASL",am:"aa,x",nb:2,il:0,c1:6,c2:0},{mn:"SLO",am:"aa,x",nb:2,il:1,c1:6,c2:1},{mn:"CLC",am:"",nb:1,il:0,c1:2,c2:0},{mn:"ORA",am:"AAAA,y",nb:3,il:0,c1:4,c2:1},{mn:"NOP",am:"",nb:1,il:1,c1:0,c2:0},{mn:"SLO",am:"AAAA,y",nb:3,il:1,c1:7,c2:1},{mn:"NOP",am:"AAAA,x",nb:3,il:1,c1:4,c2:1},{mn:"ORA",am:"AAAA,x",nb:3,il:0,c1:4,c2:1},{mn:"ASL",am:"AAAA,x",nb:3,il:0,c1:7,c2:0},{mn:"SLO",am:"AAAA,x",nb:3,il:1,c1:7,c2:1},{mn:"JSR",am:"AAAA",nb:3,il:0,c1:6,c2:0},{mn:"AND",am:"(aa,x)",nb:2,il:0,c1:6,c2:0},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"RLA",am:"(aa,x)",nb:2,il:1,c1:8,c2:1},{mn:"BIT",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"AND",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"ROL",am:"aa",nb:2,il:0,c1:5,c2:0},{mn:"RLA",am:"aa",nb:2,il:1,c1:5,c2:0},{mn:"PLP",am:"",nb:1,il:0,c1:4,c2:0},{mn:"AND",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"ROL",am:"",nb:1,il:0,c1:2,c2:0},{mn:"ANC",am:"#aa",nb:2,il:1,c1:2,c2:0},{mn:"BIT",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"AND",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"ROL",am:"AAAA",nb:3,il:0,c1:6,c2:0},{mn:"RLA",am:"AAAA",nb:3,il:1,c1:6,c2:0},{mn:"BMI",am:"branch",nb:2,il:0,c1:2,c2:2},{mn:"AND",am:"(aa),y",nb:2,il:0,c1:5,c2:1},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"RLA",am:"(aa),y",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa,x",nb:2,il:1,c1:4,c2:0},{mn:"AND",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"ROL",am:"aa,x",nb:2,il:0,c1:6,c2:0},{mn:"RLA",am:"aa,x",nb:2,il:1,c1:6,c2:1},{mn:"SEC",am:"",nb:1,il:0,c1:2,c2:0},{mn:"AND",am:"AAAA,y",nb:3,il:0,c1:4,c2:1},{mn:"NOP",am:"",nb:1,il:1,c1:0,c2:0},{mn:"RLA",am:"AAAA,y",nb:3,il:1,c1:7,c2:1},{mn:"NOP",am:"AAAA,x",nb:3,il:1,c1:4,c2:1},{mn:"AND",am:"AAAA,x",nb:3,il:0,c1:4,c2:1},{mn:"ROL",am:"AAAA,x",nb:3,il:0,c1:7,c2:0},{mn:"RLA",am:"AAAA,x",nb:3,il:1,c1:7,c2:1},{mn:"RTI",am:"",nb:1,il:0,c1:6,c2:0},{mn:"EOR",am:"(aa,x)",nb:2,il:0,c1:6,c2:0},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"SRE",am:"(aa,x)",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa",nb:2,il:1,c1:3,c2:0},{mn:"EOR",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"LSR",am:"aa",nb:2,il:0,c1:5,c2:0},{mn:"SRE",am:"aa",nb:2,il:1,c1:5,c2:0},{mn:"PHA",am:"",nb:1,il:0,c1:3,c2:0},{mn:"EOR",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"LSR",am:"",nb:1,il:0,c1:2,c2:0},{mn:"ASR",am:"#aa",nb:2,il:1,c1:2,c2:0},{mn:"JMP",am:"AAAA",nb:3,il:0,c1:3,c2:0},{mn:"EOR",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"LSR",am:"AAAA",nb:3,il:0,c1:6,c2:0},{mn:"SRE",am:"AAAA",nb:3,il:1,c1:6,c2:0},{mn:"BVC",am:"branch",nb:2,il:0,c1:2,c2:2},{mn:"EOR",am:"(aa),y",nb:2,il:0,c1:5,c2:1},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"SRE",am:"(aa),y",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa,x",nb:2,il:1,c1:4,c2:0},{mn:"EOR",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"LSR",am:"aa,x",nb:2,il:0,c1:6,c2:0},{mn:"SRE",am:"aa,x",nb:2,il:1,c1:6,c2:1},{mn:"CLI",am:"",nb:1,il:0,c1:2,c2:0},{mn:"EOR",am:"AAAA,y",nb:3,il:0,c1:4,c2:1},{mn:"NOP",am:"",nb:1,il:1,c1:0,c2:0},{mn:"SRE",am:"AAAA,y",nb:3,il:1,c1:7,c2:1},{mn:"NOP",am:"AAAA,x",nb:3,il:1,c1:4,c2:1},{mn:"EOR",am:"AAAA,x",nb:3,il:0,c1:4,c2:1},{mn:"LSR",am:"AAAA,x",nb:3,il:0,c1:7,c2:0},{mn:"SRE",am:"AAAA,x",nb:3,il:1,c1:7,c2:1},{mn:"RTS",am:"",nb:1,il:0,c1:6,c2:0},{mn:"ADC",am:"(aa,x)",nb:2,il:0,c1:6,c2:0},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"RRA",am:"(aa,x)",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa",nb:2,il:1,c1:3,c2:0},{mn:"ADC",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"ROR",am:"aa",nb:2,il:0,c1:5,c2:0},{mn:"RRA",am:"aa",nb:2,il:1,c1:5,c2:0},{mn:"PLA",am:"",nb:1,il:0,c1:4,c2:0},{mn:"ADC",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"ROR",am:"",nb:1,il:0,c1:2,c2:0},{mn:"ARR",am:"#aa",nb:2,il:1,c1:2,c2:0},{mn:"JMP",am:"(AAAA)",nb:3,il:0,c1:5,c2:0},{mn:"ADC",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"ROR",am:"AAAA",nb:3,il:0,c1:6,c2:0},{mn:"RRA",am:"AAAA",nb:3,il:1,c1:6,c2:0},{mn:"BVS",am:"branch",nb:2,il:0,c1:2,c2:2},{mn:"ADC",am:"(aa),y",nb:2,il:0,c1:5,c2:1},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"RRA",am:"(aa),y",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa,x",nb:2,il:1,c1:4,c2:0},{mn:"ADC",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"ROR",am:"aa,x",nb:2,il:0,c1:6,c2:0},{mn:"RRA",am:"aa,x",nb:2,il:1,c1:6,c2:1},{mn:"SEI",am:"",nb:1,il:0,c1:2,c2:0},{mn:"ADC",am:"AAAA,y",nb:3,il:0,c1:4,c2:1},{mn:"NOP",am:"",nb:1,il:1,c1:0,c2:0},{mn:"RRA",am:"AAAA,y",nb:3,il:1,c1:7,c2:1},{mn:"NOP",am:"AAAA,x",nb:3,il:1,c1:4,c2:1},{mn:"ADC",am:"AAAA,x",nb:3,il:0,c1:4,c2:1},{mn:"ROR",am:"AAAA,x",nb:3,il:0,c1:7,c2:0},{mn:"RRA",am:"AAAA,x",nb:3,il:1,c1:7,c2:1},{mn:"NOP",am:"#aa",nb:2,il:1,c1:0,c2:0},{mn:"STA",am:"(aa,x)",nb:2,il:0,c1:6,c2:0},{mn:"NOP",am:"#aa",nb:2,il:1,c1:0,c2:0},{mn:"SAX",am:"(aa,x)",nb:2,il:1,c1:6,c2:1},{mn:"STY",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"STA",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"STX",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"SAX",am:"aa",nb:2,il:1,c1:3,c2:0},{mn:"DEY",am:"",nb:1,il:0,c1:2,c2:0},{mn:"NOP",am:"#aa",nb:2,il:1,c1:0,c2:0},{mn:"TXA",am:"",nb:1,il:0,c1:2,c2:0},{mn:"ANE",am:"#aa",nb:2,il:1,c1:0,c2:0},{mn:"STY",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"STA",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"STX",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"SAX",am:"AAAA",nb:3,il:1,c1:4,c2:0},{mn:"BCC",am:"branch",nb:2,il:0,c1:2,c2:2},{mn:"STA",am:"(aa),y",nb:2,il:0,c1:6,c2:0},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"SHA",am:"(aa),y",nb:2,il:1,c1:0,c2:0},{mn:"STY",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"STA",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"STX",am:"aa,y",nb:2,il:0,c1:4,c2:0},{mn:"SAX",am:"aa,y",nb:3,il:1,c1:4,c2:1},{mn:"TYA",am:"",nb:1,il:0,c1:2,c2:0},{mn:"STA",am:"AAAA,y",nb:3,il:0,c1:5,c2:0},{mn:"TXS",am:"",nb:1,il:0,c1:2,c2:0},{mn:"SHS",am:"AAAA,y",nb:3,il:1,c1:0,c2:0},{mn:"SHY",am:"AAAA,x",nb:3,il:1,c1:0,c2:0},{mn:"STA",am:"AAAA,x",nb:3,il:0,c1:5,c2:0},{mn:"SHX",am:"AAAA,y",nb:3,il:1,c1:0,c2:0},{mn:"SHA",am:"AAAA,y",nb:3,il:1,c1:0,c2:0},{mn:"LDY",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"LDA",am:"(aa,x)",nb:2,il:0,c1:6,c2:0},{mn:"LDX",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"LAX",am:"(aa,x)",nb:2,il:1,c1:6,c2:1},{mn:"LDY",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"LDA",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"LDX",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"LAX",am:"aa",nb:2,il:1,c1:3,c2:0},{mn:"TAY",am:"",nb:1,il:0,c1:2,c2:0},{mn:"LDA",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"TAX",am:"",nb:1,il:0,c1:2,c2:0},{mn:"LXA",am:"#aa",nb:2,il:1,c1:0,c2:0},{mn:"LDY",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"LDA",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"LDX",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"LAX",am:"AAAA",nb:3,il:1,c1:4,c2:0},{mn:"BCS",am:"branch",nb:2,il:0,c1:2,c2:2},{mn:"LDA",am:"(aa),y",nb:2,il:0,c1:5,c2:1},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"LAX",am:"(aa),y",nb:2,il:1,c1:5,c2:1},{mn:"LDY",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"LDA",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"LDX",am:"aa,y",nb:2,il:0,c1:4,c2:0},{mn:"LAX",am:"aa,y",nb:2,il:1,c1:4,c2:1},{mn:"CLV",am:"",nb:1,il:0,c1:2,c2:0},{mn:"LDA",am:"AAAA,y",nb:3,il:0,c1:4,c2:1},{mn:"TSX",am:"",nb:1,il:0,c1:2,c2:0},{mn:"LAS",am:"AAAA,y",nb:3,il:1,c1:0,c2:0},{mn:"LDY",am:"AAAA,x",nb:3,il:0,c1:4,c2:1},{mn:"LDA",am:"AAAA,x",nb:3,il:0,c1:4,c2:1},{mn:"LDX",am:"AAAA,y",nb:3,il:0,c1:4,c2:1},{mn:"LAX",am:"AAAA,y",nb:3,il:1,c1:4,c2:1},{mn:"CPY",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"CMP",am:"(aa,x)",nb:2,il:0,c1:6,c2:0},{mn:"NOP",am:"#aa",nb:2,il:1,c1:0,c2:0},{mn:"DCP",am:"(aa,x)",nb:2,il:1,c1:8,c2:1},{mn:"CPY",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"CMP",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"DEC",am:"aa",nb:2,il:0,c1:5,c2:0},{mn:"DCP",am:"aa",nb:2,il:1,c1:5,c2:0},{mn:"INY",am:"",nb:1,il:0,c1:2,c2:0},{mn:"CMP",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"DEX",am:"",nb:1,il:0,c1:2,c2:0},{mn:"SBX",am:"#aa",nb:2,il:1,c1:2,c2:0},{mn:"CPY",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"CMP",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"DEC",am:"AAAA",nb:3,il:0,c1:3,c2:0},{mn:"DCP",am:"AAAA",nb:3,il:1,c1:6,c2:0},{mn:"BNE",am:"branch",nb:2,il:0,c1:2,c2:2},{mn:"CMP",am:"(aa),y",nb:2,il:0,c1:5,c2:1},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"DCP",am:"(aa),y",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa,x",nb:2,il:1,c1:4,c2:0},{mn:"CMP",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"DEC",am:"aa,x",nb:2,il:0,c1:6,c2:0},{mn:"DCP",am:"aa,x",nb:2,il:1,c1:6,c2:1},{mn:"CLD",am:"",nb:1,il:0,c1:2,c2:0},{mn:"CMP",am:"AAAA,y",nb:3,il:0,c1:4,c2:1},{mn:"NOP",am:"",nb:1,il:1,c1:0,c2:0},{mn:"DCP",am:"AAAA,y",nb:3,il:1,c1:7,c2:1},{mn:"NOP",am:"AAAA,x",nb:3,il:1,c1:4,c2:1},{mn:"CMP",am:"AAAA,x",nb:3,il:0,c1:4,c2:1},{mn:"DEC",am:"AAAA,x",nb:3,il:0,c1:7,c2:0},{mn:"DCP",am:"AAAA,x",nb:3,il:1,c1:7,c2:1},{mn:"CPX",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"SBC",am:"(aa,x)",nb:2,il:0,c1:6,c2:0},{mn:"NOP",am:"#aa",nb:2,il:1,c1:0,c2:0},{mn:"ISB",am:"(aa,x)",nb:2,il:1,c1:8,c2:1},{mn:"CPX",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"SBC",am:"aa",nb:2,il:0,c1:3,c2:0},{mn:"INC",am:"aa",nb:2,il:0,c1:5,c2:0},{mn:"ISB",am:"aa",nb:2,il:1,c1:5,c2:0},{mn:"INX",am:"",nb:1,il:0,c1:2,c2:0},{mn:"SBC",am:"#aa",nb:2,il:0,c1:2,c2:0},{mn:"NOP",am:"",nb:1,il:0,c1:2,c2:0},{mn:"SBC",am:"#aa",nb:2,il:1,c1:0,c2:0},{mn:"CPX",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"SBC",am:"AAAA",nb:3,il:0,c1:4,c2:0},{mn:"INC",am:"AAAA",nb:3,il:0,c1:6,c2:0},{mn:"ISB",am:"AAAA",nb:3,il:1,c1:6,c2:0},{mn:"BEQ",am:"branch",nb:2,il:0,c1:2,c2:2},{mn:"SBC",am:"(aa),y",nb:2,il:0,c1:5,c2:1},{mn:"KIL",am:"",nb:1,il:1,c1:0,c2:0},{mn:"ISB",am:"(aa),y",nb:2,il:1,c1:8,c2:1},{mn:"NOP",am:"aa,x",nb:2,il:1,c1:4,c2:0},{mn:"SBC",am:"aa,x",nb:2,il:0,c1:4,c2:0},{mn:"INC",am:"aa,x",nb:2,il:0,c1:6,c2:0},{mn:"ISB",am:"aa,x",nb:2,il:1,c1:6,c2:1},{mn:"SED",am:"",nb:1,il:0,c1:2,c2:0},{mn:"SBC",am:"AAAA,y",nb:3,il:0,c1:4,c2:1},{mn:"NOP",am:"",nb:1,il:1,c1:0,c2:0},{mn:"ISB",am:"AAAA,y",nb:3,il:1,c1:7,c2:1},{mn:"NOP",am:"AAAA,x",nb:3,il:1,c1:4,c2:1},{mn:"SBC",am:"AAAA,x",nb:3,il:0,c1:4,c2:1},{mn:"INC",am:"AAAA,x",nb:3,il:0,c1:7,c2:0},{mn:"ISB",am:"AAAA,x",nb:3,il:1,c1:7,c2:1}];function m0(b,e,a,f){var x=z0[e];if(x==null)return{line:"???",nbytes:1,isaddr:!1};var m=x.mn,d=x.am,o=!1;if(d=="branch"){var n=a<128?b+2+a:b+2-(256-a);n&=65535,d="$"+N(n,4),o=!0}else d=d.replace("aa","$"+N(a,2)),d=d.replace("AAAA","$"+N(a+(f<<8),4)),d.indexOf("#")<0&&d.indexOf("$")>=0&&(o=!0);return{line:x.mn+" "+d,nbytes:x.nb,isaddr:o}}function j0(b){let e=b;if(!e||typeof e.mem_read!="function"||typeof e.mem_write!="function"||typeof e.io_read!="function"||typeof e.io_write!="function")throw"Z80: Core object is missing required functions.";let a=0,f=0,x=0,m=0,d=0,o=0,n=0,H=0,y=0,g=0,_=0,P=0,z=0,se=0,u=0,xe=0,Le=0,Y=0,F=57328,i=0,s={S:0,Z:0,Y:0,H:0,X:0,P:0,N:0,C:0},le={S:0,Z:0,Y:0,H:0,X:0,P:0,N:0,C:0},Ae=0,E=0,de=0,w=!1,S=!1,Me=!1,Z=0;function U(){return{PC:i,SP:F,IX:u,IY:xe,AF:(a<<8)+ye(),BC:(f<<8)+x,DE:(m<<8)+d,HL:(o<<8)+n,AF_:(H<<8)+Ne(),BC_:(y<<8)+g,DE_:(_<<8)+P,HL_:(z<<8)+se,IR:(Le<<8)+Y,im:Ae,iff1:E,iff2:de,halted:w,do_delayed_di:S,do_delayed_ei:Me,cycle_counter:Z}}function Be(r){i=r.PC,F=r.SP,u=r.IX,xe=r.IY,a=r.AF>>8&255,ve(r.AF),f=r.BC>>8&255,x=r.BC&255,m=r.DE>>8&255,d=r.DE&255,o=r.HL>>8&255,n=r.HL&255,H=r.AF_>>8&255,pe(r.AF_),y=r.BC_>>8&255,g=r.BC_&255,_=r.DE_>>8&255,P=r.DE_&255,z=r.HL_>>8&255,se=r.HL_&255,Le=r.IR>>8&255,Y=r.IR&255,Ae=r.im,E=r.iff1,de=r.iff2,w=r.halted,S=r.do_delayed_di,Me=r.do_delayed_ei,Z=r.cycle_counter}let Pe=function(){F=57328,i=0,a=0,Y=0,ve(0),Ae=0,E=0,de=0,w=!1,S=!1,Me=!1,Z=0},re=function(){if(w)return 1;var r=!1,l=!1;S?(S=!1,r=!0):Me&&(Me=!1,l=!0),Y=Y&128|(Y&127)+1&127;var v=e.mem_read(i);J(v),i=i+1&65535,r?(E=0,de=0):l&&(E=1,de=1);var ce=Z;return Z=0,ce},he=function(r,l){if(r)return Y=Y&128|(Y&127)+1&127,w=!1,de=E,E=0,Se(i),i=102,Z+=11,!0;if(E){if(Y=Y&128|(Y&127)+1&127,w=!1,E=0,de=0,Ae===0)i=i-1&65535,J(l),i=i+1&65535,Z+=2;else if(Ae===1)Se(i),i=56,Z+=13;else if(Ae===2){Se(i);var v=Le<<8|l;i=e.mem_read(v)|e.mem_read(v+1&65535)<<8,Z+=19}return!0}},J=function(r){var l=function(oe){return(oe&7)==0?f:(oe&7)==1?x:(oe&7)==2?m:(oe&7)==3?d:(oe&7)==4?o:(oe&7)==5?n:(oe&7)==6?e.mem_read(n|o<<8):a};if(r===118)w=!0;else if(r>=64&&r<128){var v=l(r);(r&56)>>>3==0?f=v:(r&56)>>>3==1?x=v:(r&56)>>>3==2?m=v:(r&56)>>>3==3?d=v:(r&56)>>>3==4?o=v:(r&56)>>>3==5?n=v:(r&56)>>>3==6?e.mem_write(n|o<<8,v):(r&56)>>>3==7&&(a=v)}else if(r>=128&&r<192){var v=l(r),ce=[$,K,D,p,q,T,R,I];ce[(r&56)>>>3](v)}else{var Oe=h[r];Oe()}Z+=c[r]},B=function(r){return r&=255,r&128&&(r=-((255&~r)+1)),r},ye=function(){return s.S<<7|s.Z<<6|s.Y<<5|s.H<<4|s.X<<3|s.P<<2|s.N<<1|s.C},Ne=function(){return le.S<<7|le.Z<<6|le.Y<<5|le.H<<4|le.X<<3|le.P<<2|le.N<<1|le.C},ve=function(r){s.S=(r&128)>>>7,s.Z=(r&64)>>>6,s.Y=(r&32)>>>5,s.H=(r&16)>>>4,s.X=(r&8)>>>3,s.P=(r&4)>>>2,s.N=(r&2)>>>1,s.C=r&1},pe=function(r){le.S=(r&128)>>>7,le.Z=(r&64)>>>6,le.Y=(r&32)>>>5,le.H=(r&16)>>>4,le.X=(r&8)>>>3,le.P=(r&4)>>>2,le.N=(r&2)>>>1,le.C=r&1},M=function(r){s.Y=(r&32)>>>5,s.X=(r&8)>>>3},te=function(r){var l=[1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1];return l[r]},Se=function(r){F=F-1&65535,e.mem_write(F,(r&65280)>>>8),F=F-1&65535,e.mem_write(F,r&255)},me=function(){var r=e.mem_read(F)&255;return F=F+1&65535,r|=e.mem_read(F)<<8,F=F+1&65535,r},De=function(r){r?(i=e.mem_read(i+1&65535)|e.mem_read(i+2&65535)<<8,i=i-1&65535):i=i+2&65535},Ue=function(r){if(r){Z+=5;var l=B(e.mem_read(i+1&65535));i=i+l+1&65535}else i=i+1&65535},Ce=function(r){r?(Z+=7,Se(i+3&65535),i=e.mem_read(i+1&65535)|e.mem_read(i+2&65535)<<8,i=i-1&65535):i=i+2&65535},_e=function(r){r&&(Z+=6,i=me()-1&65535)},ae=function(r){Se(i+1&65535),i=r-1&65535},$=function(r){var l=a+r;s.S=l&128?1:0,s.Z=l&255?0:1,s.H=(r&15)+(a&15)&16?1:0,s.P=(a&128)==(r&128)&&(a&128)!=(l&128)?1:0,s.N=0,s.C=l&256?1:0,a=l&255,M(a)},K=function(r){var l=a+r+s.C;s.S=l&128?1:0,s.Z=l&255?0:1,s.H=(r&15)+(a&15)+s.C&16?1:0,s.P=(a&128)==(r&128)&&(a&128)!=(l&128)?1:0,s.N=0,s.C=l&256?1:0,a=l&255,M(a)},D=function(r){var l=a-r;s.S=l&128?1:0,s.Z=l&255?0:1,s.H=(a&15)-(r&15)&16?1:0,s.P=(a&128)!=(r&128)&&(a&128)!=(l&128)?1:0,s.N=1,s.C=l&256?1:0,a=l&255,M(a)},p=function(r){var l=a-r-s.C;s.S=l&128?1:0,s.Z=l&255?0:1,s.H=(a&15)-(r&15)-s.C&16?1:0,s.P=(a&128)!=(r&128)&&(a&128)!=(l&128)?1:0,s.N=1,s.C=l&256?1:0,a=l&255,M(a)},I=function(r){var l=a;D(r),a=l,M(r)},q=function(r){a&=r&255,s.S=a&128?1:0,s.Z=a?0:1,s.H=1,s.P=te(a),s.N=0,s.C=0,M(a)},R=function(r){a=(r|a)&255,s.S=a&128?1:0,s.Z=a?0:1,s.H=0,s.P=te(a),s.N=0,s.C=0,M(a)},T=function(r){a=(r^a)&255,s.S=a&128?1:0,s.Z=a?0:1,s.H=0,s.P=te(a),s.N=0,s.C=0,M(a)},ne=function(r){var l=r+1;return s.S=l&128?1:0,s.Z=l&255?0:1,s.H=(r&15)==15?1:0,s.P=r===127?1:0,s.N=0,l&=255,M(l),l},Q=function(r){var l=r-1;return s.S=l&128?1:0,s.Z=l&255?0:1,s.H=(r&15)==0?1:0,s.P=r===128?1:0,s.N=1,l&=255,M(l),l},ge=function(r){var l=n|o<<8,v=l+r;s.N=0,s.C=v&65536?1:0,s.H=(l&4095)+(r&4095)&4096?1:0,n=v&255,o=(v&65280)>>>8,M(o)},G=function(r){r+=s.C;var l=n|o<<8,v=l+r;s.S=v&32768?1:0,s.Z=v&65535?0:1,s.H=(l&4095)+(r&4095)&4096?1:0,s.P=(l&32768)==(r&32768)&&(v&32768)!=(l&32768)?1:0,s.N=0,s.C=v&65536?1:0,n=v&255,o=v>>>8&255,M(o)},V=function(r){r+=s.C;var l=n|o<<8,v=l-r;s.S=v&32768?1:0,s.Z=v&65535?0:1,s.H=(l&4095)-(r&4095)&4096?1:0,s.P=(l&32768)!=(r&32768)&&(v&32768)!=(l&32768)?1:0,s.N=1,s.C=v&65536?1:0,n=v&255,o=v>>>8&255,M(o)},ie=function(r){var l=e.io_read(r);return s.S=l&128?1:0,s.Z=l?0:1,s.H=0,s.P=te(l)?1:0,s.N=0,M(l),l},W=function(){a!==128&&(a=B(a),a=-a&255),s.S=a&128?1:0,s.Z=a?0:1,s.H=(-a&15)>0?1:0,s.P=a===128?1:0,s.N=1,s.C=a?1:0,M(a)},ee=function(){var r=e.mem_read(n|o<<8);e.mem_write(d|m<<8,r);var l=(d|m<<8)+1;d=l&255,m=(l&65280)>>>8,l=(n|o<<8)+1,n=l&255,o=(l&65280)>>>8,l=(x|f<<8)-1,x=l&255,f=(l&65280)>>>8,s.H=0,s.P=x||f?1:0,s.N=0,s.Y=(a+r&2)>>>1,s.X=(a+r&8)>>>3},ue=function(){var r=s.C,l=e.mem_read(n|o<<8);I(l),s.C=r,s.Y=(a-l-s.H&2)>>>1,s.X=(a-l-s.H&8)>>>3;var v=(n|o<<8)+1;n=v&255,o=(v&65280)>>>8,v=(x|f<<8)-1,x=v&255,f=(v&65280)>>>8,s.P=v?1:0},j=function(){f=Q(f),e.mem_write(n|o<<8,e.io_read(f<<8|x));var r=(n|o<<8)+1;n=r&255,o=(r&65280)>>>8,s.N=1},ke=function(){e.io_write(f<<8|x,e.mem_read(n|o<<8));var r=(n|o<<8)+1;n=r&255,o=(r&65280)>>>8,f=Q(f),s.N=1},Ee=function(){s.N=0,s.H=0;var r=e.mem_read(n|o<<8);e.mem_write(d|m<<8,r);var l=(d|m<<8)-1;d=l&255,m=(l&65280)>>>8,l=(n|o<<8)-1,n=l&255,o=(l&65280)>>>8,l=(x|f<<8)-1,x=l&255,f=(l&65280)>>>8,s.P=x||f?1:0,s.Y=(a+r&2)>>>1,s.X=(a+r&8)>>>3},He=function(){var r=s.C,l=e.mem_read(n|o<<8);I(l),s.C=r,s.Y=(a-l-s.H&2)>>>1,s.X=(a-l-s.H&8)>>>3;var v=(n|o<<8)-1;n=v&255,o=(v&65280)>>>8,v=(x|f<<8)-1,x=v&255,f=(v&65280)>>>8,s.P=v?1:0},Ze=function(){f=Q(f),e.mem_write(n|o<<8,e.io_read(f<<8|x));var r=(n|o<<8)-1;n=r&255,o=(r&65280)>>>8,s.N=1},Xe=function(){e.io_write(f<<8|x,e.mem_read(n|o<<8));var r=(n|o<<8)-1;n=r&255,o=(r&65280)>>>8,f=Q(f),s.N=1},Te=function(r){return s.N=0,s.H=0,s.C=(r&128)>>>7,r=(r<<1|s.C)&255,s.Z=r?0:1,s.P=te(r),s.S=r&128?1:0,M(r),r},Re=function(r){return s.N=0,s.H=0,s.C=r&1,r=r>>>1&127|s.C<<7,s.Z=r&255?0:1,s.P=te(r),s.S=r&128?1:0,M(r),r&255},we=function(r){s.N=0,s.H=0;var l=s.C;return s.C=(r&128)>>>7,r=(r<<1|l)&255,s.Z=r?0:1,s.P=te(r),s.S=r&128?1:0,M(r),r},fe=function(r){s.N=0,s.H=0;var l=s.C;return s.C=r&1,r=r>>>1&127|l<<7,s.Z=r?0:1,s.P=te(r),s.S=r&128?1:0,M(r),r},Ye=function(r){return s.N=0,s.H=0,s.C=(r&128)>>>7,r=r<<1&255,s.Z=r?0:1,s.P=te(r),s.S=r&128?1:0,M(r),r},L=function(r){return s.N=0,s.H=0,s.C=r&1,r=r>>>1&127|r&128,s.Z=r?0:1,s.P=te(r),s.S=r&128?1:0,M(r),r},ze=function(r){return s.N=0,s.H=0,s.C=(r&128)>>>7,r=r<<1&255|1,s.Z=r?0:1,s.P=te(r),s.S=r&128?1:0,M(r),r},Ge=function(r){return s.N=0,s.H=0,s.C=r&1,r=r>>>1&127,s.Z=r?0:1,s.P=te(r),s.S=0,M(r),r},je=function(r){s.N=0;var l=u+r;s.C=l&65536?1:0,s.H=(u&4095)+(r&4095)&4096?1:0,M((l&65280)>>>8),u=l},h=[];h[0]=function(){},h[1]=function(){i=i+1&65535,x=e.mem_read(i),i=i+1&65535,f=e.mem_read(i)},h[2]=function(){e.mem_write(x|f<<8,a)},h[3]=function(){var r=x|f<<8;r+=1,x=r&255,f=(r&65280)>>>8},h[4]=function(){f=ne(f)},h[5]=function(){f=Q(f)},h[6]=function(){i=i+1&65535,f=e.mem_read(i)},h[7]=function(){var r=s.S,l=s.Z,v=s.P;a=Te(a),s.S=r,s.Z=l,s.P=v},h[8]=function(){var r=a;a=H,H=r,r=ye(),ve(Ne()),pe(r)},h[9]=function(){ge(x|f<<8)},h[10]=function(){a=e.mem_read(x|f<<8)},h[11]=function(){var r=x|f<<8;r-=1,x=r&255,f=(r&65280)>>>8},h[12]=function(){x=ne(x)},h[13]=function(){x=Q(x)},h[14]=function(){i=i+1&65535,x=e.mem_read(i)},h[15]=function(){var r=s.S,l=s.Z,v=s.P;a=Re(a),s.S=r,s.Z=l,s.P=v},h[16]=function(){f=f-1&255,Ue(f!==0)},h[17]=function(){i=i+1&65535,d=e.mem_read(i),i=i+1&65535,m=e.mem_read(i)},h[18]=function(){e.mem_write(d|m<<8,a)},h[19]=function(){var r=d|m<<8;r+=1,d=r&255,m=(r&65280)>>>8},h[20]=function(){m=ne(m)},h[21]=function(){m=Q(m)},h[22]=function(){i=i+1&65535,m=e.mem_read(i)},h[23]=function(){var r=s.S,l=s.Z,v=s.P;a=we(a),s.S=r,s.Z=l,s.P=v},h[24]=function(){var r=B(e.mem_read(i+1&65535));i=i+r+1&65535},h[25]=function(){ge(d|m<<8)},h[26]=function(){a=e.mem_read(d|m<<8)},h[27]=function(){var r=d|m<<8;r-=1,d=r&255,m=(r&65280)>>>8},h[28]=function(){d=ne(d)},h[29]=function(){d=Q(d)},h[30]=function(){i=i+1&65535,d=e.mem_read(i)},h[31]=function(){var r=s.S,l=s.Z,v=s.P;a=fe(a),s.S=r,s.Z=l,s.P=v},h[32]=function(){Ue(!s.Z)},h[33]=function(){i=i+1&65535,n=e.mem_read(i),i=i+1&65535,o=e.mem_read(i)},h[34]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,e.mem_write(r,n),e.mem_write(r+1&65535,o)},h[35]=function(){var r=n|o<<8;r+=1,n=r&255,o=(r&65280)>>>8},h[36]=function(){o=ne(o)},h[37]=function(){o=Q(o)},h[38]=function(){i=i+1&65535,o=e.mem_read(i)},h[39]=function(){var r=a;s.N?((s.H||(a&15)>9)&&(r-=6),(s.C||a>153)&&(r-=96)):((s.H||(a&15)>9)&&(r+=6),(s.C||a>153)&&(r+=96)),s.S=r&128?1:0,s.Z=r&255?0:1,s.H=a&16^r&16?1:0,s.P=te(r&255),s.C=s.C||a>153?1:0,a=r&255,M(a)},h[40]=function(){Ue(!!s.Z)},h[41]=function(){ge(n|o<<8)},h[42]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,n=e.mem_read(r),o=e.mem_read(r+1&65535)},h[43]=function(){var r=n|o<<8;r-=1,n=r&255,o=(r&65280)>>>8},h[44]=function(){n=ne(n)},h[45]=function(){n=Q(n)},h[46]=function(){i=i+1&65535,n=e.mem_read(i)},h[47]=function(){a=~a&255,s.N=1,s.H=1,M(a)},h[48]=function(){Ue(!s.C)},h[49]=function(){F=e.mem_read(i+1&65535)|e.mem_read(i+2&65535)<<8,i=i+2&65535},h[50]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,e.mem_write(r,a)},h[51]=function(){F=F+1&65535},h[52]=function(){var r=n|o<<8;e.mem_write(r,ne(e.mem_read(r)))},h[53]=function(){var r=n|o<<8;e.mem_write(r,Q(e.mem_read(r)))},h[54]=function(){i=i+1&65535,e.mem_write(n|o<<8,e.mem_read(i))},h[55]=function(){s.N=0,s.H=0,s.C=1,M(a)},h[56]=function(){Ue(!!s.C)},h[57]=function(){ge(F)},h[58]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,a=e.mem_read(r)},h[59]=function(){F=F-1&65535},h[60]=function(){a=ne(a)},h[61]=function(){a=Q(a)},h[62]=function(){a=e.mem_read(i+1&65535),i=i+1&65535},h[63]=function(){s.N=0,s.H=s.C,s.C=s.C?0:1,M(a)},h[192]=function(){_e(!s.Z)},h[193]=function(){var r=me();x=r&255,f=(r&65280)>>>8},h[194]=function(){De(!s.Z)},h[195]=function(){i=e.mem_read(i+1&65535)|e.mem_read(i+2&65535)<<8,i=i-1&65535},h[196]=function(){Ce(!s.Z)},h[197]=function(){Se(x|f<<8)},h[198]=function(){i=i+1&65535,$(e.mem_read(i))},h[199]=function(){ae(0)},h[200]=function(){_e(!!s.Z)},h[201]=function(){i=me()-1&65535},h[202]=function(){De(!!s.Z)},h[203]=function(){Y=Y&128|(Y&127)+1&127,i=i+1&65535;var r=e.mem_read(i),l=(r&56)>>>3,v=r&7;if(r<64){var ce=[Te,Re,we,fe,Ye,L,ze,Ge];v===0?f=ce[l](f):v===1?x=ce[l](x):v===2?m=ce[l](m):v===3?d=ce[l](d):v===4?o=ce[l](o):v===5?n=ce[l](n):v===6?e.mem_write(n|o<<8,ce[l](e.mem_read(n|o<<8))):v===7&&(a=ce[l](a))}else r<128?(v===0?s.Z=f&1<<l?0:1:v===1?s.Z=x&1<<l?0:1:v===2?s.Z=m&1<<l?0:1:v===3?s.Z=d&1<<l?0:1:v===4?s.Z=o&1<<l?0:1:v===5?s.Z=n&1<<l?0:1:v===6?s.Z=e.mem_read(n|o<<8)&1<<l?0:1:v===7&&(s.Z=a&1<<l?0:1),s.N=0,s.H=1,s.P=s.Z,s.S=l===7&&!s.Z?1:0,s.Y=l===5&&!s.Z?1:0,s.X=l===3&&!s.Z?1:0):r<192?v===0?f&=255&~(1<<l):v===1?x&=255&~(1<<l):v===2?m&=255&~(1<<l):v===3?d&=255&~(1<<l):v===4?o&=255&~(1<<l):v===5?n&=255&~(1<<l):v===6?e.mem_write(n|o<<8,e.mem_read(n|o<<8)&~(1<<l)):v===7&&(a&=255&~(1<<l)):v===0?f|=1<<l:v===1?x|=1<<l:v===2?m|=1<<l:v===3?d|=1<<l:v===4?o|=1<<l:v===5?n|=1<<l:v===6?e.mem_write(n|o<<8,e.mem_read(n|o<<8)|1<<l):v===7&&(a|=1<<l);Z+=A[r]},h[204]=function(){Ce(!!s.Z)},h[205]=function(){Se(i+3&65535),i=e.mem_read(i+1&65535)|e.mem_read(i+2&65535)<<8,i=i-1&65535},h[206]=function(){i=i+1&65535,K(e.mem_read(i))},h[207]=function(){ae(8)},h[208]=function(){_e(!s.C)},h[209]=function(){var r=me();d=r&255,m=(r&65280)>>>8},h[210]=function(){De(!s.C)},h[211]=function(){i=i+1&65535,e.io_write(a<<8|e.mem_read(i),a)},h[212]=function(){Ce(!s.C)},h[213]=function(){Se(d|m<<8)},h[214]=function(){i=i+1&65535,D(e.mem_read(i))},h[215]=function(){ae(16)},h[216]=function(){_e(!!s.C)},h[217]=function(){var r=f;f=y,y=r,r=x,x=g,g=r,r=m,m=_,_=r,r=d,d=P,P=r,r=o,o=z,z=r,r=n,n=se,se=r},h[218]=function(){De(!!s.C)},h[219]=function(){i=i+1&65535,a=e.io_read(a<<8|e.mem_read(i))},h[220]=function(){Ce(!!s.C)},h[221]=function(){Y=Y&128|(Y&127)+1&127,i=i+1&65535;var r=e.mem_read(i),l=C[r];l?(l(),Z+=X[r]):(i=i-1&65535,Z+=c[0])},h[222]=function(){i=i+1&65535,p(e.mem_read(i))},h[223]=function(){ae(24)},h[224]=function(){_e(!s.P)},h[225]=function(){var r=me();n=r&255,o=(r&65280)>>>8},h[226]=function(){De(!s.P)},h[227]=function(){var r=e.mem_read(F);e.mem_write(F,n),n=r,r=e.mem_read(F+1&65535),e.mem_write(F+1&65535,o),o=r},h[228]=function(){Ce(!s.P)},h[229]=function(){Se(n|o<<8)},h[230]=function(){i=i+1&65535,q(e.mem_read(i))},h[231]=function(){ae(32)},h[232]=function(){_e(!!s.P)},h[233]=function(){i=n|o<<8,i=i-1&65535},h[234]=function(){De(!!s.P)},h[235]=function(){var r=m;m=o,o=r,r=d,d=n,n=r},h[236]=function(){Ce(!!s.P)},h[237]=function(){Y=Y&128|(Y&127)+1&127,i=i+1&65535;var r=e.mem_read(i),l=k[r];l?(l(),Z+=t[r]):Z+=c[0]},h[238]=function(){i=i+1&65535,T(e.mem_read(i))},h[239]=function(){ae(40)},h[240]=function(){_e(!s.S)},h[241]=function(){var r=me();ve(r&255),a=(r&65280)>>>8},h[242]=function(){De(!s.S)},h[243]=function(){S=!0},h[244]=function(){Ce(!s.S)},h[245]=function(){Se(ye()|a<<8)},h[246]=function(){i=i+1&65535,R(e.mem_read(i))},h[247]=function(){ae(48)},h[248]=function(){_e(!!s.S)},h[249]=function(){F=n|o<<8},h[250]=function(){De(!!s.S)},h[251]=function(){Me=!0},h[252]=function(){Ce(!!s.S)},h[253]=function(){Y=Y&128|(Y&127)+1&127,i=i+1&65535;var r=e.mem_read(i),l=C[r];if(l){var v=u;u=xe,l(),xe=u,u=v,Z+=X[r]}else i=i-1&65535,Z+=c[0]},h[254]=function(){i=i+1&65535,I(e.mem_read(i))},h[255]=function(){ae(56)};let k=[];k[64]=function(){f=ie(f<<8|x)},k[65]=function(){e.io_write(f<<8|x,f)},k[66]=function(){V(x|f<<8)},k[67]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,e.mem_write(r,x),e.mem_write(r+1&65535,f)},k[68]=function(){W()},k[69]=function(){i=me()-1&65535,E=de},k[70]=function(){Ae=0},k[71]=function(){Le=a},k[72]=function(){x=ie(f<<8|x)},k[73]=function(){e.io_write(f<<8|x,x)},k[74]=function(){G(x|f<<8)},k[75]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,x=e.mem_read(r),f=e.mem_read(r+1&65535)},k[76]=function(){W()},k[77]=function(){i=me()-1&65535},k[78]=function(){Ae=0},k[79]=function(){Y=a},k[80]=function(){m=ie(f<<8|x)},k[81]=function(){e.io_write(f<<8|x,m)},k[82]=function(){V(d|m<<8)},k[83]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,e.mem_write(r,d),e.mem_write(r+1&65535,m)},k[84]=function(){W()},k[85]=function(){i=me()-1&65535,E=de},k[86]=function(){Ae=1},k[87]=function(){a=Le,s.S=a&128?1:0,s.Z=a?0:1,s.H=0,s.P=de,s.N=0,M(a)},k[88]=function(){d=ie(f<<8|x)},k[89]=function(){e.io_write(f<<8|x,d)},k[90]=function(){G(d|m<<8)},k[91]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,d=e.mem_read(r),m=e.mem_read(r+1&65535)},k[92]=function(){W()},k[93]=function(){i=me()-1&65535,E=de},k[94]=function(){Ae=2},k[95]=function(){a=Y,s.S=a&128?1:0,s.Z=a?0:1,s.H=0,s.P=de,s.N=0,M(a)},k[96]=function(){o=ie(f<<8|x)},k[97]=function(){e.io_write(f<<8|x,o)},k[98]=function(){V(n|o<<8)},k[99]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,e.mem_write(r,n),e.mem_write(r+1&65535,o)},k[100]=function(){W()},k[101]=function(){i=me()-1&65535,E=de},k[102]=function(){Ae=0},k[103]=function(){var r=e.mem_read(n|o<<8),l=r&15,v=a&15;r=(r&240)>>>4|v<<4,a=a&240|l,e.mem_write(n|o<<8,r),s.S=a&128?1:0,s.Z=a?0:1,s.H=0,s.P=te(a)?1:0,s.N=0,M(a)},k[104]=function(){n=ie(f<<8|x)},k[105]=function(){e.io_write(f<<8|x,n)},k[106]=function(){G(n|o<<8)},k[107]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,n=e.mem_read(r),o=e.mem_read(r+1&65535)},k[108]=function(){W()},k[109]=function(){i=me()-1&65535,E=de},k[110]=function(){Ae=0},k[111]=function(){var r=e.mem_read(n|o<<8),l=r&240,v=a&15;r=(r&15)<<4|v,a=a&240|l>>>4,e.mem_write(n|o<<8,r),s.S=a&128?1:0,s.Z=a?0:1,s.H=0,s.P=te(a)?1:0,s.N=0,M(a)},k[112]=function(){ie(f<<8|x)},k[113]=function(){e.io_write(f<<8|x,0)},k[114]=function(){V(F)},k[115]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,e.mem_write(r,F&255),e.mem_write(r+1&65535,F>>>8&255)},k[116]=function(){W()},k[117]=function(){i=me()-1&65535,E=de},k[118]=function(){Ae=1},k[120]=function(){a=ie(f<<8|x)},k[121]=function(){e.io_write(f<<8|x,a)},k[122]=function(){G(F)},k[123]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,F=e.mem_read(r),F|=e.mem_read(r+1&65535)<<8},k[124]=function(){W()},k[125]=function(){i=me()-1&65535,E=de},k[126]=function(){Ae=2},k[160]=function(){ee()},k[161]=function(){ue()},k[162]=function(){j()},k[163]=function(){ke()},k[168]=function(){Ee()},k[169]=function(){He()},k[170]=function(){Ze()},k[171]=function(){Xe()},k[176]=function(){ee(),(f||x)&&(Z+=5,i=i-2&65535)},k[177]=function(){ue(),!s.Z&&(f||x)&&(Z+=5,i=i-2&65535)},k[178]=function(){j(),f&&(Z+=5,i=i-2&65535)},k[179]=function(){ke(),f&&(Z+=5,i=i-2&65535)},k[184]=function(){Ee(),(f||x)&&(Z+=5,i=i-2&65535)},k[185]=function(){He(),!s.Z&&(f||x)&&(Z+=5,i=i-2&65535)},k[186]=function(){Ze(),f&&(Z+=5,i=i-2&65535)},k[187]=function(){Xe(),f&&(Z+=5,i=i-2&65535)};let C=[];C[9]=function(){je(x|f<<8)},C[25]=function(){je(d|m<<8)},C[33]=function(){i=i+1&65535,u=e.mem_read(i),i=i+1&65535,u|=e.mem_read(i)<<8},C[34]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,e.mem_write(r,u&255),e.mem_write(r+1&65535,u>>>8&255)},C[35]=function(){u=u+1&65535},C[36]=function(){u=ne(u>>>8)<<8|u&255},C[37]=function(){u=Q(u>>>8)<<8|u&255},C[38]=function(){i=i+1&65535,u=e.mem_read(i)<<8|u&255},C[41]=function(){je(u)},C[42]=function(){i=i+1&65535;var r=e.mem_read(i);i=i+1&65535,r|=e.mem_read(i)<<8,u=e.mem_read(r),u|=e.mem_read(r+1&65535)<<8},C[43]=function(){u=u-1&65535},C[44]=function(){u=ne(u&255)|u&65280},C[45]=function(){u=Q(u&255)|u&65280},C[46]=function(){i=i+1&65535,u=e.mem_read(i)&255|u&65280},C[52]=function(){i=i+1&65535;var r=B(e.mem_read(i)),l=e.mem_read(r+u&65535);e.mem_write(r+u&65535,ne(l))},C[53]=function(){i=i+1&65535;var r=B(e.mem_read(i)),l=e.mem_read(r+u&65535);e.mem_write(r+u&65535,Q(l))},C[54]=function(){i=i+1&65535;var r=B(e.mem_read(i));i=i+1&65535,e.mem_write(u+r&65535,e.mem_read(i))},C[57]=function(){je(F)},C[68]=function(){f=u>>>8&255},C[69]=function(){f=u&255},C[70]=function(){i=i+1&65535;var r=B(e.mem_read(i));f=e.mem_read(u+r&65535)},C[76]=function(){x=u>>>8&255},C[77]=function(){x=u&255},C[78]=function(){i=i+1&65535;var r=B(e.mem_read(i));x=e.mem_read(u+r&65535)},C[84]=function(){m=u>>>8&255},C[85]=function(){m=u&255},C[86]=function(){i=i+1&65535;var r=B(e.mem_read(i));m=e.mem_read(u+r&65535)},C[92]=function(){d=u>>>8&255},C[93]=function(){d=u&255},C[94]=function(){i=i+1&65535;var r=B(e.mem_read(i));d=e.mem_read(u+r&65535)},C[96]=function(){u=u&255|f<<8},C[97]=function(){u=u&255|x<<8},C[98]=function(){u=u&255|m<<8},C[99]=function(){u=u&255|d<<8},C[100]=function(){},C[101]=function(){u=u&255|(u&255)<<8},C[102]=function(){i=i+1&65535;var r=B(e.mem_read(i));o=e.mem_read(u+r&65535)},C[103]=function(){u=u&255|a<<8},C[104]=function(){u=u&65280|f},C[105]=function(){u=u&65280|x},C[106]=function(){u=u&65280|m},C[107]=function(){u=u&65280|d},C[108]=function(){u=u&65280|u>>>8},C[109]=function(){},C[110]=function(){i=i+1&65535;var r=B(e.mem_read(i));n=e.mem_read(u+r&65535)},C[111]=function(){u=u&65280|a},C[112]=function(){i=i+1&65535;var r=B(e.mem_read(i));e.mem_write(u+r&65535,f)},C[113]=function(){i=i+1&65535;var r=B(e.mem_read(i));e.mem_write(u+r&65535,x)},C[114]=function(){i=i+1&65535;var r=B(e.mem_read(i));e.mem_write(u+r&65535,m)},C[115]=function(){i=i+1&65535;var r=B(e.mem_read(i));e.mem_write(u+r&65535,d)},C[116]=function(){i=i+1&65535;var r=B(e.mem_read(i));e.mem_write(u+r&65535,o)},C[117]=function(){i=i+1&65535;var r=B(e.mem_read(i));e.mem_write(u+r&65535,n)},C[119]=function(){i=i+1&65535;var r=B(e.mem_read(i));e.mem_write(u+r&65535,a)},C[124]=function(){a=u>>>8&255},C[125]=function(){a=u&255},C[126]=function(){i=i+1&65535;var r=B(e.mem_read(i));a=e.mem_read(u+r&65535)},C[132]=function(){$(u>>>8&255)},C[133]=function(){$(u&255)},C[134]=function(){i=i+1&65535;var r=B(e.mem_read(i));$(e.mem_read(u+r&65535))},C[140]=function(){K(u>>>8&255)},C[141]=function(){K(u&255)},C[142]=function(){i=i+1&65535;var r=B(e.mem_read(i));K(e.mem_read(u+r&65535))},C[148]=function(){D(u>>>8&255)},C[149]=function(){D(u&255)},C[150]=function(){i=i+1&65535;var r=B(e.mem_read(i));D(e.mem_read(u+r&65535))},C[156]=function(){p(u>>>8&255)},C[157]=function(){p(u&255)},C[158]=function(){i=i+1&65535;var r=B(e.mem_read(i));p(e.mem_read(u+r&65535))},C[164]=function(){q(u>>>8&255)},C[165]=function(){q(u&255)},C[166]=function(){i=i+1&65535;var r=B(e.mem_read(i));q(e.mem_read(u+r&65535))},C[172]=function(){T(u>>>8&255)},C[173]=function(){T(u&255)},C[174]=function(){i=i+1&65535;var r=B(e.mem_read(i));T(e.mem_read(u+r&65535))},C[180]=function(){R(u>>>8&255)},C[181]=function(){R(u&255)},C[182]=function(){i=i+1&65535;var r=B(e.mem_read(i));R(e.mem_read(u+r&65535))},C[188]=function(){I(u>>>8&255)},C[189]=function(){I(u&255)},C[190]=function(){i=i+1&65535;var r=B(e.mem_read(i));I(e.mem_read(u+r&65535))},C[203]=function(){i=i+1&65535;var r=B(e.mem_read(i));i=i+1&65535;var l=e.mem_read(i),v;if(l<64){var ce=[Te,Re,we,fe,Ye,L,ze,Ge],Oe=ce[(l&56)>>>3],v=Oe(e.mem_read(u+r&65535));e.mem_write(u+r&65535,v)}else{var oe=(l&56)>>>3;l<128?(s.N=0,s.H=1,s.Z=e.mem_read(u+r&65535)&1<<oe?0:1,s.P=s.Z,s.S=oe===7&&!s.Z?1:0):l<192?(v=e.mem_read(u+r&65535)&~(1<<oe)&255,e.mem_write(u+r&65535,v)):(v=e.mem_read(u+r&65535)|1<<oe,e.mem_write(u+r&65535,v))}v!==void 0&&((l&7)==0?f=v:(l&7)==1?x=v:(l&7)==2?m=v:(l&7)==3?d=v:(l&7)==4?o=v:(l&7)==5?n=v:(l&7)==7&&(a=v)),Z+=A[l]+8},C[225]=function(){u=me()},C[227]=function(){var r=u;u=e.mem_read(F),u|=e.mem_read(F+1&65535)<<8,e.mem_write(F,r&255),e.mem_write(F+1&65535,r>>>8&255)},C[229]=function(){Se(u)},C[233]=function(){i=u-1&65535},C[249]=function(){F=u};let c=[4,10,7,6,4,4,7,4,4,11,7,6,4,4,7,4,8,10,7,6,4,4,7,4,12,11,7,6,4,4,7,4,7,10,16,6,4,4,7,4,7,11,16,6,4,4,7,4,7,10,13,6,11,11,10,4,7,11,13,6,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,7,7,7,7,7,7,4,7,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,4,4,4,4,4,4,7,4,5,10,10,10,10,11,7,11,5,10,10,0,10,17,7,11,5,10,10,11,10,11,7,11,5,4,10,11,10,0,7,11,5,10,10,19,10,11,7,11,5,4,10,4,10,0,7,11,5,10,10,4,10,11,7,11,5,6,10,4,10,0,7,11],t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,9,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,18,12,12,15,20,8,14,8,0,12,12,15,20,8,14,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,16,16,16,0,0,0,0,16,16,16,16,0,0,0,0,16,16,16,16,0,0,0,0,16,16,16,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8,8,8,8,8,8,8,15,8],X=[0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,0,0,0,14,20,10,8,8,11,0,0,15,20,10,8,8,11,0,0,0,0,0,23,23,19,0,0,15,0,0,0,0,0,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,8,8,8,8,8,8,19,8,8,8,8,8,8,8,19,8,19,19,19,19,19,19,0,19,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,8,8,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,23,0,15,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0];this.saveState=U,this.loadState=Be,this.reset=Pe,this.advanceInsn=re,this.interrupt=he,this.getPC=()=>i,this.getSP=()=>F,this.getHalted=()=>w}var u0=class{constructor(){this.retryInterrupts=!1;this.retryData=-1}buildCPU(){this.memBus&&this.ioBus&&(this.cpu=new j0({mem_read:this.memBus.read.bind(this.memBus),mem_write:this.memBus.write.bind(this.memBus),io_read:this.ioBus.read.bind(this.ioBus),io_write:this.ioBus.write.bind(this.ioBus)}))}connectMemoryBus(e){this.memBus=e,this.buildCPU()}connectIOBus(e){this.ioBus=e,this.buildCPU()}advanceInsn(){return this.retryInterrupts&&this.retryData>=0&&this.cpu.interrupt(!1,this.retryData)&&(this.retryData=-1),this.cpu.advanceInsn()}reset(){this.cpu.reset()}interrupt(e){!this.cpu.interrupt(!1,e)&&this.retryInterrupts&&(this.retryData=e)}NMI(){this.cpu.interrupt(!0,0)}getSP(){return this.cpu.getSP()}getPC(){return this.cpu.getPC()}isHalted(){return this.cpu.getHalted()}saveState(){return this.cpu.saveState()}loadState(e){this.cpu.loadState(e)}isStable(){return!0}};var B0=class{constructor(){this.master=new MasterChannel}start(){this.looper||(this.looper=new AudioLooper(512),this.looper.setChannel(this.master),this.looper.activate())}stop(){this.looper&&(this.looper.setChannel(null),this.looper=null)}},K0=class{constructor(e){this.psg=new PsgDeviceChannel;this.curreg=0;this.master=e,this.psg.setMode(PsgDeviceChannel.MODE_SIGNED),this.psg.setDevice(PsgDeviceChannel.DEVICE_AY_3_8910),e.master.addChannel(this.psg)}reset(){for(var e=15;e>=0;e--)this.selectRegister(e),this.setData(0)}selectRegister(e){this.curreg=e&15}setData(e){this.psg.writeRegisterAY(this.curreg,e&255)}readData(){return this.psg.readRegister(this.curreg)}currentRegister(){return this.curreg}},$0=class{constructor(e){this.psg=new PsgDeviceChannel;this.master=e,this.psg.setMode(PsgDeviceChannel.MODE_SIGNED),this.psg.setDevice(PsgDeviceChannel.DEVICE_SN76489),e.master.addChannel(this.psg)}reset(){}setData(e){this.psg.writeRegisterSN(0,e&255)}};function St(b){for(var e=new B0,a=1;a<=b;a++){var f=new G0;e["pokey"+a]=f,e.master.addChannel(f)}return e}function Qe(b,e){for(var a=new Uint8Array(b.length*e.length),f=0,x=0;x<a.length;x++)a[x]=e[f%e.length],b[x%b.length]&&f++;return a}function i0(b){var e=new Uint8Array(b*2);return e.fill(1,0,b),e}var G0=function(){for(var b=128,e=64,a=32,f=16,x=15,m=128,d=64,o=32,n=16,H=8,y=4,g=2,_=1,P=28,z=114,se=15,u=31,xe=511,Le=131071,Y=0,F=1,i=2,s=3,le=0,Ae=4,E=8,de=12,w=127,S=1789790,Me=1787520,Z=new Uint8Array([1]),U=new Uint8Array([0,1]),Be=new Uint8Array([1,1,0,1,1,1,0,0,0,0,1,0,1,0,0]),Pe=new Uint8Array([0,0,1,1,0,0,0,1,1,1,1,0,0,1,0,1,0,1,1,0,1,1,1,0,1,0,0,0,0,0,1]),re=new Uint8Array([0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,1,1,1,0,0,1,0,1,0,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,0,1,1,1,0,1,1,0,0,1,0,0,1,1,1,1,0,1,0,0,0,0,1,1,0,1,1,0,0,0,1,0,0,0,1,1,1,1,0,1,0,1,1,0,1,0,1,0,0,0,0,1,1,0,1,0,1,0,0,0,1,0,1,0,0,0,1,1,1,0,0,1,1,0,1,1,0,0,1,1,1,1,1,0,0,1,1,0,0,0,1,1,0,1,0,0,0,1,1,0,0,1,1,1,1,0,0,1,0,0,0,1,1,1,0,0,1,1,0,1,0,1,1,0,1,1,0,1,0,0,1,0,0,1,1,1,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,1,0,1,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,1,0,1,1,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,1,1,0,0,1,0,0,1,0,1,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,1,1,1,1,0,0,0,1,1,1,0,0,0,1,0,0,1,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,1,0,1,0,1,1,1,1,0,0,1,0,1,0,1,1,1,0,0,0,0,0,1,1,0,1,1,0,0,0,1,0,1,0,1,0,0,0,0,1,0,1,1,1,0,0,0,0,1,0,0,1,0,1,0,0,0,1,0,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,0,0,1,1,0,1,0,0,1,0,0,0,1,0,0,1,0,1,0,0,0,1,1,0,1,0,0,0,0,0,1,1,1,1,0,0,1,0,0,1,0,1,1,1,1,1,1,1,0,1,0,0,1,0,0,0,1,1,0,1,1,1,0,0,0,1,0,1,0,0,1,0,1,0,1,0,1,1,1,0,0,1,0,1,1,0,0,1,1,1,1,1,0,0,0,1,1,0]),he=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]),J=new Uint8Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0]),B=new Uint8Array(1<<14),ye=0;ye<B.length;ye++)B[ye]=Math.random()>.5?1:0;var Ne=Qe(B,Pe),ve=Qe(Pe,Be),pe=[Ne,Pe,ve,Pe,B,U,Be,U],M=i0(2),te=i0(6),Se=i0(31),me=i0(93),De=Qe(he,Be),Ue=Qe(Pe,M),Ce=Qe(Pe,te),_e=[Z,Be,De,ve,M,M,Se,Ue,re,Pe,Se,Z,te,te,me,Ce],ae=new Uint8Array(16),$=new Float32Array(4),K=new Float32Array(4),D=new Float32Array(4),p=new Uint8Array(4),I=[Z,Z,Z,Z],q,R,T,ne,Q=!0;this.setBufferLength=function(G){q=new Int32Array(G)},this.getBuffer=function(){return q},this.setSampleRate=function(G){R=G,ne=S/G/1.2};function ge(G){var V=ae[8],ie=V&_?z:P,W,ee=G&4,ue=ee>>1,j=ee>>2;V&n>>j?(V&d>>j?W=ae[ee+2]*256+ae[ee+0]+7:W=(ae[ee+2]*256+ae[ee+0]+1)*ie,K[ue+1]=ne/W,K[ue+0]=0):(V&d>>j?W=ae[ee+0]+4:W=(ae[ee+0]+1)*ie,K[ue+0]=ne/W,W=(ae[ee+2]+1)*ie,K[ue+1]=ne/W)}this.setRegister=function(G,V){if(G&=15,V&=255,ae[G]!=V)switch(ae[G]=V,G){case 0:case 2:case 4:case 6:case 8:Q=!0;break;case 1:case 3:case 5:case 7:D[G>>1]=V&15,I[G>>1]=pe[V>>5];break}},this.setTIARegister=function(G,V){switch(G){case 23:case 24:ae[(G&1)*4]=V&31,Q=!0;break;case 21:case 22:I[(G&1)*2]=_e[V&15];break;case 25:case 26:D[(G&1)*2]=V&15;break}},this.generate=function(G){Q&&(ge(0),ge(4),Q=!1);for(var V=0;V<G;V+=2){for(var ie=0,W=0;W<4;W++){var ee=K[W],ue=D[W];if(ee>0&&ee<1&&ue>0){var j=I[W],ke=$[W]+=ee;ke>j.length&&(ke=$[W]=ke-Math.floor(ke/j.length)*j.length);var Ee=j[Math.floor(ke)];Ee&&(ie+=ue)}}ie*=64,q[V]=ie,q[V+1]=ie}}},gt=function(b){var e,a,f=[],x=0;b.onmessage=function(m){m&&m.data&&m.data.samples&&a&&(f.push(m.data.samples),x+=m.data.samples.length)},this.setBufferLength=function(m){a=new Int16Array(m),x=0},this.getBuffer=function(){return a},this.setSampleRate=function(m){e=m,b.postMessage({sampleRate:m})},this.generate=function(m){if(x<m*3){a.fill(0);return}for(var d=0;d<a.length&&f.length!=0;){var o=f.shift();x-=o.length;var n=a.length-d;o.length<n?a.set(o,d):(a.set(o.slice(0,n),d),f.unshift(o.slice(n)),x+=o.length-n),d+=o.length}}},J0=function(b){var e=this,a,f,x,m,d,o,n,H,y=4;function g(z){var se=z.outputBuffer.length,u=z.outputBuffer.getChannelData(0),xe=this.module;if(xe||(xe=z.srcElement.module),!!xe)if(xe.callback){xe.callback(u);return}else{for(var Le=o[n],Y=0;Y<u.length;Y++)u[Y]=Le[Y];n=(n+1)%o.length}}function _(){if(o)for(var z of o)z.fill(0)}function P(){var z=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;if(!z){console.log("no web audio context");return}var se=new z;e.context=se,e.sr=e.context.sampleRate,e.bufferlen=2048,e.filterNode=e.context.createBiquadFilter(),e.filterNode.type="lowshelf",e.filterNode.frequency.value=100,e.filterNode.gain.value=-6,typeof e.context.createScriptProcessor=="function"?e.mixerNode=e.context.createScriptProcessor(e.bufferlen,1,1):e.mixerNode=e.context.createJavaScriptNode(e.bufferlen,1,1),e.mixerNode.module=e,e.mixerNode.onaudioprocess=g,e.compressorNode=e.context.createDynamicsCompressor(),e.mixerNode.connect(e.filterNode),e.filterNode.connect(e.compressorNode),e.compressorNode.connect(e.context.destination)}this.start=function(){if(this.context){this.context.state=="suspended"&&this.context.resume();return}if(P(),!!this.context){f=this.sr*1/b,a=0,x=0,d=0,o=[],n=1,H=0;for(var z=0;z<y;z++){var se=new ArrayBuffer(e.bufferlen*4);o[z]=new Float32Array(se)}m=o[0]}},this.stop=function(){this.context&&this.context.suspend&&this.context.suspend(),_()},this.close=function(){this.context&&(this.context.close(),this.context=null)},this.addSingleSample=function(z){if(!!m&&(m[d++]=z,d>=m.length)){d=0,o[H]=m;var se=(H+1)%o.length;se==n?H=Math.floor(n+y/2)%o.length:H=se,m=o[H]}},this.feedSample=function(z,se){if(x+=z*se,a+=f*se,a>=1){for(x/=a;a>=1;)this.addSingleSample(x*f),a-=1;x*=a}}},b0=class{constructor(e){this.sa=new J0(e)}feedSample(e,a){this.sa.feedSample(e,a)}start(){this.sa.start()}stop(){this.sa.stop()}},q0=class{constructor(e,a,f){this.audioGain=1/8192;this.bufferLength=a*2,this.channels=e.generate?[e]:e,this.channels.forEach(x=>{x.setBufferLength(this.bufferLength),x.setSampleRate(f)})}generate(e){var a=this.bufferLength,f=this.channels.map(m=>m.getBuffer());this.channels.forEach(m=>{m.generate(a)});for(let m=0;m<a;m+=2){var x=0;f.forEach(d=>x+=d[m]),e.feedSample(x*this.audioGain,1)}}};var s0=class{logClocks(){}logNewScanline(){}logNewFrame(){}logExecute(){}logInterrupt(){}logRead(){}logWrite(){}logIORead(){}logIOWrite(){}logVRAMRead(){}logVRAMWrite(){}logIllegal(){}logData(){}addLogBuffer(e){}},y0=class{constructor(){this.inputs=new Uint8Array(32);this.nullProbe=new s0;this.probe=this.nullProbe}setKeyInput(e,a,f){this.handler&&this.handler(e,a,f)}connectProbe(e){this.probe=e||this.nullProbe}reset(){this.cpu.reset()}loadROM(e,a){this.rom||(this.rom=new Uint8Array(this.defaultROMSize)),this.rom.set(e)}loadState(e){this.cpu.loadState(e.c),this.ram.set(e.ram),this.inputs.set(e.inputs)}saveState(){return{c:this.cpu.saveState(),ram:this.ram.slice(0),inputs:this.inputs.slice(0)}}loadControlsState(e){this.inputs.set(e.inputs)}saveControlsState(){return{inputs:this.inputs.slice(0)}}advanceCPU(){var e=this.cpu,a=1;return this.cpu.isStable()&&this.probe.logExecute(this.cpu.getPC(),this.cpu.getSP()),e.advanceClock?e.advanceClock():e.advanceInsn&&(a=e.advanceInsn(1)),this.probe.logClocks(a),a}probeMemoryBus(e){return{read:a=>{let f=e.read(a);return this.probe.logRead(a,f),f},write:(a,f)=>{this.probe.logWrite(a,f),e.write(a,f)}}}connectCPUMemoryBus(e){this.cpu.connectMemoryBus(this.probeMemoryBus(e))}probeIOBus(e){return{read:a=>{let f=e.read(a);return this.probe.logIORead(a,f),f},write:(a,f)=>{this.probe.logIOWrite(a,f),e.write(a,f)}}}connectCPUIOBus(e){this.cpu.connectIOBus(this.probeIOBus(e))}},D0=class extends y0{constructor(){super(...arguments);this.overscan=!1;this.rotate=0}getAudioParams(){return{sampleRate:this.sampleRate,stereo:!1}}connectAudio(e){this.audio=e}getVideoParams(){return{width:this.canvasWidth,height:this.numVisibleScanlines,overscan:this.overscan,rotate:this.rotate}}connectVideo(e){this.pixels=e}},Q0=class extends D0{advanceFrame(e){this.preFrame();var a=0,f=0;this.probe.logNewFrame(),this.frameCycles=0;for(var x=0;x<this.numTotalScanlines;x++){for(a+=this.cpuCyclesPerLine,this.scanline=x,this.startScanline();this.frameCycles<a;){if(e&&e()){x=999;break}this.frameCycles+=this.advanceCPU(),f++}this.drawScanline(),this.probe.logNewScanline(),this.probe.logClocks(Math.floor(this.frameCycles-a))}return this.postFrame(),f}preFrame(){}postFrame(){}getRasterY(){return this.scanline}getRasterX(){return this.frameCycles%this.cpuCyclesPerLine}};var R0=["nop","ld bc,xx","ld (bc),a","inc bc","inc b","dec b","ld b,x","rlca","ex af,af'","add hl,bc","ld a,(bc)","dec bc","inc c","dec c","ld c,x","rrca","djnz x","ld de,xx","ld (de),a","inc de","inc d","dec d","ld d,x","rla","jr x","add hl,de","ld a,(de)","dec de","inc e","dec e","ld e,x","rra","jr nz,x","ld hl,xx","ld (xx),hl","inc hl","inc h","dec h","ld h,x","daa","jr z,x","add hl,hl","ld hl,(xx)","dec hl","inc l","dec l","ld l,x","cpl","jr nc,x","ld sp,xx","ld (xx),a","inc sp","inc (hl)","dec (hl)","ld (hl),x","scf","jr c,x","add hl,sp","ld a,(xx)","dec sp","inc a","dec a","ld a,x","ccf","ld b,b","ld b,c","ld b,d","ld b,e","ld b,h","ld b,l","ld b,(hl)","ld b,a","ld c,b","ld c,c","ld c,d","ld c,e","ld c,h","ld c,l","ld c,(hl)","ld c,a","ld d,b","ld d,c","ld d,d","ld d,e","ld d,h","ld d,l","ld d,(hl)","ld d,a","ld e,b","ld e,c","ld e,d","ld e,e","ld e,h","ld e,l","ld e,(hl)","ld e,a","ld h,b","ld h,c","ld h,d","ld h,e","ld h,h","ld h,l","ld h,(hl)","ld h,a","ld l,b","ld l,c","ld l,d","ld l,e","ld l,h","ld l,l","ld l,(hl)","ld l,a","ld (hl),b","ld (hl),c","ld (hl),d","ld (hl),e","ld (hl),h","ld (hl),l","halt","ld (hl),a","ld a,b","ld a,c","ld a,d","ld a,e","ld a,h","ld a,l","ld a,(hl)","ld a,a","add a,b","add a,c","add a,d","add a,e","add a,h","add a,l","add a,(hl)","add a,a","adc a,b","adc a,c","adc a,d","adc a,e","adc a,h","adc a,l","adc a,(hl)","adc a,a","sub b","sub c","sub d","sub e","sub h","sub l","sub (hl)","sub a","sbc a,b","sbc a,c","sbc a,d","sbc a,e","sbc a,h","sbc a,l","sbc a,(hl)","sbc a,a","and b","and c","and d","and e","and h","and l","and (hl)","and a","xor b","xor c","xor d","xor e","xor h","xor l","xor (hl)","xor a","or b","or c","or d","or e","or h","or l","or (hl)","or a","cp b","cp c","cp d","cp e","cp h","cp l","cp (hl)","cp a","ret nz","pop bc","jp nz,xx","jp xx","call nz,xx","push bc","add a,x","rst 00h","ret z","ret","jp z,xx","xxBITxx","call z,xx","call xx","adc a,x","rst 08h","ret nc","pop de","jp nc,xx","out (x),a","call nc,xx","push de","sub x","rst 10h","ret c","exx","jp c,xx","in a,(x)","call c,xx","xxIXxx","sbc a,x","rst 18h","ret po","pop hl","jp po,xx","ex (sp),hl","call po,xx","push hl","and x","rst 20h","ret pe","jp (hl)","jp pe,xx","ex de,hl","call pe,xx","xx80xx","xor x","rst 28h","ret p","pop af","jp p,xx","di","call p,xx","push af","or x","rst 30h","ret m","ld sp,hl","jp m,xx","ei","call m,xx","xxIYxx","cp x","rst 38h"],w0=["in b,(c)","out (c),b","sbc hl,bc","ld (xx),bc","neg","retn","im 0","ld i,a","in c,(c)","out (c),c","adc hl,bc","ld bc,(xx)","neg","reti","","ld r,a","in d,(c)","out (c),d","sbc hl,de","ld (xx),de","neg","retn","im 1","ld a,i","in e,(c)","out (c),e","adc hl,de","ld de,(xx)","neg","retn","im 2","ld a,r","in h,(c)","out (c),h","sbc hl,hl","ld (xx),hl","neg","retn","","rrd","in l,(c)","out (c),l","adc hl,hl","ld hl,(xx)","neg","retn","","rld","in f,(c)","out (c),f","sbc hl,sp","ld (xx),sp","neg","retn","","","in a,(c)","out (c),a","adc hl,sp","ld sp,(xx)","neg","reti","","","ldi","cpi","ini","outi","","","","","ldd","cpd","ind","outd","","","","","ldir","cpir","inir","otir","","","","","lddr","cpdr","indr","otdr","","","",""],I0=["rlc b","rlc c","rlc d","rlc e","rlc h","rlc l","rlc (hl)","rlc a","rrc b","rrc c","rrc d","rrc e","rrc h","rrc l","rrc (hl)","rrc a","rl b","rl c","rl d","rl e","rl h","rl l","rl (hl)","rl a","rr b","rr c","rr d","rr e","rr h","rr l","rr (hl)","rr a","sla b","sla c","sla d","sla e","sla h","sla l","sla (hl)","sla a","sra b","sra c","sra d","sra e","sra h","sra l","sra (hl)","sra a","sll b","sll c","sll d","sll e","sll h","sll l","sll (hl)","sll a","srl b","srl c","srl d","srl e","srl h","srl l","srl (hl)","srl a","bit 0,b","bit 0,c","bit 0,d","bit 0,e","bit 0,h","bit 0,l","bit 0,(hl)","bit 0,a","bit 1,b","bit 1,c","bit 1,d","bit 1,e","bit 1,h","bit 1,l","bit 1,(hl)","bit 1,a","bit 2,b","bit 2,c","bit 2,d","bit 2,e","bit 2,h","bit 2,l","bit 2,(hl)","bit 2,a","bit 3,b","bit 3,c","bit 3,d","bit 3,e","bit 3,h","bit 3,l","bit 3,(hl)","bit 3,a","bit 4,b","bit 4,c","bit 4,d","bit 4,e","bit 4,h","bit 4,l","bit 4,(hl)","bit 4,a","bit 5,b","bit 5,c","bit 5,d","bit 5,e","bit 5,h","bit 5,l","bit 5,(hl)","bit 5,a","bit 6,b","bit 6,c","bit 6,d","bit 6,e","bit 6,h","bit 6,l","bit 6,(hl)","bit 6,a","bit 7,b","bit 7,c","bit 7,d","bit 7,e","bit 7,h","bit 7,l","bit 7,(hl)","bit 7,a","res 0,b","res 0,c","res 0,d","res 0,e","res 0,h","res 0,l","res 0,(hl)","res 0,a","res 1,b","res 1,c","res 1,d","res 1,e","res 1,h","res 1,l","res 1,(hl)","res 1,a","res 2,b","res 2,c","res 2,d","res 2,e","res 2,h","res 2,l","res 2,(hl)","res 2,a","res 3,b","res 3,c","res 3,d","res 3,e","res 3,h","res 3,l","res 3,(hl)","res 3,a","res 4,b","res 4,c","res 4,d","res 4,e","res 4,h","res 4,l","res 4,(hl)","res 4,a","res 5,b","res 5,c","res 5,d","res 5,e","res 5,h","res 5,l","res 5,(hl)","res 5,a","res 6,b","res 6,c","res 6,d","res 6,e","res 6,h","res 6,l","res 6,(hl)","res 6,a","res 7,b","res 7,c","res 7,d","res 7,e","res 7,h","res 7,l","res 7,(hl)","res 7,a","set 0,b","set 0,c","set 0,d","set 0,e","set 0,h","set 0,l","set 0,(hl)","set 0,a","set 1,b","set 1,c","set 1,d","set 1,e","set 1,h","set 1,l","set 1,(hl)","set 1,a","set 2,b","set 2,c","set 2,d","set 2,e","set 2,h","set 2,l","set 2,(hl)","set 2,a","set 3,b","set 3,c","set 3,d","set 3,e","set 3,h","set 3,l","set 3,(hl)","set 3,a","set 4,b","set 4,c","set 4,d","set 4,e","set 4,h","set 4,l","set 4,(hl)","set 4,a","set 5,b","set 5,c","set 5,d","set 5,e","set 5,h","set 5,l","set 5,(hl)","set 5,a","set 6,b","set 6,c","set 6,d","set 6,e","set 6,h","set 6,l","set 6,(hl)","set 6,a","set 7,b","set 7,c","set 7,d","set 7,e","set 7,h","set 7,l","set 7,(hl)","set 7,a"];function d0(b,e,a,f,x){var m,d,o,n=[e,a,f,x],H=!1;switch(d=1,e){case 203:o=I0[a],d++;break;case 237:a>=64&&a<=127&&(o=w0[a-64]),a>=160&&a<=191&&(o=w0[a-160+64]),d++;break;case 221:case 253:var y=e==221?"ix":"iy";a==203?(o=I0[x],n[2]=x,n[3]=f,d++):o=R0[a],o=o.replace(/[(]hl[)]/,"("+y+"+x)"),o=o.replace(/\bhl\b/,y),d++;break;default:o=R0[e];break}if((!o||!o.length)&&(o="??"),/\bxx\b/.test(o))o=o.replace(/\bxx\b/,"$"+N(n[d]+(n[d+1]<<8),4)),d+=2,H=!0;else if(/\bx\b/.test(o)){if(o.startsWith("j")){var g=a<128?b+2+a:b+2-(256-a);g&=65535,o=o.replace(/\bx\b/,"$"+N(g,4)),H=!0}else o=o.replace(/\bx\b/,"$"+N(n[d],2));d+=1}return{line:o.toUpperCase(),nbytes:d,isaddr:H}}var e0=class{constructor(e){this.maxROMSize=262144;this.prefix=e;var a=this;this.cpu={getPC:a.getPC.bind(a),getSP:a.getSP.bind(a),isStable:a.isStable.bind(a),reset:a.reset.bind(a),saveState:()=>a.getCPUState(),loadState:()=>{console.log("loadState not implemented")},connectMemoryBus(){console.log("connectMemoryBus not implemented")}}}getImports(e){return{}}async fetchWASM(){var e=await fetch("res/"+this.prefix+".wasm"),a=await e.arrayBuffer(),f=await WebAssembly.compile(a),x=await WebAssembly.instantiate(f,this.getImports(f));this.instance=x,this.exports=x.exports}async fetchBIOS(){var e=await fetch("res/"+this.prefix+".bios"),a=await e.arrayBuffer();this.biosptr=this.exports.malloc(a.byteLength),this.biosarr=new Uint8Array(this.exports.memory.buffer,this.biosptr,a.byteLength),this.loadBIOS(new Uint8Array(a))}async initWASM(){this.sys=this.exports.machine_init(this.biosptr);let e=this.exports.machine_get_state_size();this.stateptr=this.exports.malloc(e);let a=this.exports.machine_get_controls_state_size();this.ctrlstateptr=this.exports.malloc(a);let f=this.exports.machine_get_cpu_state_size();this.cpustateptr=this.exports.malloc(f),this.romptr=this.exports.malloc(this.maxROMSize),this.statearr=new Uint8Array(this.exports.memory.buffer,this.stateptr,e),this.ctrlstatearr=new Uint8Array(this.exports.memory.buffer,this.ctrlstateptr,a),this.cpustatearr=new Uint8Array(this.exports.memory.buffer,this.cpustateptr,f);let x=4096*4;this.audioarr=new Float32Array(this.exports.memory.buffer,this.exports.machine_get_sample_buffer(),x),this.romarr=new Uint8Array(this.exports.memory.buffer,this.romptr,this.maxROMSize),console.log("machine_init",this.sys,e,a,f,x)}async loadWASM(){await this.fetchWASM(),this.exports.memory.grow(96),await this.fetchBIOS(),await this.initWASM()}getPC(){return this.exports.machine_cpu_get_pc(this.sys)}getSP(){return this.exports.machine_cpu_get_sp(this.sys)}isStable(){return this.exports.machine_cpu_is_stable(this.sys)}loadROM(e){if(e.length>this.maxROMSize)throw new C0(`Rom size too big: ${e.length} bytes`);this.romarr.set(e),this.romlen=e.length,console.log("load rom",e.length,"bytes"),this.reset()}loadBIOS(e){this.biosarr.set(e)}reset(){this.exports.machine_reset(this.sys)}read(e){return this.exports.machine_mem_read(this.sys,e&65535)}readConst(e){return this.exports.machine_mem_read(this.sys,e&65535)}write(e,a){this.exports.machine_mem_write(this.sys,e&65535,a&255)}getAudioParams(){return{sampleRate:44100,stereo:!1}}connectVideo(e){this.pixel_dest=e;var a=this.exports.machine_get_pixel_buffer(this.sys);this.pixel_src=new Uint32Array(this.exports.memory.buffer,a,e.length),console.log("connectVideo",a,e.length)}syncVideo(){this.exports.machine_update_video&&this.exports.machine_update_video(this.sys),this.pixel_dest!=null&&this.pixel_dest.set(this.pixel_src)}saveControlsState(){return this.exports.machine_save_controls_state(this.sys,this.ctrlstateptr),{controls:this.ctrlstatearr.slice(0)}}loadControlsState(e){this.ctrlstatearr.set(e.controls),this.exports.machine_load_controls_state(this.sys,this.ctrlstateptr)}connectAudio(e){this.audio=e}syncAudio(){if(this.audio!=null)for(var e=this.exports.machine_get_sample_count(),a=0;a<e;a++)this.audio.feedSample(this.audioarr[a],1)}advanceFrameClock(e,a){var f;if(e)for(f=0;f<a&&!e();f++)this.exports.machine_tick(this.sys);else this.exports.machine_exec(this.sys,a),f=a;return this.syncVideo(),this.syncAudio(),f}copyProbeData(){if(this.probe&&!(this.probe instanceof s0)){var e=this.exports.machine_get_probe_buffer_size(),a=this.exports.machine_get_probe_buffer_address(),f=new Uint32Array(this.exports.memory.buffer,a,e);this.probe.logNewFrame(),this.probe.addLogBuffer(f)}}connectProbe(e){this.probe=e}getDebugTree(){return this.saveState()}},Fe=function(){return console.log(arguments),0},et=class extends e0{constructor(e){super(e)}getImports(e){var a=this.wasiInstance.getImports(e);return a.env={system:Fe,__sys_mkdir:Fe,__sys_chmod:Fe,__sys_stat64:Fe,__sys_unlink:Fe,__sys_rename:Fe,__sys_getdents64:Fe,__sys_getcwd:Fe,__sys_rmdir:Fe,emscripten_thread_sleep:Fe},a}stdoutWrite(e){return console.log(">>>",e.toString()),e.length}async loadWASM(){let e=await import("./index.esm-5YCYWKYY.js"),a=await import("./index.esm-IVCZ4JDS.js");this.wasmFs=new a.WasmFs;let f=e.WASI.defaultBindings;f.fs=this.wasmFs.fs,f.fs.mkdirSync("/tmp"),f.path=f.path.default,this.wasiInstance=new e.WASI({preopenDirectories:{"/tmp":"/tmp"},env:{},args:[],bindings:f}),this.wasmFs.volume.fds[1].write=this.stdoutWrite.bind(this),this.wasmFs.volume.fds[2].write=this.stdoutWrite.bind(this),await this.fetchWASM(),this.wasiInstance.start(this.instance),await this.initWASM()}};"use strict";function h0(){var b,e,a,f,x,m,d,o,n,H,y=1,g=2,_=4,P=8,z=16,se=32,u=64,xe=128,Le=65534,Y=65532,F=65530,i=65528,s=65526,le=65524,Ae=65522,E=0,de,w,S,Me=[6,0,0,6,6,0,6,6,6,6,6,0,6,6,3,6,0,0,2,4,0,0,5,9,0,2,3,0,3,2,8,6,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5,0,5,3,6,9,11,0,19,2,0,0,2,2,0,2,2,2,2,2,0,2,2,0,2,2,0,0,2,2,0,2,2,2,2,2,0,2,2,0,2,6,0,0,6,6,0,6,6,6,6,6,0,6,6,3,6,7,0,0,7,7,0,7,7,7,7,7,0,7,7,4,7,2,2,2,4,2,2,2,0,2,2,2,2,4,7,3,0,4,4,4,6,4,4,4,4,4,4,4,4,6,7,5,5,4,4,4,6,4,4,4,4,4,4,4,4,6,7,5,5,5,5,5,7,5,5,5,5,5,5,5,5,7,8,6,6,2,2,2,4,2,2,2,0,2,2,2,2,3,0,3,0,4,4,4,6,4,4,4,4,4,4,4,4,5,5,5,5,4,4,4,6,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,7,5,5,5,5,5,5,5,5,6,6,6,6],Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,5,0,4,0,0,0,0,7,0,0,0,0,0,0,0,0,7,0,6,6,0,0,0,7,0,0,0,0,0,0,0,0,7,0,6,6,0,0,0,8,0,0,0,0,0,0,0,0,8,0,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,7],U=[4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Be=function(c,t,A){n|=((c^t^A^A>>1)&128)>>6},Pe=function(c,t,A){n|=((c^t^A^A>>1)&32768)>>14},re=function(){return(e<<8)+a},he=function(c){e=c>>8&255,a=c&255},J=function(c){w(--d,c&255)},B=function(c){w(--d,c&255),w(--d,c>>8&255)},ye=function(c){w(--m,c&255)},Ne=function(c){w(--m,c&255),w(--m,c>>8&255)},ve=function(){return S(d++)},pe=function(){return S(d++)*256+S(d++)},M=function(){return S(m++)},te=function(){return S(m++)*256+S(m++)},Se=function(c){var t=0;c&128&&(B(o),t+=2),c&64&&(B(m),t+=2),c&32&&(B(x),t+=2),c&16&&(B(f),t+=2),c&8&&(J(H),t++),c&4&&(J(a),t++),c&2&&(J(e),t++),c&1&&(J(n),t++),E+=t},me=function(c){var t=0;c&128&&(Ne(o),t+=2),c&64&&(Ne(d),t+=2),c&32&&(Ne(x),t+=2),c&16&&(Ne(f),t+=2),c&8&&(ye(H),t++),c&4&&(ye(a),t++),c&2&&(ye(e),t++),c&1&&(ye(n),t++),E+=t},De=function(c){var t=0;c&1&&(n=ve(),t++),c&2&&(e=ve(),t++),c&4&&(a=ve(),t++),c&8&&(H=ve(),t++),c&16&&(f=pe(),t+=2),c&32&&(x=pe(),t+=2),c&64&&(m=pe(),t+=2),c&128&&(o=pe(),t+=2),E+=t},Ue=function(c){var t=0;c&1&&(n=M(),t++),c&2&&(e=M(),t++),c&4&&(a=M(),t++),c&8&&(H=M(),t++),c&16&&(f=te(),t+=2),c&32&&(x=te(),t+=2),c&64&&(d=te(),t+=2),c&128&&(o=te(),t+=2),E+=t},Ce=function(c){switch(c&15){case 0:return re();case 1:return f;case 2:return x;case 3:return m;case 4:return d;case 5:return o;case 8:return e;case 9:return a;case 10:return n;case 11:return H;default:return null}},_e=function(c,t){switch(c&15){case 0:he(t);return;case 1:f=t;return;case 2:x=t;return;case 3:m=t;return;case 4:d=t;return;case 5:o=t;return;case 8:e=t;return;case 9:a=t;return;case 10:n=t;return;case 11:H=t;return;default:return}},ae=function(c,t){var A=c&136;(A==128||A==8)&&(A=0),t?(A=Ce(c>>4),_e(c>>4,Ce(c)),_e(c,A)):_e(c,Ce(c>>4))},$=function(c){return c>127?c-256:c},K=function(c){return c>32767?c-65536:c},D=function(){var c=S(o++);return o&=65535,c},p=function(){var c=S(o++);o&=65535;var t=S(o++);return o&=65535,c*256+t},I=function(c){var t=S(c++);c&=65535;var A=S(c++);return c&=65535,t*256+A},q=function(c,t){w(c++,t>>8&255),c&=65535,w(c,t&255)},R=function(){var c=D(),t;switch(c&96){case 0:t=f;break;case 32:t=x;break;case 64:t=m;break;case 96:t=d;break}var A=null,X=null,r;if(c&128){switch(c&15){case 0:X=t,A=t+1,E+=2;break;case 1:X=t,A=t+2,E+=3;break;case 2:A=t-1,X=A,E+=2;break;case 3:A=t-2,X=A,E+=3;break;case 4:X=t;break;case 5:X=t+$(a),E+=1;break;case 6:X=t+$(e),E+=1;break;case 7:X=0;break;case 8:X=t+$(D()),E+=1;break;case 9:X=t+K(p()),E+=4;break;case 10:X=0;break;case 11:E+=4,X=t+re();break;case 12:r=$(D()),X=o+r,E+=1;break;case 13:r=K(p()),X=o+r,E+=5;break;case 14:X=0;break;case 15:E+=5,X=p();break}X&=65535,c&16&&(X=S(X)*256+S(X+1&65535),E+=3)}else{var l=c&31;l>15&&(l-=32),X=t+l,E+=1}if(A!==null)switch(c&96){case 0:f=A;break;case 32:x=A;break;case 64:m=A;break;case 96:d=A;break}return X&65535},T=function(c){n&=~(_|P),c===0&&(n|=_),c&32768&&(n|=P)},ne=function(c){return c++,c&=255,n&=~(_|g|P),n|=U[c],(c===0||c==128)&&(n|=g),c},Q=function(c){return c--,c&=255,n&=~(_|g|P),n|=U[c],(c===127||c==255)&&(n|=g),c},ge=function(c,t){var A=c-t;return n&=~(y|_|g|P),n|=U[A&255],A&256&&(n|=y),Be(c,t,A),A&255},G=function(c,t){var A=c-t;return n&=~(y|_|g|P),(A&65535)==0&&(n|=_),A&32768&&(n|=P),A&65536&&(n|=y),Pe(c,t,A),A&65535},V=function(c,t){var A=c+t;return n&=~(se|y|_|g|P),n|=U[A&255],A&256&&(n|=y),Be(c,t,A),(A^c^t)&16&&(n|=se),A&255},ie=function(c,t){var A=c+t;return n&=~(y|_|g|P),(A&65535)==0&&(n|=_),A&32768&&(n|=P),A&65536&&(n|=y),Pe(c,t,A),A&65535},W=function(c,t){var A=c+t+(n&y);return n&=~(se|y|_|g|P),n|=U[A&255],A&256&&(n|=y),Be(c,t,A),(A^c^t)&16&&(n|=se),A&255},ee=function(c,t){var A=c-t-(n&y);return n&=~(y|_|g|P),n|=U[A&255],A&256&&(n|=y),Be(c,t,A),A&255},ue=function(c,t){var A=c-t;n&=~(y|_|g|P),n|=U[A&255],A&256&&(n|=y),Be(c,t,A)},j=function(c,t){var A=c-t;n&=~(y|_|g|P),(A&65535)==0&&(n|=_),A&32768&&(n|=P),A&65536&&(n|=y),Pe(c,t,A)},ke=function(c){return n&=~(y|_|g|P),c==128&&(n|=g),c=(~c&255)+1,c===0&&(n|=_),c&128&&(n|=P|y),c},Ee=function(c){return n&=~(_|y|P),c&1&&(n|=y),c>>=1,c===0&&(n|=_),c&255},He=function(c){return n&=~(_|y|P),c&1&&(n|=y),c=c&128|c>>1,n|=U[c],c},Ze=function(c){var t=c;return n&=~(_|y|P|g),c&128&&(n|=y),c<<=1,n|=U[c],(c^t)&128&&(n|=g),c},Xe=function(c){var t=c,A=n&y;return n&=~(_|y|P|g),c&128&&(n|=y),c=c<<1|A,n|=U[c],(c^t)&128&&(n|=g),c},Te=function(c){var t=n&y;return n&=~(_|y|P),c&1&&(n|=y),c=c>>1|t<<7,n|=U[c],c},Re=function(c,t){return n&=~(_|P|g),c^=t,n|=U[c],c},we=function(c,t){return n&=~(_|P|g),c|=t,n|=U[c],c},fe=function(c,t){return n&=~(_|P|g),c&=t,n|=U[c],c},Ye=function(c){return n&=~(_|P|g),c^=255,n|=U[c],n|=y,c},L=function(){return H*256+D()},ze=function(){var c=E,t=null,A=null,X=o,r=D();switch(E+=Me[r],r){case 0:t=L(),w(t,ke(S(t)));break;case 3:t=L(),w(t,Ye(S(t)));break;case 4:t=L(),w(t,Ee(S(t)));break;case 6:t=L(),w(t,Te(S(t)));break;case 7:t=L(),w(t,He(S(t)));break;case 8:t=L(),w(t,Ze(S(t)));break;case 9:t=L(),w(t,Xe(S(t)));break;case 10:t=L(),w(t,Q(S(t)));break;case 12:t=L(),w(t,ne(S(t)));break;case 13:t=L(),A=S(t),n&=~(_|P|g),n|=U[A];break;case 14:t=L(),o=t;break;case 15:t=L(),w(t,0),n&=~(y|P|g),n|=_;break;case 18:break;case 19:break;case 22:t=K(p()),o+=t;break;case 23:t=K(p()),B(o),o+=t;break;case 25:var l=0,v=e&240,ce=e&15;(ce>9||n&32)&&(l|=6),v>128&&ce>9&&(l|=96),(v>144||n&1)&&(l|=96),t=l+e,n&=~(y|P|_|g),t&256&&(n|=y),e=t&255,n|=U[e];break;case 26:n|=D();break;case 28:n&=D();break;case 29:e=a&128?255:0,T(re()),n&=~g;break;case 30:A=D(),ae(A,!0);break;case 31:A=D(),ae(A,!1);break;case 32:t=$(D()),o+=t;break;case 33:t=$(D());break;case 34:t=$(D()),n&(y|_)||(o+=t);break;case 35:t=$(D()),n&(y|_)&&(o+=t);break;case 36:t=$(D()),n&y||(o+=t);break;case 37:t=$(D()),n&y&&(o+=t);break;case 38:t=$(D()),n&_||(o+=t);break;case 39:t=$(D()),n&_&&(o+=t);break;case 40:t=$(D()),n&g||(o+=t);break;case 41:t=$(D()),n&g&&(o+=t);break;case 42:t=$(D()),n&P||(o+=t);break;case 43:t=$(D()),n&P&&(o+=t);break;case 44:t=$(D()),n&P^(n&g)<<2||(o+=t);break;case 45:t=$(D()),n&P^(n&g)<<2&&(o+=t);break;case 46:t=$(D()),n&P^(n&g)<<2||n&_||(o+=t);break;case 47:t=$(D()),(n&P^(n&g)<<2||n&_)&&(o+=t);break;case 48:f=R(),f===0?n|=_:n&=~_;break;case 49:x=R(),x===0?n|=_:n&=~_;break;case 50:d=R();break;case 51:m=R();break;case 52:Se(D());break;case 53:De(D());break;case 54:me(D());break;case 55:Ue(D());break;case 57:o=pe();break;case 58:f+=a;break;case 59:n=ve(),n&xe&&(E+=9,e=ve(),a=ve(),H=ve(),f=pe(),x=pe(),m=pe()),o=pe();break;case 60:n&=D();break;case 61:t=e*a,t===0?n|=_:n&=~_,t&128?n|=y:n&=~y,he(t);break;case 63:n|=xe,B(o),B(m),B(x),B(f),J(H),J(a),J(e),J(n),n|=z|u,o=I(F);break;case 64:e=ke(e);break;case 67:e=Ye(e);break;case 68:e=Ee(e);break;case 70:e=Te(e);break;case 71:e=He(e);break;case 72:e=Ze(e);break;case 73:e=Xe(e);break;case 74:e=Q(e);break;case 76:e=ne(e);break;case 77:n&=~(_|P|g),n|=U[e];break;case 79:e=0,n&=~(P|g|y),n|=_;break;case 80:a=ke(a);break;case 83:a=Ye(a);break;case 84:a=Ee(a);break;case 86:a=Te(a);break;case 87:a=He(a);break;case 88:a=Ze(a);break;case 89:a=Xe(a);break;case 90:a=Q(a);break;case 92:a=ne(a);break;case 93:n&=~(_|P|g),n|=U[a];break;case 95:a=0,n&=~(P|g|y),n|=_;break;case 96:t=R(),w(t,ke(S(t)));break;case 99:t=R(),w(t,Ye(S(t)));break;case 100:t=R(),w(t,Ee(S(t)));break;case 102:t=R(),w(t,Te(S(t)));break;case 103:t=R(),w(t,He(S(t)));break;case 104:t=R(),w(t,Ze(S(t)));break;case 105:t=R(),w(t,Xe(S(t)));break;case 106:t=R(),w(t,Q(S(t)));break;case 108:t=R(),w(t,ne(S(t)));break;case 109:t=R(),A=S(t),n&=~(_|P|g),n|=U[A];break;case 110:t=R(),o=t;break;case 111:t=R(),w(t,0),n&=~(y|P|g),n|=_;break;case 112:t=p(),w(t,ke(S(t)));break;case 115:t=p(),w(t,Ye(S(t)));break;case 116:t=p(),w(t,Ee(S(t)));break;case 118:t=p(),w(t,Te(S(t)));break;case 119:t=p(),w(t,He(S(t)));break;case 120:t=p(),w(t,Ze(S(t)));break;case 121:t=p(),w(t,Xe(S(t)));break;case 122:t=p(),w(t,Q(S(t)));break;case 124:t=p(),w(t,ne(S(t)));break;case 125:t=p(),A=S(t),n&=~(_|P|g),n|=U[A];break;case 126:t=p(),o=t;break;case 127:t=p(),w(t,0),n&=~(y|P|g),n|=_;break;case 128:e=ge(e,D());break;case 129:ue(e,D());break;case 130:e=ee(e,D());break;case 131:he(G(re(),p()));break;case 132:e=fe(e,D());break;case 133:fe(e,D());break;case 134:e=D(),n&=~(_|P|g),n|=U[e];break;case 136:e=Re(e,D());break;case 137:e=W(e,D());break;case 138:e=we(e,D());break;case 139:e=V(e,D());break;case 140:j(f,p());break;case 141:t=$(D()),B(o),o+=t;break;case 142:f=p(),T(f),n&=~g;break;case 144:t=L(),e=ge(e,S(t));break;case 145:t=L(),ue(e,S(t));break;case 146:t=L(),e=ee(e,S(t));break;case 147:t=L(),he(G(re(),I(t)));break;case 148:t=L(),e=fe(e,S(t));break;case 149:t=L(),fe(e,S(t));break;case 150:t=L(),e=S(t),n&=~(_|P|g),n|=U[e];break;case 151:t=L(),w(t,e),n&=~(_|P|g),n|=U[e];break;case 152:t=L(),e=Re(e,S(t));break;case 153:t=L(),e=W(e,S(t));break;case 154:t=L(),e=we(e,S(t));break;case 155:t=L(),e=V(e,S(t));break;case 156:t=L(),j(f,I(t));break;case 157:t=L(),B(o),o=t;break;case 158:t=L(),f=I(t),T(f),n&=~g;break;case 159:t=L(),q(t,f),T(f),n&=~g;break;case 160:t=R(),e=ge(e,S(t));break;case 161:t=R(),ue(e,S(t));break;case 162:t=R(),e=ee(e,S(t));break;case 163:t=R(),he(G(re(),I(t)));break;case 164:t=R(),e=fe(e,S(t));break;case 165:t=R(),fe(e,S(t));break;case 166:t=R(),e=S(t),n&=~(_|P|g),n|=U[e];break;case 167:t=R(),w(t,e),n&=~(_|P|g),n|=U[e];break;case 168:t=R(),e=Re(e,S(t));break;case 169:t=R(),e=W(e,S(t));break;case 170:t=R(),e=we(e,S(t));break;case 171:t=R(),e=V(e,S(t));break;case 172:t=R(),j(f,I(t));break;case 173:t=R(),B(o),o=t;break;case 174:t=R(),f=I(t),T(f),n&=~g;break;case 175:t=R(),q(t,f),T(f),n&=~g;break;case 176:t=p(),e=ge(e,S(t));break;case 177:t=p(),ue(e,S(t));break;case 178:t=p(),e=ee(e,S(t));break;case 179:t=p(),he(G(re(),I(t)));break;case 180:t=p(),e=fe(e,S(t));break;case 181:t=p(),fe(e,S(t));break;case 182:t=p(),e=S(t),n&=~(_|P|g),n|=U[e];break;case 183:t=p(),w(t,e),n&=~(_|P|g),n|=U[e];break;case 184:t=p(),e=Re(e,S(t));break;case 185:t=p(),e=W(e,S(t));break;case 186:t=p(),e=we(e,S(t));break;case 187:t=p(),e=V(e,S(t));break;case 188:t=p(),j(f,I(t));break;case 189:t=p(),B(o),o=t;break;case 190:t=p(),f=I(t),T(f),n&=~g;break;case 191:t=p(),q(t,f),T(f),n&=~g;break;case 192:a=ge(a,D());break;case 193:ue(a,D());break;case 194:a=ee(a,D());break;case 195:he(ie(re(),p()));break;case 196:a=fe(a,D());break;case 197:fe(a,D());break;case 198:a=D(),n&=~(_|P|g),n|=U[a];break;case 200:a=Re(a,D());break;case 201:a=W(a,D());break;case 202:a=we(a,D());break;case 203:a=V(a,D());break;case 204:t=p(),he(t),T(t),n&=~g;break;case 206:m=p(),T(m),n&=~g;break;case 208:t=L(),a=ge(a,S(t));break;case 209:t=L(),ue(a,S(t));break;case 210:t=L(),a=ee(a,S(t));break;case 211:t=L(),he(ie(re(),I(t)));break;case 212:t=L(),a=fe(a,S(t));break;case 213:t=L(),fe(a,S(t));break;case 214:t=L(),a=S(t),n&=~(_|P|g),n|=U[a];break;case 215:t=L(),w(t,a),n&=~(_|P|g),n|=U[a];break;case 216:t=L(),a=Re(a,S(t));break;case 217:t=L(),a=W(a,S(t));break;case 218:t=L(),a=we(a,S(t));break;case 219:t=L(),a=V(a,S(t));break;case 220:t=L(),A=I(t),he(A),T(A),n&=~g;break;case 221:t=L(),q(t,re()),n&=~g;break;case 222:t=L(),m=I(t),T(m),n&=~g;break;case 223:t=L(),q(t,m),T(m),n&=~g;break;case 224:t=R(),a=ge(a,S(t));break;case 225:t=R(),ue(a,S(t));break;case 226:t=R(),a=ee(a,S(t));break;case 227:t=R(),he(ie(re(),I(t)));break;case 228:t=R(),a=fe(a,S(t));break;case 229:t=R(),fe(a,S(t));break;case 230:t=R(),a=S(t),n&=~(_|P|g),n|=U[a];break;case 231:t=R(),w(t,a),n&=~(_|P|g),n|=U[a];break;case 232:t=R(),a=Re(a,S(t));break;case 233:t=R(),a=W(a,S(t));break;case 234:t=R(),a=we(a,S(t));break;case 235:t=R(),a=V(a,S(t));break;case 236:t=R(),A=I(t),he(A),T(A),n&=~g;break;case 237:t=R(),q(t,re()),n&=~g;break;case 238:t=R(),m=I(t),T(m),n&=~g;break;case 239:t=R(),q(t,m),T(m),n&=~g;break;case 240:t=p(),a=ge(a,S(t));break;case 241:t=p(),ue(a,S(t));break;case 242:t=p(),a=ee(a,S(t));break;case 243:t=p(),he(ie(re(),I(t)));break;case 244:t=p(),a=fe(a,S(t));break;case 245:t=p(),fe(a,S(t));break;case 246:t=p(),a=S(t),n&=~(_|P|g),n|=U[a];break;case 247:t=p(),w(t,a),n&=~(_|P|g),n|=U[a];break;case 248:t=p(),a=Re(a,S(t));break;case 249:t=p(),a=W(a,S(t));break;case 250:t=p(),a=we(a,S(t));break;case 251:t=p(),a=V(a,S(t));break;case 252:t=p(),A=I(t),he(A),T(A),n&=~g;break;case 253:t=p(),q(t,re()),n&=~g;break;case 254:t=p(),m=I(t),T(m),n&=~g;break;case 255:t=p(),q(t,m),T(m),n&=~g;break;case 16:switch(r=D(),E+=Z[r],r){case 33:t=K(p());break;case 34:t=K(p()),n&(y|_)||(o+=t);break;case 35:t=K(p()),n&(y|_)&&(o+=t);break;case 36:t=K(p()),n&y||(o+=t);break;case 37:t=K(p()),n&y&&(o+=t);break;case 38:t=K(p()),n&_||(o+=t);break;case 39:t=K(p()),n&_&&(o+=t);break;case 40:t=K(p()),n&g||(o+=t);break;case 41:t=K(p()),n&g&&(o+=t);break;case 42:t=K(p()),n&P||(o+=t);break;case 43:t=K(p()),n&P&&(o+=t);break;case 44:t=K(p()),n&P^(n&g)<<2||(o+=t);break;case 45:t=K(p()),n&P^(n&g)<<2&&(o+=t);break;case 46:t=K(p()),n&P^(n&g)<<2||n&_||(o+=t);break;case 47:t=K(p()),(n&P^(n&g)<<2||n&_)&&(o+=t);break;case 63:n|=xe,B(o),B(m),B(x),B(f),J(H),J(a),J(e),J(n),n|=z|u,o=I(le);break;case 131:j(re(),p());break;case 140:j(x,p());break;case 142:x=p(),T(x),n&=~g;break;case 147:t=L(),j(re(),I(t));break;case 156:t=L(),j(x,I(t));break;case 158:t=L(),x=I(t),T(x),n&=~g;break;case 159:t=L(),q(t,x),T(x),n&=~g;break;case 163:t=R(),j(re(),I(t));break;case 172:t=R(),j(x,I(t));break;case 174:t=R(),x=I(t),T(x),n&=~g;break;case 175:t=R(),q(t,x),T(x),n&=~g;break;case 179:t=p(),j(re(),I(t));break;case 188:t=p(),j(x,I(t));break;case 190:t=p(),x=I(t),T(x),n&=~g;break;case 191:t=p(),q(t,x),T(x),n&=~g;break;case 206:d=p(),T(d),n&=~g;break;case 222:t=L(),d=I(t),T(d),n&=~g;break;case 223:t=L(),q(t,d),T(d),n&=~g;break;case 238:t=R(),d=I(t),T(d),n&=~g;break;case 239:t=R(),q(t,d),T(d),n&=~g;break;case 254:t=p(),d=I(t),T(d),n&=~g;break;case 255:t=p(),q(t,d),T(d),n&=~g;break}break;case 17:switch(r=D(),E+=Z[r],r){case 63:n|=xe,B(o),B(m),B(x),B(f),J(H),J(a),J(e),J(n),n|=z|u,o=I(Ae);break;case 131:j(m,p());break;case 140:j(d,p());break;case 147:t=L(),j(m,I(t));break;case 156:t=L(),j(d,I(t));break;case 163:t=R(),j(m,I(t));break;case 172:t=R(),j(d,I(t));break;case 179:t=p(),j(m,I(t));break;case 188:t=p(),j(d,I(t));break}break}return e&=255,a&=255,n&=255,H&=255,f&=65535,x&=65535,m&=65535,d&=65535,o&=65535,E-c},Ge=function(){o=I(Le),H=0,n|=u|z,E=0,e=a=H=f=x=m=d=0},je=[[2,1,"NEG"],[1,0,"???"],[1,0,"???"],[2,1,"COM"],[2,1,"LSR"],[1,0,"???"],[2,1,"ROR"],[2,1,"ASR"],[2,1,"LSL"],[2,1,"ROL"],[2,1,"DEC"],[1,0,"???"],[2,1,"INC"],[2,1,"TST"],[2,1,"JMP"],[2,1,"CLR"],[1,0,"Prefix"],[1,0,"Prefix"],[1,2,"NOP"],[1,2,"SYNC"],[1,0,"???"],[1,0,"???"],[3,3,"LBRA"],[3,3,"LBSR"],[1,0,"???"],[1,2,"DAA"],[2,4,"ORCC"],[1,0,"???"],[2,4,"ANDCC"],[1,2,"SEX"],[2,20,"EXG"],[2,20,"TFR"],[2,5,"BRA"],[2,5,"BRN"],[2,5,"BHI"],[2,5,"BLS"],[2,5,"BCC"],[2,5,"BCS"],[2,5,"BNE"],[2,5,"BEQ"],[2,5,"BVC"],[2,5,"BVS"],[2,5,"BPL"],[2,5,"BMI"],[2,5,"BGE"],[2,5,"BLT"],[2,5,"BGT"],[2,5,"BLE"],[2,6,"LEAX"],[2,6,"LEAY"],[2,6,"LEAS"],[2,6,"LEAU"],[2,10,"PSHS"],[2,10,"PULS"],[2,11,"PSHU"],[2,11,"PULU"],[1,0,"???"],[1,2,"RTS"],[1,2,"ABX"],[1,2,"RTI"],[2,2,"CWAI"],[1,2,"MUL"],[1,2,"RESET"],[1,2,"SWI1"],[1,2,"NEGA"],[1,0,"???"],[1,0,"???"],[1,2,"COMA"],[1,2,"LSRA"],[1,0,"???"],[1,2,"RORA"],[1,2,"ASRA"],[1,2,"ASLA"],[1,2,"ROLA"],[1,2,"DECA"],[1,0,"???"],[1,2,"INCA"],[1,2,"TSTA"],[1,0,"???"],[1,2,"CLRA"],[1,2,"NEGB"],[1,0,"???"],[1,0,"???"],[1,2,"COMB"],[1,2,"LSRB"],[1,0,"???"],[1,2,"RORB"],[1,2,"ASRB"],[1,2,"ASLB"],[1,2,"ROLB"],[1,2,"DECB"],[1,0,"???"],[1,2,"INCB"],[1,2,"TSTB"],[1,0,"???"],[1,2,"CLRB"],[2,6,"NEG"],[1,0,"???"],[1,0,"???"],[2,6,"COM"],[2,6,"LSR"],[1,0,"???"],[2,6,"ROR"],[2,6,"ASR"],[2,6,"LSL"],[2,6,"ROL"],[2,6,"DEC"],[1,0,"???"],[2,6,"INC"],[2,6,"TST"],[2,6,"JMP"],[2,6,"CLR"],[3,7,"NEG"],[1,0,"???"],[1,0,"???"],[3,7,"COM"],[3,7,"LSR"],[1,0,"???"],[3,7,"ROR"],[3,7,"ASR"],[3,7,"LSL"],[3,7,"ROL"],[3,7,"DEC"],[1,0,"???"],[3,7,"INC"],[3,7,"TST"],[3,7,"JMP"],[3,7,"CLR"],[2,4,"SUBA"],[2,4,"CMPA"],[2,4,"SBCA"],[3,8,"SUBD"],[2,4,"ANDA"],[2,4,"BITA"],[2,4,"LDA"],[1,0,"???"],[2,4,"EORA"],[2,4,"ADCA"],[2,4,"ORA"],[2,4,"ADDA"],[3,8,"CMPX"],[2,5,"BSR"],[3,8,"LDX"],[1,0,"???"],[2,1,"SUBA"],[2,1,"CMPA"],[2,1,"SBCA"],[2,1,"SUBd"],[2,1,"ANDA"],[2,1,"BITA"],[2,1,"LDA"],[2,1,"STA"],[2,1,"EORA"],[2,1,"ADCA"],[2,1,"ORA"],[2,1,"ADDA"],[2,1,"CMPX"],[2,1,"JSR"],[2,1,"LDX"],[2,1,"STX"],[2,6,"SUBA"],[2,6,"CMPA"],[2,6,"SBCA"],[2,6,"SUBD"],[2,6,"ANDA"],[2,6,"BITA"],[2,6,"LDA"],[2,6,"STA"],[2,6,"EORA"],[2,6,"ADCA"],[2,6,"ORA"],[2,6,"ADDA"],[2,6,"CMPX"],[2,6,"JSR"],[2,6,"LDX"],[2,6,"STX"],[3,7,"SUBA"],[3,7,"CMPA"],[3,7,"SBCA"],[3,7,"SUBD"],[3,7,"ANDA"],[3,7,"BITA"],[3,7,"LDA"],[3,7,"STA"],[3,7,"EORA"],[3,7,"ADCA"],[3,7,"ORA"],[3,7,"ADDA"],[3,7,"CMPX"],[3,7,"JSR"],[3,7,"LDX"],[3,7,"STX"],[2,4,"SUBB"],[2,4,"CMPB"],[2,4,"SBCB"],[3,8,"ADDD"],[2,4,"ANDB"],[2,4,"BITB"],[2,4,"LDB"],[1,0,"???"],[2,4,"EORB"],[2,4,"ADCB"],[2,4,"ORB"],[2,4,"ADDB"],[3,8,"LDD"],[1,0,"???"],[3,8,"LDU"],[1,0,"???"],[2,1,"SUBB"],[2,1,"CMPB"],[2,1,"SBCB"],[2,1,"ADDD"],[2,1,"ANDB"],[2,1,"BITB"],[2,1,"LDB"],[2,1,"STB"],[2,1,"EORB"],[2,1,"ADCB"],[2,1,"ORB "],[2,1,"ADDB"],[2,1,"LDD "],[2,1,"STD "],[2,1,"LDU "],[2,1,"STU "],[2,6,"SUBB"],[2,6,"CMPB"],[2,6,"SBCB"],[2,6,"ADDD"],[2,6,"ANDB"],[2,6,"BITB"],[2,6,"LDB"],[2,6,"STB"],[2,6,"EORB"],[2,6,"ADCB"],[2,6,"ORB"],[2,6,"ADDB"],[2,6,"LDD"],[2,6,"STD"],[2,6,"LDU"],[2,6,"STU"],[3,7,"SUBB"],[3,7,"CMPB"],[3,7,"SBCB"],[3,7,"ADDD"],[3,7,"ANDB"],[3,7,"BITB"],[3,7,"LDB"],[3,7,"STB"],[3,7,"EORB"],[3,7,"ADCB"],[3,7,"ORB"],[3,7,"ADDB"],[3,7,"LDD"],[3,7,"STD"],[3,7,"LDU"],[3,7,"STU"]],h={63:[2,2,"SWI3"],131:[4,8,"CMPU"],140:[4,8,"CMPS"],147:[3,1,"CMPU"],156:[3,1,"CMPS"],163:[3,6,"CMPU"],172:[3,6,"CMPS"],179:[4,7,"CMPU"],188:[4,7,"CMPS"]},k={33:[5,3,"LBRN"],34:[5,3,"LBHI"],35:[5,3,"LBLS"],36:[5,3,"LBCC"],37:[5,3,"LBCS"],38:[5,3,"LBNE"],39:[5,3,"LBEQ"],40:[5,3,"LBVC"],41:[5,3,"LBVS"],42:[5,3,"LBPL"],43:[5,3,"LBMI"],44:[5,3,"LBGE"],45:[5,3,"LBLT"],46:[5,3,"LBGT"],47:[5,3,"LBLE"],63:[2,2,"SWI2"],131:[4,8,"CMPD"],140:[4,8,"CMPY"],142:[4,8,"LDY"],147:[3,1,"CMPD"],156:[3,1,"CMPY"],158:[3,1,"LDY"],159:[3,1,"STY"],163:[3,6,"CMPD"],172:[3,6,"CMPY"],174:[3,6,"LDY"],175:[3,6,"STY"],179:[4,7,"CMPD"],188:[4,7,"CMPY"],190:[4,7,"LDY"],191:[4,7,"STY"],206:[4,8,"LDS"],222:[3,1,"LDS"],223:[3,1,"STS"],238:[3,6,"LDS"],239:[3,6,"STS"],254:[4,7,"LDS"],255:[4,7,"STS"]},C=function(c,t,A,X,r,l){var v=function(qe,V0){for(var n0=qe.toString(16);n0.length<V0;)n0="0"+n0;return n0.toUpperCase()},ce=function(qe){return v(qe&255,2)},Oe=function(qe){return v(qe,4)},oe,Ke,We,Ve=je[c];if(c===16){if(Ve=k[t],Ve===void 0)return["???",2];c=t,t=A,A=X,X=r}if(c===17){if(Ve=h[t],Ve===void 0)return["???",2];c=t,t=A,A=X,X=r}var Ie=Ve[0],Y0=Ve[1],O=Ve[2];switch(Y0){case 0:break;case 1:O+="	$"+ce(t);break;case 2:break;case 3:O+="	#$"+Oe(t*256+A<32768?t*256+A+l:t*256+A+l-65536);break;case 4:O+="	#$"+ce(t);break;case 5:O+="	#$"+Oe(t<128?t+l+2:t+l-254);break;case 6:O+="	";var Je=t,be=["X","Y","U","S"][(Je&96)>>5];if(!(Je&128)){var t0=Je&31;t0>15&&(t0=t0-32),O+=t0+","+be;break}var W0=Je&16,v0=Je&15,a0=A>127?A-256:A,r0=A*256+X>32767?A*256+X-65536:A*256+X;if(W0)switch(v0){case 0:O+="???";break;case 1:O+="[,"+be+"++]";break;case 2:O+="???";break;case 3:O+="[,--"+be+"]";break;case 4:O+="[,"+be+"]";break;case 5:O+="[B,"+be+"]";break;case 6:O+="[A,"+be+"]";break;case 7:O+="???";break;case 8:O+="["+a0+","+be+"]",Ie++;break;case 9:O+="["+r0+","+be+"]",Ie+=2;break;case 10:O+="???";break;case 11:O+="[D,"+be+"]";break;case 12:O+="["+a0+",PC]",Ie++;break;case 13:O+="["+r0+",PC]",Ie+=2;break;case 14:O+="???";break;case 15:O+="[$"+Oe(A*256+X)+"]",Ie+=2;break}else switch(v0){case 0:O+=","+be+"+";break;case 1:O+=","+be+"++";break;case 2:O+=",-"+be;break;case 3:O+=",--"+be;break;case 4:O+=","+be;break;case 5:O+="B,"+be;break;case 6:O+="A,"+be;break;case 7:O+="???";break;case 8:O+=a0+","+be,Ie++;break;case 9:O+=r0+","+be,Ie+=2;break;case 10:O+="???";break;case 11:O+="D,"+be;break;case 12:O+=a0+",PC",Ie++;break;case 13:O+=r0+",PC",Ie+=2;break;case 14:O+="???";break;case 15:O+="$"+Oe(A*256+X),Ie+=2;break}break;case 7:O+="	$"+Oe(t*256+A);break;case 8:O+="	#$"+Oe(t*256+A);break;case 10:for(oe=["PC","U","Y","X","DP","B","A","CC"],Ke=[],We=0;We<8;We++)(t&1)!=0&&Ke.push(oe[7-We]),t>>=1;O+="	"+Ke.join(",");break;case 11:for(oe=["PC","S","Y","X","DP","B","A","CC"],Ke=[],We=0;We<8;We++)(t&1)!=0&&Ke.push(oe[7-We]),t>>=1;O+="	"+Ke.join(",");break;case 20:oe=["D","X","Y","U","S","PC","?","?","A","B","CC","DP","?","?","?","?"],O+="	"+oe[t>>4]+","+oe[t&15];break}return{line:O,nbytes:Ie}};return{steps:function(c){for(;c>0;)c-=ze()},runFrame:function(c){for(;E<c;)ze()},advanceInsn:function(){return ze()},T:function(){return E},getTstates:function(){return E},setTstates:function(c){E=c},reset:Ge,init:function(c,t,A){w=c,S=t,b=A,Ge()},getPC:function(){return o},getSP:function(){return d},saveState:function(){return{PC:o,SP:d,U:m,A:e,B:a,X:f,Y:x,DP:H,CC:n,T:E}},loadState:function(c){o=c.PC,d=c.SP,m=c.U,e=c.A,a=c.B,f=c.X,x=c.Y,H=c.DP,n=c.CC,E=c.T},firq:function(){n&u||(B(o),n&=~xe,J(n),n|=z|u,o=I(s),E+=9)},interrupt:function(){n&z||(B(o),B(m),B(x),B(f),J(H),J(a),J(e),n|=xe,J(n),n|=z,o=I(i),E+=18)},nmi:function(){B(o),B(m),B(x),B(f),J(H),J(a),J(e),n|=xe,J(n),n|=z|u,o=I(Y),E+=18},set:function(c,t){switch(c.toUpperCase()){case"PC":o=t;return;case"A":e=t;return;case"B":a=t;return;case"X":f=t;return;case"Y":x=t;return;case"SP":d=t;return;case"U":m=t;return;case"FLAGS":n=t;return}},flagsToString:function(){for(var c="",t="EFHINZVC",A=0;A<8;A++){var X=n&128>>A;X===0?c+=t[A].toLowerCase():c+=t[A]}return c},disasm:C}}var tt=class{constructor(e,a){this.symbolmap=e,this.debuginfo=a,this.addr2symbol=S0(e),this.addr2symbol[0]||(this.addr2symbol[0]="$00"),this.addr2symbol[65536]="__END__"}};function $e(b){return b&&typeof b.getDebugCategories=="function"}var L0=class{constructor(){this.id2bp={}}getDebugCondition(){return Object.keys(this.id2bp).length==0?null:()=>{var e=!1;for(var a in this.id2bp)this.id2bp[a].cond()&&(e=!0);return e}}},E0=class{constructor(){this.recorder=null;this.internalFiles={}}setRecorder(e){this.recorder=e}updateRecorder(){this.recorder&&this.isRunning()&&this.recorder.frameRequested()&&this.recorder.recordFrame(this.saveState())}inspect(e){return at(this,e)}getDebugTree(){return this.saveState()}readFile(e){return this.internalFiles[e]}writeFile(e,a){return this.internalFiles[e]=a,!0}},f0=class extends E0{constructor(){super(...arguments);this.debugSavedState=null;this.debugBreakState=null;this.debugTargetClock=0;this.debugClock=0;this.breakpoints=new L0;this.frameCount=0}setBreakpoint(e,a){a?(this.breakpoints.id2bp[e]={cond:a},this.restartDebugging()):this.clearBreakpoint(e)}clearBreakpoint(e){delete this.breakpoints.id2bp[e]}hasBreakpoint(e){return this.breakpoints.id2bp[e]!=null}getDebugCallback(){return this.breakpoints.getDebugCondition()}setupDebug(e){this.onBreakpointHit=e}clearDebug(){this.debugSavedState=null,this.debugBreakState=null,this.debugTargetClock=-1,this.debugClock=0,this.onBreakpointHit=null,this.clearBreakpoint("debug"),this.frameCount=0}setDebugCondition(e){this.setBreakpoint("debug",e)}restartDebugging(){this.debugSavedState?this.loadState(this.debugSavedState):this.debugSavedState=this.saveState(),this.debugClock=0,this.debugCallback=this.getDebugCallback(),this.debugBreakState=null,this.resume()}preFrame(){this.debugCallback&&!this.debugBreakState&&(this.debugSavedState=this.saveState(),this.debugTargetClock-=this.debugClock,this.debugClock=0)}postFrame(){this.debugCallback&&this.debugBreakState&&this.loadState(this.debugBreakState),this.frameCount++}pollControls(){}nextFrame(e){this.pollControls(),this.updateRecorder(),this.preFrame();var a=this.advance(e);return this.postFrame(),a}evalDebugCondition(){this.debugCallback&&!this.debugBreakState&&this.debugCallback()}wasBreakpointHit(){return this.debugBreakState!=null}breakpointHit(e,a){console.log(this.debugTargetClock,e,this.debugClock,this.isStable()),this.debugTargetClock=e,this.debugBreakState=this.saveState(),console.log("Breakpoint at clk",this.debugClock,"PC",this.debugBreakState.c.PC.toString(16)),this.pause(),this.onBreakpointHit&&this.onBreakpointHit(this.debugBreakState,a)}haltAndCatchFire(e){this.breakpointHit(this.debugClock,e)}runEval(e){this.setDebugCondition(()=>{if(++this.debugClock>=this.debugTargetClock&&this.isStable()){var a=this.getCPUState();return e(a)?(this.breakpointHit(this.debugClock),!0):!1}})}runToPC(e){this.debugTargetClock++,this.runEval(a=>a.PC==e)}runUntilReturn(){var e=this.getSP();this.runEval(a=>a.SP>e)}runToFrameClock(e){this.restartDebugging(),this.debugTargetClock=e,this.runEval(()=>!0)}step(){this.runToFrameClock(this.debugClock+1)}stepBack(){var e,a,f=this.debugTargetClock;this.restartDebugging(),this.debugTargetClock=f-25,this.runEval(x=>this.debugClock<f?(e=this.saveState(),a=this.debugClock,!1):(e&&(this.loadState(e),this.debugClock=a),!0))}runToVsync(){this.restartDebugging();var e=this.frameCount;this.runEval(()=>this.frameCount>e)}};function at(b,e){if(!!b.debugSymbols){var a=b.debugSymbols.symbolmap,f=b.debugSymbols.addr2symbol;if(!a||!b.readAddress)return null;var x=a["_"+e]||a[e];if(typeof x!="number")return null;var m=b.readAddress(x);if(f&&f[x+1]!=null)return"$"+N(x,4)+" = $"+N(m,2)+" ("+m+" decimal)";{let d=b.readAddress(x+1),o=m|d<<8;return"$"+N(x,4)+" = $"+N(m,2)+" $"+N(d,2)+" ("+(o<<16>>16)+" decimal)"}}}function O0(b){return b.endsWith(".pla")?"plasm":b.endsWith(".c")||b.endsWith(".h")?"cc65":b.endsWith(".s")||b.endsWith(".ca65")?"ca65":b.endsWith(".dasm")?"dasm":b.endsWith(".acme")?"acme":b.endsWith(".wiz")?"wiz":"dasm"}var rt=class extends f0{constructor(){super(...arguments);this.debugPCDelta=-1;this.getToolForFilename=O0}fixPC(e){return e.PC=e.PC+this.debugPCDelta&65535,e}unfixPC(e){return e.PC=e.PC-this.debugPCDelta&65535,e}getSP(){return this.getCPUState().SP}getPC(){return this.getCPUState().PC}isStable(){return!this.getCPUState().T}newCPU(e){var a=new jt.M6502;return a.connectBus(e),a}getOpcodeMetadata(e,a){return M0(e,a)}getOriginPC(){return(this.readAddress(65532)|this.readAddress(65533)<<8)&65535}disassemble(e,a){return m0(e,a(e),a(e+1),a(e+2))}getDefaultExtension(){return".a"}getDebugCategories(){return["CPU","ZPRAM","Stack"]}getDebugInfo(e,a){switch(e){case"CPU":return F0(a.c);case"ZPRAM":return l0(a.b||a.ram,0,256);case"Stack":return o0(this,a.b||a.ram,256,511,256+a.c.SP,32)}}};function F0(b){function e(a){var f="";return f+=a.N?" N":" -",f+=a.V?" V":" -",f+=a.D?" D":" -",f+=a.Z?" Z":" -",f+=a.C?" C":" -",f+=a.I?" I":" -",f}return"PC "+N(b.PC,4)+"  "+e(b)+`
 A `+N(b.A)+"     "+(b.R?"":"BUSY")+`
 X `+N(b.X)+`
 Y `+N(b.Y)+"     SP "+N(b.SP)+`
`}var c0={cycletime:[7,6,0,8,3,3,5,5,3,2,2,2,4,4,6,6,2,5,0,8,4,4,6,6,2,4,0,7,4,4,7,7,6,6,0,8,3,3,5,5,4,2,2,2,4,4,6,6,2,5,0,8,4,4,6,6,2,4,0,7,4,4,7,7,6,6,0,8,3,3,5,5,3,2,2,2,3,4,6,6,2,5,0,8,4,4,6,6,2,4,0,7,4,4,7,7,6,6,0,8,3,3,5,5,4,2,2,2,5,4,6,6,2,5,0,8,4,4,6,6,2,4,0,7,4,4,7,7,0,6,0,6,3,3,3,3,2,0,2,0,4,4,4,4,2,6,0,0,4,4,4,4,2,5,2,0,0,5,0,0,2,6,2,6,3,3,3,3,2,2,2,0,4,4,4,4,2,5,0,5,4,4,4,4,2,4,2,0,4,4,4,4,2,6,0,8,3,3,5,5,2,2,2,2,4,4,3,6,2,5,0,8,4,4,6,6,2,4,0,7,4,4,7,7,2,6,0,8,3,3,5,5,2,2,2,0,4,4,6,6,2,5,0,8,4,4,6,6,2,4,0,7,4,4,7,7],extracycles:[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,1,0,0,0,1,0,1,0,1,1,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,1,0,0,0,1,0,1,0,1,1,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,1,0,0,0,1,0,1,0,1,1,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,1,0,0,0,1,0,1,0,1,1,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,1,0,0,0,1,0,1,0,0,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,1,0,0,0,1,0,1,0,1,1,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,1,0,0,0,1,0,1,0,1,1,1,0,1],insnlengths:[1,2,0,2,2,2,2,2,1,2,1,2,3,3,3,3,2,2,0,2,2,2,2,2,1,3,0,3,3,3,3,3,3,2,0,2,2,2,2,2,1,2,1,2,3,3,3,3,2,2,0,2,2,2,2,2,1,3,0,3,3,3,3,3,1,2,0,2,2,2,2,2,1,2,1,2,3,3,3,3,2,2,0,2,2,2,2,2,1,3,0,3,3,3,3,3,1,2,0,2,2,2,2,2,1,2,1,2,3,3,3,3,2,2,0,2,2,2,2,2,1,3,0,3,3,3,3,3,0,2,0,2,2,2,2,2,1,0,1,0,3,3,3,3,2,2,0,0,2,2,2,3,1,3,1,0,0,3,0,0,2,2,2,2,2,2,2,2,1,2,1,0,3,3,3,3,2,2,0,2,2,2,2,2,1,3,1,0,3,3,3,3,2,2,0,2,2,2,2,2,1,2,1,2,3,3,3,3,2,2,0,2,2,2,2,2,1,3,0,3,3,3,3,3,2,2,0,2,2,2,2,2,1,2,1,0,3,3,3,3,2,2,0,2,2,2,2,2,1,3,0,3,3,3,3,3],validinsns:[1,2,0,0,0,2,2,0,1,2,1,0,0,3,3,0,2,2,0,0,0,2,2,0,1,3,0,0,0,3,3,0,3,2,0,0,2,2,2,0,1,2,1,0,3,3,3,0,2,2,0,0,0,2,2,0,1,3,0,0,0,3,3,0,1,2,0,0,0,2,2,0,1,2,1,0,3,3,3,0,2,2,0,0,0,2,2,0,1,3,0,0,0,3,3,0,1,2,0,0,0,2,2,0,1,2,1,0,3,3,3,0,2,2,0,0,0,2,2,0,1,3,0,0,0,3,3,0,0,2,0,0,2,2,2,0,1,0,1,0,3,3,3,0,2,2,0,0,2,2,2,0,1,3,1,0,0,3,0,0,2,2,2,0,2,2,2,0,1,2,1,0,3,3,3,0,2,2,0,0,2,2,2,0,1,3,1,0,3,3,3,0,2,2,0,0,2,2,2,0,1,2,1,0,3,3,3,0,2,2,0,0,0,2,2,0,1,3,0,0,0,3,3,0,2,2,0,0,2,2,2,0,1,2,1,0,3,3,3,0,2,2,0,0,0,2,2,0,1,3,0,0,0,3,3,0]};function M0(b,e){return{opcode:b,minCycles:c0.cycletime[b],maxCycles:c0.cycletime[b]+c0.extracycles[b],insnlength:c0.insnlengths[b]}}function N0(b){function e(a){return x0(a,["S","Z",,"H",,"V","N","C"],!0)}return"PC "+N(b.PC,4)+"  "+e(b.AF)+" "+(b.iff1?"I":"-")+(b.iff2?"I":"-")+`
SP `+N(b.SP,4)+"  IR "+N(b.IR,4)+`
IX `+N(b.IX,4)+"  IY "+N(b.IY,4)+`
AF `+N(b.AF,4)+"  BC "+N(b.BC,4)+`
DE `+N(b.DE,4)+"  HL "+N(b.HL,4)+`
`}var U0=class extends f0{constructor(){super(...arguments);this.waitCycles=0;this.getToolForFilename=T0}newCPU(e,a){return this._cpu=new u0,this._cpu.connectMemoryBus(e),this._cpu.connectIOBus(a),this._cpu}getPC(){return this._cpu.getPC()}getSP(){return this._cpu.getSP()}isStable(){return!0}runCPU(e,a){if(this._cpu=e,this.waitCycles=0,this.wasBreakpointHit())return 0;var f=this.getDebugCallback(),x=0;for(this.waitCycles+=a;this.waitCycles>0;){if(f&&f()){f=null;break}var m=e.advanceInsn();x+=m,this.waitCycles-=m}return x}getDefaultExtension(){return".c"}getDebugCategories(){return["CPU","Stack"]}getDebugInfo(e,a){switch(e){case"CPU":return N0(a.c);case"Stack":{var f=a.c.SP-1&65535,x=f&65280,m=x+255;return f==0&&(f=65536),console.log(f,x,m),o0(this,[],x,m,f,205)}}}disassemble(e,a){return d0(e,a(e),a(e+1),a(e+2),a(e+3))}};function T0(b){return b.endsWith(".c")||b.endsWith(".h")?"sdcc":b.endsWith(".s")?"sdasz80":b.endsWith(".ns")?"naken":b.endsWith(".scc")?"sccz80":b.endsWith(".z")?"zmac":b.endsWith(".wiz")?"wiz":"zmac"}function H0(b){function e(a){return x0(a,["E","F","H","I","N","Z","V","C"],!0)}return"PC "+N(b.PC,4)+"  "+e(b.CC)+`
SP `+N(b.SP,4)+`
DP `+N(b.DP,2)+`
 A `+N(b.A,2)+`
 B `+N(b.B,2)+`
 X `+N(b.X,4)+`
 Y `+N(b.Y,4)+`
 U `+N(b.U,4)+`
`}function nt(b){return b.endsWith(".c")||b.endsWith(".h")?"cmoc":b.endsWith(".xasm")?"xasm6809":"lwasm"}var it=class extends U0{constructor(){super(...arguments);this.getToolForFilename=nt}newCPU(e){var a=Object.create(h0());return a.init(e.write,e.read,0),a}cpuStateToLongString(e){return H0(e)}disassemble(e,a){return Object.create(h0()).disasm(a(e),a(e+1),a(e+2),a(e+3),a(e+4),e)}getDefaultExtension(){return".asm"}getDebugCategories(){return["CPU","Stack"]}getDebugInfo(e,a){switch(e){case"CPU":return H0(a.c);default:return super.getDebugInfo(e,a)}}};function o0(b,e,a,f,x,m){var d="",o=0;function n(_){return _<e.length?e[_]:b.readAddress(_)}for(;x<f;){x++;var H=n(x)+n(x+1)*256,y=m==32?-2:-3,g=n(H+y);g==m?(d+=`
$`+N(x)+": ",d+=N(H,4)+" "+st(b,H,!0),x++,o=0):(o==0&&(d+=`
$`+N(x)+": "),d+=N(n(x))+" ",++o==8&&(o=0))}return d+`
`}function st(b,e,a){for(var f=e,x=b.debugSymbols&&b.debugSymbols.addr2symbol;x&&e>=0;){var m=x[e];if(m){var m=x[e];return a?m+" + $"+N(f-e):m}if(!a)break;e--}return""}function ft(b){return typeof b.connectVideo=="function"}function ct(b){return typeof b.connectAudio=="function"}function ot(b){return typeof b.setKeyInput=="function"}function Z0(b){return typeof b.setPaddleInput=="function"}function xt(b){return typeof b.getRasterY=="function"}function lt(b){return typeof b.connectProbe=="function"}function mt(b){return typeof b.loadBIOS=="function"}function ut(b){return typeof b.connectSerialIO=="function"}var A0=class extends f0{constructor(e){super();this.mainElement=e}reset(){this.machine.reset(),this.serialVisualizer!=null&&this.serialVisualizer.reset()}loadState(e){this.machine.loadState(e)}saveState(){return this.machine.saveState()}getSP(){return this.machine.cpu.getSP()}getPC(){return this.machine.cpu.getPC()}isStable(){return this.machine.cpu.isStable()}getCPUState(){return this.machine.cpu.saveState()}loadControlsState(e){this.machine.loadControlsState(e)}saveControlsState(){return this.machine.saveControlsState()}async start(){this.machine=this.newMachine();let e=this.machine;e instanceof e0&&await e.loadWASM();var a;if(ft(e)){var f=e.getVideoParams();this.video=new p0(this.mainElement,f.width,f.height,{overscan:!!f.overscan,rotate:f.rotate|0,aspect:f.aspect}),this.video.create(),e.connectVideo(this.video.getFrameData()),ot(e)&&(this.video.setKeyboardEvents(e.setKeyInput.bind(e)),this.poller=new k0(e.setKeyInput.bind(e))),a=f.videoFrequency}if(this.timer=new _0(a||60,this.nextFrame.bind(this)),ct(e)){var x=e.getAudioParams();this.audio=new b0(x.sampleRate),this.audio.start(),e.connectAudio(this.audio)}Z0(e)&&this.video.setupMouseEvents(),lt(e)&&(this.probeRecorder=new P0(e),this.startProbing=()=>(e.connectProbe(this.probeRecorder),this.probeRecorder),this.stopProbing=()=>{e.connectProbe(null)}),mt(e)&&(this.loadBIOS=(m,d)=>{e.loadBIOS(d,m)}),ut(e)&&(this.serialIOInterface==null?this.serialVisualizer=new X0(this.mainElement,e):e.connectSerialIO(this.serialIOInterface))}loadROM(e,a){this.machine.loadROM(a),this.reset()}pollControls(){this.poller&&this.poller.poll(),Z0(this.machine)&&(this.machine.setPaddleInput(0,this.video.paddle_x),this.machine.setPaddleInput(1,this.video.paddle_y)),this.machine.pollControls&&this.machine.pollControls()}advance(e){var a=this.machine.advanceFrame(this.getDebugCallback());return!e&&this.video&&this.video.updateFrame(),!e&&this.serialVisualizer&&this.serialVisualizer.refresh(),a}advanceFrameClock(e,a){if(a>0)return this.machine instanceof e0?this.machine.advanceFrameClock(e,a):this.machine.advanceFrame(()=>--a<=0)}isRunning(){return this.timer&&this.timer.isRunning()}resume(){this.timer.start(),this.audio&&this.audio.start()}pause(){this.timer.stop(),this.audio&&this.audio.stop(),this.probeRecorder&&(this.probeRecorder.singleFrame=!0)}runToVsync(){this.probeRecorder&&(this.probeRecorder.clear(),this.probeRecorder.singleFrame=!1),super.runToVsync()}getRasterScanline(){return xt(this.machine)&&this.machine.getRasterY()}readAddress(e){return this.machine.read(e)}getDebugCategories(){if($e(this.machine))return this.machine.getDebugCategories()}getDebugInfo(e,a){return $e(this.machine)&&this.machine.getDebugInfo(e,a)}},bt=class extends A0{constructor(){super(...arguments);this.getOpcodeMetadata=M0;this.getToolForFilename=O0}disassemble(e,a){return m0(e,a(e),a(e+1),a(e+2))}getDebugCategories(){return $e(this.machine)?this.machine.getDebugCategories():["CPU","ZPRAM","Stack"]}getDebugInfo(e,a){switch(e){case"CPU":return F0(a.c);case"ZPRAM":return l0(a.b||a.ram,0,256);case"Stack":return o0(this,a.b||a.ram,256,511,256+a.c.SP,32);default:return $e(this.machine)&&this.machine.getDebugInfo(e,a)}}},dt=class extends A0{constructor(){super(...arguments);this.getToolForFilename=T0}getDebugCategories(){return $e(this.machine)?this.machine.getDebugCategories():["CPU","Stack"]}getDebugInfo(e,a){switch(e){case"CPU":return N0(a.c);case"Stack":{var f=a.c.SP-1&65535,x=f&65280,m=x+255;return f==0&&(f=65536),console.log(f,x,m),o0(this,[],x,m,f,205)}default:return $e(this.machine)&&this.machine.getDebugInfo(e,a)}}disassemble(e,a){return d0(e,a(e),a(e+1),a(e+2),a(e+3))}},X0=class{constructor(e,a){this.lastOutCount=-1;this.lastInCount=-1;this.device=a,this.textarea=document.createElement("textarea"),this.textarea.classList.add("transcript"),this.textarea.classList.add("transcript-style-2"),this.textarea.style.display="none",e.appendChild(this.textarea)}reset(){this.lastOutCount=0,this.lastInCount=0,this.textarea.style.display="none"}refresh(){var e="";if(this.device.serialOut.length!=this.lastOutCount){var a="";for(var f of this.device.serialOut)e!=f.op&&(a!=""&&(a+=`
`),f.op==="read"?a+="<< ":f.op==="write"&&(a+=">> "),e=f.op),f.value==10?(a+="\u21B5",e=""):a+=g0(f.value);this.textarea.value=a,this.lastOutCount=this.device.serialOut.length,this.textarea.style.display="block"}}};export{m0 as a,d0 as b,u0 as c,B0 as d,K0 as e,$0 as f,St as g,G0 as h,gt as i,J0 as j,q0 as k,s0 as l,y0 as m,D0 as n,Q0 as o,e0 as p,et as q,tt as r,$e as s,E0 as t,at as u,O0 as v,rt as w,F0 as x,M0 as y,N0 as z,U0 as A,T0 as B,it as C,o0 as D,A0 as E,bt as F,dt as G};
//# sourceMappingURL=chunk-NAQO23MV.js.map
